!function(n,t){"use strict";"function"==typeof define&&define.amd?define([],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:n)}(this,function(n){"use strict";function t(n,t,e){return yn[_].slice.call(n,t,e)}function e(n,t){var e;if(r(n,yn)){var i=n[nn];for(e=0;e<i;++e)if(t(n[e],e,n)===X)return}else for(e in n)if(t(n[e],e,n)===X)return}function r(n,t){return t?n!==K&&n!==V?n[Q]===t:X:n?Y:X}function i(n,t,e,r,i,o){if(n&&(!n||!n[J]||n[J][F]||n.render)){var u;return e?u=n:n&&n[J]&&n[J][F]&&(u=n[J][F]),u&&u[t]?(r=r||u.props,i=i||u.state,u[t](r,i,u,o)):void 0}}function o(){function n(n,o){var u,a=arguments,c=a[nn],f=2;o&&o[J]||!r(o,wn)?(f=1,o={}):o!==V&&o!==K&&r(o,wn)||(o={});var s=new i({type:n,props:o,children:[]});(n.indexOf("[")>-1||n.indexOf("#")>-1||n.indexOf(".")>-1)&&(s=e(s)),"svg"!==s.type&&"math"!==s.type||s.props.xmlns||(s.props.xmlns=Z[s.type]);for(var p=f;p<c;p++)if(u=a[p],r(u,yn))for(var l=u[nn],d=0;d<l;d++)s[tn][p-f+d]=t(u[d],s);else s[tn][p-f]=t(u,s);return s}function t(n,t){return r(n,wn)||(n+=""),n}function e(n){var t,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=n.props?n.props:{},o=n.type;for(n.type="div";t=r.exec(o);){var u=t[1],a=t[2],c=t[3],f=t[4],s=t[6];if(""===u&&""!==a)n.type=a;else if("#"===u)i.id=a;else if("."===u)e.push(a);else if("["===c[0]){var p=s;p&&(p=p.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),i[f]=p||Y}}return e[nn]>0&&(i["class"]=e.join(" ")),n.props=i,n}var i=R();return n}function u(n,t,e,r){e?a(n,t,e,0,r,t,e,t[tn][nn],e[tn][nn],t[tn],e[tn]):a(n,t,e,0,r)}function a(n,t,e,i,o,u,y,w,g,b,O){if(i=i||0,e===K){var C=m(t,o);l(n,C,t),y&&y[en].splice(i,0,C)}else if(t===K){var j=y[en][i];p(n,j,e),jn(function(){y[en].splice(i,1)})}else if(f(t,e)){var S=n[en][i];if(w<g)return p(n,S,t),O.splice(i,1),y[en].splice(i,1),-1;var C=m(t,K,K,e);w>g?(d(n,S,C,t),O.splice(i,0,t),y[en].splice(i,0,C)):(v(n,S,C,t),y[en][i]=C)}else if(h(t,e)){var j=y[en][i];if(e.type||t.type){var C=m(t,K,K,e);v(n,j,C,t),y[en][i]=C,O[i]=t}else j.nodeValue=t}else if(r(t[tn],yn)&&r(e[tn],yn)){var C=e.dom||y[en][i],b=t[tn],O=e[tn],w=b[nn],g=O[nn];x(C,t,e);for(var k=0;k<w||k<g;k++){if(s(T))return;var T=b[k],E=O[k],N=a(C,T,E,k,K,t,e,w,g,b,O);N!==K&&(w+=N,g+=N)}}c(t,e)}function c(n,t){t&&n&&t.type&&n.type&&(n.dom=t.dom,n[en]=t[en])}function f(n,t){return n&&t&&n.props&&t.props&&n.props.key!==t.props.key}function s(n){return n&&n[hn]&&n[hn]===X}function p(n,t,e){i(e,pn),n.removeChild(t),i(e,ln)}function l(n,t,e){i(e,sn),n.appendChild(t),i(e,fn)}function d(n,t,e,r){i(r,sn),n.insertBefore(e,t),i(r,fn)}function v(n,t,e,r){i(r,dn),n.replaceChild(e,t),i(r,vn)}function h(n,t){var e=!n.type&&n!==t,r=n.type!==t.type;return e||r}function m(n,t,i,o){var u;if(!n.type)return u=n,r(u,xn)||(u+=""),G.createTextNode(u);var u,a=n[tn];if(n[en]=[],n.props&&n.props.xmlns&&(i=n.props.xmlns),i?(u=G.createElementNS(i,n.type),n.props.xmlns||(n.props.xmlns=i)):u=G.createElement(n.type),n.props&&n.props.ref){var c=n.props.ref;t&&r(c,xn)?(t.refs=t.refs||{},t.refs[c]=u):r(c,gn)&&c(u)}return O(u,n.props),g(u,n.props),r(a,yn)&&e(a,function(e){var r=m(e,t,i,o);n[en].push(r),u.appendChild(r)}),n.dom=u,u}function y(n,t){return"on"===n.substr(0,2)&&r(t,gn)}function w(n){return n.substr(2,n[nn]).toLowerCase()}function g(n,t){for(var e in t){var r=t[e];y(e,r)&&n.addEventListener(w(e),r,X)}}function x(n,t,r){var o=b(t.props,r.props);o[nn]&&(i(t,dn),e(o,function(e){C(n,e.name,e.value,e.op,t.props.xmlns)}),i(t,vn))}function b(n,t){var e=[];t=t||{};var r={};for(var i in n)r[i]=n[i];for(var i in t)r[i]=t[i];for(var i in r){var o=t[i],u=n[i],a=u===K||u===V,c=o===K||o===V||u!==o;if(c||a){var f=a===-1?o:u;e.push({name:i,value:f,op:c||a})}}return e}function O(n,t){for(var e in t)C(n,e,t[e],1,t.xmlns)}function C(n,t,i,o,u){if("ref"!==t&&"key"!==t&&!y(t,i))return o=o===-1?"removeAttribute":"setAttribute","xlink:href"===t?n[o+"NS"](Z.xlink,"href",i):void(i!==Z.svg&&i!==Z.math&&(u===Z.svg?"className"===t&&(t="class"):"class"===t&&(t="className"),r(i,wn)?t===on||"class"===t?e(i,function(t,e){var r=t?"add":"remove";S(r,n,e)}):e(i,function(e,i){r(n[t][i])||(n[t][i]=e)}):!r(i,yn)||t!==on&&"class"!==t?n[t]!==K&&u!==Z.svg?n[t]=i:n[o](t,i):n[o](t,i.join(" "))))}function j(){function n(n,t,e,u,a){return function(c,f){function s(n){if(d)g="finish";else{if(n.target!==c)return;o(m,"transition",V),o(m,"transform",V)}c.removeEventListener(g,s),o(m,"transformOrigin",V),m.willChange&&(m.willChange=V),S("remove",c,w),S("remove",y,w),f&&f(c)}if(e=e||"",r(c,xn)&&(c=document.querySelector(c)),!c&&c.nodeType)throw"can't animate without an element";var p,l,d,v={},h={},c=c.currentTarget||c,m=c.style,y=G.body,w="animation-running",g="transitionend";if(r(c.animate,gn)&&(d=Y),m.willChange!==K&&(m.willChange="transform"),p=i(c),n&&S("toggle",c,n),l=n?i(c):p,h.x=p.left-l.left,h.y=p.top-l.top,h.sx=0!==l.width?p.width/l.width:1,h.sy=0!==l.height?p.height/l.height:1,t=t||200,a=a||"cubic-bezier(0,0,0.32,1)",v[1]="translate("+h.x+"px,"+h.y+"px) translateZ(0) scale("+h.sx+","+h.sy+")",v[1]=v[1]+" "+e,v[2]="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",u&&o(m,"transformOrigin",u),S("add",c,w),S("add",y,w),d){var x=c.animate([{transform:v[1]},{transform:v[2]}],{duration:t,easing:a});x.addEventListener("finish",s)}else o(m,"transform",v[1]),c.offsetWidth,o(m,"transition","transform "+t+"ms "+a+", opacity "+t+"ms "+a),o(m,"transform",v[2]);return d||c.addEventListener(g,s),t}}function t(n){return function(t,r){S("add",t,n);var i=0,o=getComputedStyle(t);o=o.transitionDuration,o=o.replace(/s| /g,"").split(","),e(o,function(n){i+=1e3*parseFloat(n)}),r&&jn(function(){r(t)},i)}}function i(n){var t=n.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}function o(n,t,e){if(n&&n[t]===V)for(var r=["webkit","Webkit","Moz","ms"],i=0;i<r[nn];i++)t=r[i]+t[0].toUpperCase()+t.slice(1),n[t]!==K&&(n[t]=e);else n[t]=e}return{flip:n,transition:t}}function S(n,t,e){function r(n,t){return n[rn]?n[rn].contains(t):n[on].indexOf(t)>-1}function i(n,t){if(n[rn])n[rn].add(t);else if(!r(n,t)){var e=n[on].split(" ");e.push(t),n[on]=e.join(" ")}}function o(n,t){if(n[rn])n[rn].remove(t);else{var e=n[on].split(" ");e.splice(e.indexOf(t),1),n[on]=e.join(" ")}}function u(n,t){n[rn]?n[rn].toggle(t):r(n,t)?o(n,t):i(n,t)}var a={add:i,remove:o,hasClass:r,toggle:u};return a[n](t,e)}function k(){function n(n){var t,e,r=n.responseText,i=n.getResponseHeader("content-type");return i.indexOf(";")!==-1?(e=i.split(";"),e=e[0].split("/")):e=i.split("/"),e=e[1],t="json"===e?JSON.parse(r):"html"===e?(new DOMParser).parseFromString(r,"text/html"):r}function t(t,r,i,o,u){return H(function(a,c){var f=new bn,s=B.location,p=G.createElement("a");p.href=t;var l=!(p.hostname===s.hostname&&p.port===s.port&&p.protocol===s.protocol&&"file:"!==s.protocol);p=K,f.open(r,t),f.onload=function(){a(n(this))},f.onerror=function(){c(this.statusText)},l&&u&&(f.withCredentials=Y),"POST"!==r&&"PUT"!==r||(f.setRequestHeader("Content-type",o),o.indexOf("x-www-form-urlencoded")>-1?i=e(i):o.indexOf("json")>-1&&(i=JSON.stringify(i))),f.send(i)})}function e(n,t){var r=[];for(var i in n){var o=t?t+"["+i+"]":i,u=n[i];r.push("object"==typeof u?e(u,o):Cn(o)+"="+Cn(u))}return r.join("&")}function r(n){return function(e,r,i,o){return i?"json"===i?i="application/json":"text"===i?i="text/plain":"file"===i&&(i="multipart/form-data"):i="application/x-www-form-urlencoded",t(e,n.toUpperCase(),r,i,o)}}return{get:r("GET"),post:r("POST"),put:r("PUT"),"delete":r("DELETE")}}function T(n,t,e){function i(n,t){if(r(n,xn))return n;var e=n.type,i=n.props,a=n[tn];return c[e]?"<"+e+o(i)+">":"<"+e+o(i)+">"+u(a,t)+"</"+e+">"}function o(n){return n=wn.keys(n).filter(function(t){return n[t]!==K&&n[t]!==V&&n[t]!==X}).map(function(t){var e=n[t];if(!r(e,gn)&&"key"!==t&&"ref"!==t)return e===Y?t:t+'="'+e+'"'}).join(" ").replace(/\s+$/g,""),n?" "+n:""}function u(n,t){if(0===n[nn])return"";t=t||0;var e="\t".repeat(t+1),r="\t".repeat(t);return"\n"+e+n.map(function(n){return i(n,t+1)}).join("\n"+e)+"\n"+r}var a,c={area:Y,base:Y,br:Y,"!doctype":Y,col:Y,embed:Y,wbr:Y,track:Y,hr:Y,img:Y,input:Y,keygen:Y,link:Y,meta:Y,param:Y,source:Y};return a=r(n,gn)?n(t,e,n.id===F?K:F):n,i(a)}function E(n){function t(n){return function(t,e){return t=t||{},wn.keys(n).reduce(function(r,i){return r[i]=n[i](t[i],e),r},{})}}function i(n){function t(){return a}function i(t,i){if(!r(t,wn))throw"action must be a plain object";if(t.type===K)throw"actions must have a type";a=n(a,t),e(c,function(n){return n(a)})}function o(n){if(!r(n,gn))throw"listener should be a function";return c.push(n),function(){n=c.filter(function(t){return t!==n})}}function u(n,e){e&&(n=L(n,e)),n(t()),o(function(){n(t())})}var a,c=[];return i({type:z}),{getState:t,dispatch:i,subscribe:o,connect:u}}return i(r(n,wn)?t(n):n)}function N(){function n(n,t,i){function o(){clearInterval(s),s=setInterval(function(){var n=B.location.pathname;f!==n&&(f=n,a())},50)}function u(){e(n,function(e,r){var i=[],o=/([:*])(\w+)|([\*])/g,u=r.replace(o,function(){var n=arguments,t=n[2];return t?(i.push(t),"([^/]+)"):"(?:.*)"}),u=u+"$";n[r]=[e,t?t+u:u,i]})}function a(){e(n,function(n){var t,e=n[0],i=n[1],o=n[2];if(t=f.match(new On(i))){var u=t.slice(1,t[nn]).reduce(function(n,t,e){return n||(n={}),n[o[e]]=t,n},V);r(e,gn)&&e(u)}})}function c(n){t&&(n=t+n),history.pushState(K,K,n)}var f,s;return"/"===t.substr(-1)&&(t=t.substr(0,t[nn]-1)),u(),o(),i&&c(i),{nav:c,back:history.back,foward:history.foward,go:history.go}}return n.apply(K,t(arguments))}function L(n,t){function e(e,r){o=n(e,r),u(t,o,a),a=o}function r(r,i){!f&&c&&(c["render()"]||(c["render()"]=e)),o=n(r,i),t.innerHTML="",o&&(u(t,o,K,c),a=o,s=X)}function i(t,o,u){return u===F?n(t,o):(s||u?r(t,o):e(t,o),i)}var n,o,a,t,c,f,s=Y;if(n=M(n),t=t&&t.nodeType?t:G.querySelector(t),t&&t!==G||(t=G.body),n)return n.stateless&&(f=Y),f||(c=n(K,K,Y)),i;throw"can't find the component"}function M(n){function t(n,t,e){if(e)return c;if(t&&(n=n||{},n[tn]=t),p){if(c[hn]===X||i(c,hn,Y,n)===X)return p[J][hn]=X,p;p[J][hn]=Y}return n&&(i(c,cn,Y,n),P(c,n)),p=c.render()}var o,u;if(r(n,gn)){if(n.id===F)return n;if(o=n(),!o)throw"no render";if(!o.render)return n.stateless=Y,n;u=/function ([^(]*)/.exec(n.valueOf())[1]}else{if(!r(n,wn))throw"invalid component";if(!n.render){var a=function(){return n};return a.stateless=Y,a}o=n}var c=new U(u);e(o,function(n,t){r(n,gn)?"render"!==t&&(c[t]=n.bind(c)):c[t]=n}),c[un]&&(c.state=c[un]()),c[an]&&(c.props=c[an]());var f=R([[F,c],[hn,Y]]),s=o.render.bind(c,c.props,c.state,c);c.render=function(){return new f(s())};var p;return t.id=F,t}function R(n){function t(n){if(!n)throw"not a hyperscript";var t=this;t.type=n.type,t.props=n.props,t[tn]=n[tn]}return t[_][J]={},n&&e(n,function(n,e){t[_][J][n[0]]=n[1]}),t[_][Q]=wn,t}function U(n){this.props={},this.state={},n&&(this.displayName=n)}function P(n,t){n.props=n.props||{},r(t,gn)&&(t=t()),t&&e(t,function(t,e){n.props[e]=t})}function A(n,t){if(n.state=n.state||{},r(t,gn)&&(t=t()),t)return e(t,function(t,e){n.state[e]=t}),Y}function D(n,t,i){function o(n,t,e){var i;r(t,xn)?(i=t in n?n[t]:n.getAttribute(t),i!==K&&i!==V&&e(i)):(i=t(),i!==K&&i!==V&&(e in n?n[e]=i:n.setAttribute(e,i)))}return function(){var u=this;r(n,yn)?e(n,function(n,e){o(u,n,t[e])}):o(u,n,t),i&&i()}}function H(n,t){function i(){return o(arguments)}function o(n){if(n[nn])return a=n[0],u("then",a),i;var e;return e=t===Y?a():r(t,gn)?t(a):a}function u(n,t){f[n][nn]&&e(f[n],function(e){try{var r=e(c[n]||t);r&&(c[n]=r)}catch(o){i.reject(o)}})}var a,c={then:K,"catch":K},f={"catch":[],then:[]};return i.toJSON=function(){return a},i.resolve=function(n){return i(n)},i.reject=function(n){u("catch",n)},i.push=function(n,t,e){return f[n].push(function(n){return t(n)}),e?K:i},i.then=function(n,t){if(t&&i["catch"](t),n)return i.push("then",n,t)},i.done=function(n,t){i.then(n,t||Y)},i["catch"]=function(n){return i.push("catch",n)},i.map=function(n){var t=i;return H(function(e){e(function(){return n(t())})},Y)},i.end=function(){c.then=K,c["catch"]=K,f["catch"]=[],f.then=[]},i.id=$,r(n,gn)?n(i.resolve,i.reject):i(n),i}function W(n,e,i,o){var u=[];return u=r(e,yn)?e:[e],r(n,xn)&&(n=new gn(o,n)),function(r){return r&&r.preventDefault&&i&&r.preventDefault(),u[nn]&&e||(u=t(arguments)),n.apply(this,u)}}function q(){function n(n,t){var r;return e(c,function(e){n.indexOf(e)>-1&&(r="",a.forEach(function(e,i,o){r+="-"+e+"-"+n+": "+t+";\n\t"}),r+=n)}),r?r+": "+t:n+": "+t}function t(u,a,c){var s="";return e(u,function(e,u,s){if(s.hasOwnProperty(u))if(r(e,wn))t(e,a+" "+u,c);else{r(e,gn)&&(e=e()),r(e,yn)&&(e="{"+e.join(":")+";}");var p=" { ";u!==u.toLowerCase()&&(u=i(u)),r(e,mn)&&(e+="px"),"animation"!==u&&"animation-name"!==u||(e=o(f)+e);var l=a+p+n(u,e);a.indexOf("@keyframes")>-1&&(l=l.replace(/%:/g,"%")),"}"!==l.substr(-1)&&(l+=";");var d=l.split(p),v=d[0].replace(/ &|^ /g,""),h=d[1],m=c[v];h="\t"+h,m=m?m+h:h,c[v]=m+"\n"}}),s}function i(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function o(n){var t=n.substr(0,1);return"#"!==t&&"."!==t||(n="\\"+n),n}function u(n){var r={},i="",u=a.concat([""]);t(n,"",r),e(r,function(n,t){n=t+" {\n"+n+"}\n";var r="@keyframes",a=r[nn],c=n.indexOf(r),s=c+a;if(c>-1){var p=[];e(u,function(t){t=t?"-"+t+"-":t;var e=n.substr(0,1)+t+n.substr(1,s);e+=o(f)+n.substr(s+1),p.push(e)}),n=p.join("")}else if(t.indexOf(",")>-1){var l=t.split(",");e(l,function(n,t){var e=t>0?"":" ";l[t]=f+e+n}),l=l.join(", "),n=n.replace(new On(t,"g"),l)}else n=":"===n.substr(0,1)?f+n:f+" "+n;i+=n});var c=f?" data-id="+f:"";return"<style"+c+">\n"+i+"</style>"}var a=["webkit","moz","ms"],c=["animation","transform","appearance","transition","box-shadow","linear-gradient"],f="";return function(n,t){f=t;var e=u(n);return G&&G.head.insertAdjacentHTML("beforeend",e),e}}var I="@@dio",$=I+"/STREAM",z=I+"/STORE",F=I+"/COMPONENT",J=I+"/HYPERSCRIPT",Z={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml"},B=window,G=window.document,V=null,X=!1,Y=!0,K=void 0,Q="constructor",_="prototype",nn="length",tn="children",en="childNodes",rn="classList",on="className",un="getInitialState",an="getDefaultProps",cn="componentWillReceiveProps",fn="componentDidMount",sn="componentWillMount",pn="componentWillUnmount",ln="componentDidUnmount",dn="componentWillUpdate",vn="componentDidUpdate",hn="shouldComponentUpdate",mn=Number,yn=Array,wn=Object,gn=Function,xn=String,bn=XMLHttpRequest,On=RegExp,Cn=encodeURIComponent,jn=setTimeout;U[_]={setState:function(n,t){t=t||this,A(t,n)&&t.forceUpdate()},setProps:function(n,t){t=t||this,P(t,n)},forceUpdate:function(n){n=n||this,n["render()"]&&n["render()"]()},withAttr:function(n,t,e,i){return i=i||this,r(e,gn)||(e=function(){i.forceUpdate.call(i)}),D(n,t,e.bind(i))}},H.combine=function(n,e){return r(e,yn)||(e=t(arguments,1)),H(function(t){t(function(){return n.apply(K,e)})},Y)},H.all=function(n){function t(t,e){r.push(t),r[nn]===n[nn]&&e(r)}var r=[];return H(function(r,i){e(n,function(n,e,o){n.id===$?n.done(function(n){t(n,r)},function(n){i(n)}):t(n,r)})})},H.scan=function(n,t,e){return H(function(r){e.then(function(){t=n(t,e),r(t)})})},n.h=o(),n.dio={animate:j(),request:k(),createComponent:M,createFunction:W,createStream:H,createRender:L,createRouter:N,createStore:E,createHTML:T,createStyle:q()}});