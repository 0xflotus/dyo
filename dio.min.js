!function(n,t){"use strict";"function"==typeof define&&define.amd?define([],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:n)}(this,function(n){"use strict";function t(n,t){return Q[M].slice.call(n,t)}function e(n,t){var e;if(r(n,Q)||n[D]&&r(n[D],K)&&n[0]){var i=n[D];for(e=0;e<i;++e)if(t.call(n[e],n[e],e,n)===P)return}else for(e in n)if(t.call(n[e],n[e],e,n)===P)return}function r(n,t){return t?n!==R&&n!==N?n[L]===t:P:n?U:P}function i(n,t){t=t||0,on(n,t)}function o(n,t,e,r,i){if(n&&(n.internal||n.render)){var o=e?n:n.internal;return o&&o[t]?(r=r||o.props,i=i||o.state,o[t](r,i,o)):void 0}}function a(){function n(n,o){var a,u=arguments,f=u[D],c=2;t(o)||!r(o,V)?(c=1,o={}):o!==N&&o!==R&&r(o,V)||(o={});var s={type:n,props:o,children:[]};n.indexOf("[")===-1&&n.indexOf("#")===-1&&n.indexOf(".")===-1||(s=i(s)),"svg"!==s.type&&"math"!==s.type||s.props.xmlns||(s.props.xmlns=T[s.type]);for(var p=c;p<f;p++)if(a=u[p],r(a,Q))for(var l=0;l<a[D];l++)s.children[p-c+l]=e(a[l],s);else s.children[p-c]=e(a,s);return s}function t(n){var t=n&&n.type&&n.children&&n.props;if(!t)return P;var e=0;for(var r in n){if(e>3)break;n.hasOwnProperty(r)&&e++}return 3===e}function e(n){return r(n,V)&&t(n)||(r(n,V)?n=JSON.stringify(n):n+="","null"!==n&&"undefined"!==n||(n="")),n}function i(n){var t,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=n.props?n.props:{},o=n.type;for(n.type="div";t=r.exec(o);){var a=t[1],u=t[2],f=t[3],c=t[4],s=t[6];if(""===a&&""!==u)n.type=u;else if("#"===a)i.id=u;else if("."===a)e.push(u);else if("["===f[0]){var p=s;p&&(p=p.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),i[c]=p||U}}return e[D]>0&&(i.className=e.join(" ")),n.props=i,n}return n}function u(n,t,a,u){function f(n,t,e,r,i,a,u){if(r=r||0,o(t,X)!==P)if(e===R&&t){var c=m(t,i);l(n,c,t)}else if(t===R){var c=n[I][r];p(n,c,e)}else{if(t.props&&e.props&&(t.props.key||e.props.key)&&t.props.key!==e.props.key){var d,c,y=a[D],g=u[D];return y>g?d=1:y<g&&(d=-1),s(n,a,u,d,r,t)}if(v(t,e)){var w=n[I][r],c=m(t);h(n,c,w,t)}else if(t.type){var b=n[I],y=t[A][D],g=e[A][D];x(b[r],t,e);for(var O=0;O<y||O<g;O++){var a=t[A],u=e[A],k=f(b[r],a[O],u[O],O,R,a,u);k!==R&&(y+=k,g+=k)}}}}function s(n,t,e,r,i,o){var a,u=n[I][i];if((r>0||!r)&&(a=m(o)),r>0)e.splice(i,0,R),d(n,a,u,o);else{if(r<0)return e.splice(i,1),p(n,u,o),-1;h(n,a,u,o)}}function p(n,t,e){if(t){var a=o(e,z,t);r(a,K)||(a=0),i(function(){t&&n.removeChild(t)},a)}}function l(n,t,e){t&&(o(e,$),n.appendChild(t),o(e,B))}function d(n,t,e,r){t&&(o(r,$),n.insertBefore(t,e),o(r,B))}function h(n,t,e,r){t&&e&&(o(r,Z),n.replaceChild(t,e),o(r,G))}function v(n,t){var e=n[L]!==t[L],i=r(n,nn)&&n!==t,o=n.type!==t.type;return i||o||e}function m(n,t,i){if(r(n,nn))return j.createTextNode(n);var o,i;if(n.props&&n.props.xmlns&&(i=n.props.xmlns),o=i?j.createElementNS(i,n.type):j.createElement(n.type),n.props&&n.props.ref){var a=n.props.ref;t&&r(a,nn)?(t.refs=t.refs||{},t.refs[a]=o):r(a,Y)&&a(o)}return O(o,n.props),w(o,n.props),r(n.children,Q)&&e(n.children,function(n){o.appendChild(m(n,t,i))}),o}function y(n,t){return"on"===n.substr(0,2)&&r(t,Y)}function g(n){return n.substr(2,n[D]).toLowerCase()}function w(n,t){for(var e in t){var r=t[e];y(e,r)&&r&&n.addEventListener(g(e),r,P)}}function x(n,t,r){var i=b(n,t.props,r.props);i[D]&&(o(t,Z),e(i,function(n){k(n.target,n.name,n.value,n.op)}),o(t,G))}function b(n,t,e){var r=[];e=e!==R?e:{};var i={};for(var o in t)i[o]=t[o];for(var o in e)i[o]=e[o];for(var o in i){var a=e[o],u=t[o],f=u===R||u===N,c=a===R||a===N||u!==a&&!y(o,i[o]),s=f===-1?a:u;(c||f)&&r.push({target:n,name:o,value:s,op:c||f})}return r}function O(n,t){for(var e in t)k(n,e,t[e],1)}function k(n,t,i,o){if(!y(t,i)&&"ref"!==t&&"key"!==t){if(o=(o===-1?"remove":"set")+"Attribute","xlink:href"===t)return n[o+"NS"](T.xlink,"href",i);if(i!==T.svg&&i!==T.math)if(t===q&&(t="class"),r(i,V))"class"===t?e(i,function(t,e){var r=t?"add":"remove";c(r,n,e)}):e(i,function(e,i){r(n[t][i])||(n[t][i]=e)});else if(r(i,Q)&&"class"===t)n[o](t,i.join(" "));else if(t.indexOf("-")>-1||n[t]===R||n.namespaceURI!==T.html)n[o](t,i);else try{n[t]=i}catch(a){}}}f(n,t,a,R,u)}function f(){function n(n,t,e,a,u){return function(f,s){function p(n){if(h)x="finish";else{if(n.target!==f)return;o(y,"transition",N),o(y,"transform",N)}f.removeEventListener(x,p),o(y,"transformOrigin",N),y.willChange&&(y.willChange=N),c("remove",f,w),c("remove",g,w),s&&s(f)}if(e=e||"",r(f,nn)&&(f=document.querySelector(f)),!f&&f.nodeType)throw"can't animate without an element";var l,d,h,v={},m={},f=f.currentTarget||f,y=f.style,g=j.body,w="animation-running",x="transitionend";if(r(f.animate,Y)&&(h=U),y.willChange&&(y.willChange="transform"),l=i(f),n&&c("toggle",f,n),d=n?i(f):l,m.x=l.left-d.left,m.y=l.top-d.top,m.sx=0!==d.width?l.width/d.width:1,m.sy=0!==d.height?l.height/d.height:1,t=t||200,u=u||"cubic-bezier(0,0,0.32,1)",v[1]="translate("+m.x+"px,"+m.y+"px) translateZ(0) scale("+m.sx+","+m.sy+")",v[1]=v[1]+" "+e,v[2]="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",a&&o(y,"transformOrigin",a),c("add",f,w),c("add",g,w),h){var b=f.animate([{transform:v[1]},{transform:v[2]}],{duration:t,easing:u});b.addEventListener("finish",p)}else o(y,"transform",v[1]),f.offsetWidth,o(y,"transition","transform "+t+"ms "+u+", opacity "+t+"ms "+u),o(y,"transform",v[2]);return h||f.addEventListener(x,p),t}}function t(n){return function(t,r){c("add",t,n);var i=0,o=getComputedStyle(t);o=o.transitionDuration,o=o.replace(/s| /g,"").split(","),e(o,function(n){i+=1e3*parseFloat(n)}),r&&on(function(){r(t)},i)}}function i(n){var t=n.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}function o(n,t,e){if(n&&n[t]===N)for(var r=["webkit","Webkit","Moz","ms"],i=0;i<r[D];i++)t=r[i]+t[0].toUpperCase()+t.slice(1),n[t]!==R&&(n[t]=e);else n[t]=e}return{flip:n,transition:t}}function c(n,t,e){function r(n,t){return n[W]?n[W].contains(t):n[q].indexOf(t)>-1}function i(n,t){if(n[W])n[W].add(t);else if(!r(n,t)){var e=n[q].split(" ");e.push(t),n[q]=e.join(" ")}}function o(n,t){if(n[W])n[W].remove(t);else{var e=n[q].split(" ");e.splice(e.indexOf(t),1),n[q]=e.join(" ")}}function a(n,t){n[W]?n[W].toggle(t):r(n,t)?o(n,t):i(n,t)}var u={add:i,remove:o,hasClass:r,toggle:a};return u[n](t,e)}function s(){function n(n,e,i,o,a,u){function f(n){var t,e,r=n.responseText,i=n.getResponseHeader("content-type");return i.indexOf(";")!==-1?(e=i.split(";"),e=e[0].split("/")):e=i.split("/"),e=e[1],t="json"===e?JSON.parse(r):"html"===e?(new DOMParser).parseFromString(r,"text/html"):r}var c=x(R,R,function(n,t,e){var i;if(n){var o=n.currentTarget;r(o,tn)?i=o:r(n,tn)&&(i=n)}return i?i.status>=200&&i.status<400?t(f(i)):void(r(e,Y)&&e(i.statusText)):t(n)}),s=new tn,p=E.location,l=j.createElement("a");l.href=n;var d=!(l.hostname===p.hostname&&l.port===p.port&&l.protocol===p.protocol&&"file:"!==p.protocol);return l=R,s.open(e,n),s.onload=function(){c(this)},s.onerror=function(n){if(c){var t=this;c.then&&c.then(function(){throw t.statusText}),c(t)}},d&&u&&(s.withCredentials=U),"POST"!==e&&"PUT"!==e||(s.setRequestHeader("Content-type",o),o.indexOf("x-www-form-urlencoded")>-1?i=t(i):o.indexOf("json")>-1&&(i=JSON.stringify(i))),s.send(i),c}function t(n,e){var r=[];for(var i in n){var o=e?e+"["+i+"]":i,a=n[i];r.push("object"==typeof a?t(a,o):rn(o)+"="+rn(a))}return r.join("&")}function e(t){return function(e,i,o,a,u){if(r(o,Y)){var f=a;a=o,o=f}return o?"json"===o?o="application/json":"text"===o?o="text/plain":"file"===o&&(o="multipart/form-data"):o="application/x-www-form-urlencoded",n(e,t.toUpperCase(),i,o,a,u)}}return{get:e("GET"),post:e("POST"),put:e("PUT"),"delete":e("DELETE")}}function p(n,t,e){function i(n,t){if(r(n,nn))return n;var e=n.type,i=n.props,f=n.children;return u[e]?"<"+e+o(i)+">":"<"+e+o(i)+">"+a(f,t)+"</"+e+">"}function o(n){return n=V.keys(n).filter(function(t){return n[t]!==R&&n[t]!==N&&n[t]!==P}).map(function(t){var e=n[t];if(!r(e,Y)&&"key"!==t&&"ref"!==t)return e===U?t:t+'="'+e+'"'}).join(" ").replace(/\s+$/g,""),n?n:""}function a(n,t){if(0===n[D])return"";t=t||0;var e="\t".repeat(t+1),r="\t".repeat(t);return"\n"+e+n.map(function(n){return i(n,t+1)}).join("\n"+e)+"\n"+r}var u={area:U,base:U,br:U,"!doctype":U,col:U,embed:U,wbr:U,track:U,hr:U,img:U,input:U,keygen:U,link:U,meta:U,param:U,source:U},f=r(n,Y)?n(t,e,O):n;return i(f)}function l(n){function t(n){return function(t,e){return t=t||{},V.keys(n).reduce(function(r,i){return r[i]=n[i](t[i],e),r},{})}}function i(n){function t(){return u}function i(t,i){if(!r(t,V))throw"action must be a plain object";if(t.type===R)throw"actions must have a type";u=n(u,t),e(f,function(n){return n(u)})}function o(n){if(!r(n,Y))throw"listener should be a function";return f.push(n),function(){n=f.filter(function(t){return t!==n})}}function a(n,e){e&&(n=h(n,e)),n(t()),o(function(){n(t())})}var u,f=[];return i({type:C}),{getState:t,dispatch:i,subscribe:o,connect:a}}return i(r(n,V)?t(n):n)}function d(){function n(n,t,i){function o(){clearInterval(s),s=setInterval(function(){var n=E.location.pathname;c!==n&&(c=n,u())},50)}function a(){e(n,function(e,r){var i=[],o=/([:*])(\w+)|([\*])/g,a=r.replace(o,function(){var n=arguments,t=n[2];return t?(i.push(t),"([^/]+)"):"(?:.*)"}),a=a+"$";n[r]=[e,t?t+a:a,i]})}function u(){e(n,function(n){var t,e=n[0],i=n[1],o=n[2];if(t=c.match(new en(i))){var a=t.slice(1,t[D]).reduce(function(n,t,e){return n||(n={}),n[o[e]]=t,n},N);r(e,Y)&&e(a)}})}function f(n){t&&(n=t+n),history.pushState(R,R,n)}var c,s;return"/"===t.substr(-1)&&(t=t.substr(0,t[D]-1)),a(),o(),i&&f(i),{nav:f,back:history.back,foward:history.foward,go:history.go}}return n.apply(R,t(arguments))}function h(){function n(n,t){f=a(n,t),u(s,f,c),c=f}function i(t,e){!l&&p&&(p[H]&&(g(p,p[H]()),delete p[H]),p[F]&&(y(p,p[F]()),delete p[F]),p["render()"]||(p["render()"]=n)),f=a(t,e),s.innerHTML="",f&&(u(s,f,R,p),c=f,d=P)}function o(t,e,r){return r===O?a(t,e):(d||r?i(t,e):n(t,e),o)}var a,f,c,s,p,l,d=U,h=t(arguments);if(e(h,function(n){r(n,Y)||r(n,V)?a=v(n):n.nodeType?s=n===j?j.body:n:r(n,nn)&&(s=j.querySelector(n))}),s||(s=j.body),a)return a.stateless&&(l=U),l||(p=a(R,R,U)),o;throw"can't find the component"}function v(n){function t(n){var t=this;if(!n)throw"not a hyperscript";t.type=n.type,t.props=n.props,t.children=n.children}var i;if(r(n,Y)){if(i=n(),!i)throw"no render";if(!i.render)return n.stateless=U,n}else{if(!r(n,V))throw"invalid component";i=n.render?n:{render:function(){return n}}}var a=new m;e(i,function(n,t){r(n,Y)?"render"===t?a[t]=n.bind(a,a.props,a.state,a):a[t]=n.bind(a):a[t]=n}),t[M].internal=a,t[M][L]=V;var u=a.render;return function(n,e,r){return a.render=function(){return new t(u())},e&&(n=n||{},n.children=e),n&&(o(a,J,U,n),y(a,n)),r?a:a.render()}}function m(){this.props={},this.state={}}function y(n,t){n.props=n.props||{},t&&e(t,function(t,e){n.props[e]=t})}function g(n,t){if(n.state=n.state||{},r(t,Y)&&(t=t()),t)return e(t,function(t,e){n.state[e]=t}),U}function w(n,t,i){function o(n,t,e){var i;r(t,nn)?(i=t in n?n[t]:n.getAttribute(t),i!==R&&i!==N&&e(i)):(i=t(),i!==R&&i!==N&&(e in n?n[e]=i:n.setAttribute(e,i)))}return function(){var a=this;r(n,Q)?e(n,function(n,e){o(a,n,t[e])}):o(a,n,t),i&&i()}}function x(n,t,i){function o(){var t=arguments;return t[D]&&(v=n=t[0],h[D]&&e(h,function(n){v=n(v)||v})),a()}function a(){return n&&n.id===k?n():t?t(n):n}function u(t){function e(){return a(),t(n)}return e.id=k,x(e)}function f(n,t){if(r(n,Y)&&h.push(function(e){var o;try{if(i)d?o=i(e,n):(o=i(e,n,l),d=U);else var o=n(e)}catch(a){r(l,Y)&&l(a)}return t&&(h=v=l=R),o}),r(t,Y)&&(l=t),!t)return this}function c(n){f(R,n)}function s(n,t){t=t||U,f(n,t)}function p(){return a()}var l,d,h=[],v=n;return o.valueOf=valueOf,o.toString=toString,o.map=u,o.toJSON=p,o.then=f,o.done=s,o["catch"]=c,o.id=S,o}function b(n,t,e){var i=[];return r(t,_)?e=t:i=r(t,Q)?t:[t],function(r){return r&&r.preventDefault&&e&&r.preventDefault(),i[D]&&t||(i=arguments),n.apply(this,i)}}var O="@@dio",k=O+"/MAPPER",S=O+"/PROP",C=O+"/INIT",T={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml"},j=document,E=window,N=null,P=!1,U=!0,R=void 0,L="constructor",M="prototype",D="length",I="childNodes",A="children",W="classList",q="className",H="getInitialState",F="getDefaultProps",J="componentWillReceiveProps",B="componentDidMount",$="componentWillMount",z="componentWillUnmount",Z="componentWillUpdate",G="componentDidUpdate",X="shouldComponentUpdate",K=Number,Q=Array,V=Object,Y=Function,_=Boolean,nn=String,tn=XMLHttpRequest,en=RegExp,rn=encodeURIComponent,on=E.setTimeout;m[M]={setState:function(n,t){t=t||this,g(t,n)&&t.forceUpdate()},setProps:function(n,t){t=t||this,y(t,n)},forceUpdate:function(n){n=n||this,n["render()"]&&n["render()"]()},withAttr:function(n,t,e,i){return i=i||this,r(e,Y)||(e=function(){i.forceUpdate.call(i)}),w(n,t,e.bind(i))}},x.combine=function(n){function t(){return e.forEach(function(n,t){r(n,Y)&&n.id===S&&(e[t]=n())}),n.apply(R,e)}var e=Q[M].slice.call(arguments,1);return t.id=k,x(t)},n.h=a(),n.dio={animate:f(),request:s(),createFunction:b,createStream:x,createRender:h,createRouter:d,createStore:l,createHTML:p}});