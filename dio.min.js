!function(n,t){"use strict";"function"==typeof define&&define.amd?define([],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:n)}(this,function(n){"use strict";function t(n,t,e){return _[H].slice.call(n,t,e)}function e(n,t){var e;if(r(n,_)||n[I]&&r(n[I],V)&&n[0]){var o=n[I];for(e=0;e<o;++e)if(t.call(n[e],n[e],e,n)===U)return}else for(e in n)if(t.call(n[e],n[e],e,n)===U)return}function r(n,t){return t?n!==A&&n!==L?n[D]===t:U:n?P:U}function o(n,t){t=t||0,cn(n,t)}function i(n,t,e,r,o,i){if(n&&(!n||!n[E]||n[E][k]||n.render)){var u;return e?u=n:n&&n[E]&&n[E][k]&&(u=n[E][k]),u&&u[t]?(r=r||u.props,o=o||u.state,u[t](r,o,u,i)):void 0}}function u(){function n(n,i){var u,a=arguments,c=a[I],f=2;i&&i[E]||!r(i,nn)?(f=1,i={}):i!==L&&i!==A&&r(i,nn)||(i={});var s=new o({type:n,props:i,children:[]});(n.indexOf("[")>-1||n.indexOf("#")>-1||n.indexOf(".")>-1)&&(s=e(s)),"svg"!==s.type&&"math"!==s.type||s.props.xmlns||(s.props.xmlns=M[s.type]);for(var p=f;p<c;p++)if(u=a[p],r(u,_))for(var l=u[I],d=0;d<l;d++)s[q][p-f+d]=t(u[d]);else s[q][p-f]=t(u);return s}function t(n){return(!r(n)||r(n,V)||r(n,rn))&&(n+="","null"!==n&&"undefined"!==n||(n="")),n}function e(n){var t,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,o=n.props?n.props:{},i=n.type;for(n.type="div";t=r.exec(i);){var u=t[1],a=t[2],c=t[3],f=t[4],s=t[6];if(""===u&&""!==a)n.type=a;else if("#"===u)o.id=a;else if("."===u)e.push(a);else if("["===c[0]){var p=s;p&&(p=p.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),o[f]=p||P}}return e[I]>0&&(o["class"]=e.join(" ")),n.props=o,n}var o=m();return n}function a(n,t,u,a){function c(n,t,e,o,i,u,a){if(o=o||0,e===A&&t)d(n,y(t,i),t);else if(t===A)l(n,h=n[W][o],e);else{if(t.props&&e.props&&(t.props.key||e.props.key)&&t.props.key!==e.props.key){var f,h,w=u[I],g=a[I];return w>g?f=1:w<g&&(f=-1),p(n,a,f,o,t)}if(m(t,e)){var b,C=n[W][o];r(t,en)&&3===C.nodeType?(h=t,b=P):h=y(t),v(n,h,C,t,b)}else if(t.type){var O=n[W],h=O[o],w=t[q][I],g=e[q][I];x(h,t,e);for(var S=0;S<w||S<g;S++){var u=t[q],a=e[q],T=u[S],j=a[S];if(s(T))return;var k=c(h,T,j,S,A,u,a);k!==A&&(w+=k,g+=k)}}}}function s(n){return n&&n[Q]&&n[Q]===U}function p(n,t,e,r,o){var i,u=n[W][r];if((e>0||!e)&&(i=y(o)),e>0)t.splice(r,0,A),h(n,i,u,o);else{if(e<0)return t.splice(r,1),l(n,u,o),-1;v(n,i,u,o)}}function l(n,t,e){if(t){var u=i(e,X,A,A,A,t);r(u,V)||(u=0),o(function(){t&&n.removeChild(t)},u)}}function d(n,t,e){t&&(i(e,G),n.appendChild(t),i(e,Z))}function h(n,t,e,r){t&&(i(r,G),n.insertBefore(t,e),i(r,Z))}function v(n,t,e,r,o){t&&e&&(o?e.textContent=t:(i(r,Y),n.replaceChild(t,e),i(r,K)))}function m(n,t){var e=n[D]!==t[D],o=!r(n,nn)&&n!==t,i=n.type!==t.type;return o||i||e}function y(n,t,o){if(n!==A&&(n[D]===en||n[D]===V||n[D]===rn))return N.createTextNode(n);var i,o;if(n.props&&n.props.xmlns&&(o=n.props.xmlns),i=o?N.createElementNS(o,n.type):N.createElement(n.type),n.props&&n.props.ref){var u=n.props.ref;t&&r(u,en)?(t.refs=t.refs||{},t.refs[u]=i):r(u,tn)&&u(i)}return O(i,n.props),b(i,n.props),r(n[q],_)&&e(n[q],function(n){i.appendChild(y(n,t,o))}),i}function w(n,t){return"on"===n.substr(0,2)&&r(t,tn)}function g(n){return n.substr(2,n[I]).toLowerCase()}function b(n,t){for(var e in t){var r=t[e];w(e,r)&&r&&n.addEventListener(g(e),r,U)}}function x(n,t,r){var o=C(t.props,r.props);o[I]&&(i(t,Y),e(o,function(t){S(n,t.name,t.value,t.op)}),i(t,K))}function C(n,t){var e=[];t=t||{};var r={};for(var o in n)r[o]=n[o];for(var o in t)r[o]=t[o];for(var o in r){var i=t[o],u=n[o],a=u===A||u===L,c=i===A||i===L||u!==i&&!w(o,r[o]),f=a===-1?i:u;(c||a)&&e.push({name:o,value:f,op:c||a})}return e}function O(n,t){for(var e in t)S(n,e,t[e],1)}function S(n,t,o,i){if("ref"!==t&&"key"!==t&&!w(t,o))return i=i===-1?"removeAttribute":"setAttribute","xlink:href"===t?n[i+"NS"](M.xlink,"href",o):void(o!==M.svg&&o!==M.math&&(t===z&&(t="class"),r(o,nn)?"class"===t?e(o,function(t,e){var r=t?"add":"remove";f(r,n,e)}):e(o,function(e,o){r(n[t][o])||(n[t][o]=e)}):r(o,_)&&"class"===t?n[i](t,o.join(" ")):n[t]!==A&&n.namespaceURI==M.html?n[t]=o:n[i](t,o)))}c(n,t,u,A,a)}function c(){function n(n,t,e,u,a){return function(c,s){function p(n){if(h)b="finish";else{if(n.target!==c)return;i(y,"transition",L),i(y,"transform",L)}c.removeEventListener(b,p),i(y,"transformOrigin",L),y.willChange&&(y.willChange=L),f("remove",c,g),f("remove",w,g),s&&s(c)}if(e=e||"",r(c,en)&&(c=document.querySelector(c)),!c&&c.nodeType)throw"can't animate without an element";var l,d,h,v={},m={},c=c.currentTarget||c,y=c.style,w=N.body,g="animation-running",b="transitionend";if(r(c.animate,tn)&&(h=P),y.willChange!==A&&(y.willChange="transform"),l=o(c),n&&f("toggle",c,n),d=n?o(c):l,m.x=l.left-d.left,m.y=l.top-d.top,m.sx=0!==d.width?l.width/d.width:1,m.sy=0!==d.height?l.height/d.height:1,t=t||200,a=a||"cubic-bezier(0,0,0.32,1)",v[1]="translate("+m.x+"px,"+m.y+"px) translateZ(0) scale("+m.sx+","+m.sy+")",v[1]=v[1]+" "+e,v[2]="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",u&&i(y,"transformOrigin",u),f("add",c,g),f("add",w,g),h){var x=c.animate([{transform:v[1]},{transform:v[2]}],{duration:t,easing:a});x.addEventListener("finish",p)}else i(y,"transform",v[1]),c.offsetWidth,i(y,"transition","transform "+t+"ms "+a+", opacity "+t+"ms "+a),i(y,"transform",v[2]);return h||c.addEventListener(b,p),t}}function t(n){return function(t,r){f("add",t,n);var o=0,i=getComputedStyle(t);i=i.transitionDuration,i=i.replace(/s| /g,"").split(","),e(i,function(n){o+=1e3*parseFloat(n)}),r&&cn(function(){r(t)},o)}}function o(n){var t=n.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}function i(n,t,e){if(n&&n[t]===L)for(var r=["webkit","Webkit","Moz","ms"],o=0;o<r[I];o++)t=r[o]+t[0].toUpperCase()+t.slice(1),n[t]!==A&&(n[t]=e);else n[t]=e}return{flip:n,transition:t}}function f(n,t,e){function r(n,t){return n[F]?n[F].contains(t):n[z].indexOf(t)>-1}function o(n,t){if(n[F])n[F].add(t);else if(!r(n,t)){var e=n[z].split(" ");e.push(t),n[z]=e.join(" ")}}function i(n,t){if(n[F])n[F].remove(t);else{var e=n[z].split(" ");e.splice(e.indexOf(t),1),n[z]=e.join(" ")}}function u(n,t){n[F]?n[F].toggle(t):r(n,t)?i(n,t):o(n,t)}var a={add:o,remove:i,hasClass:r,toggle:u};return a[n](t,e)}function s(){function n(n){var t,e,r=n.responseText,o=n.getResponseHeader("content-type");return o.indexOf(";")!==-1?(e=o.split(";"),e=e[0].split("/")):e=o.split("/"),e=e[1],t="json"===e?JSON.parse(r):"html"===e?(new DOMParser).parseFromString(r,"text/html"):r}function t(t,r,o,i,u){return x(function(a,c){var f=new on,s=R.location,p=N.createElement("a");p.href=t;var l=!(p.hostname===s.hostname&&p.port===s.port&&p.protocol===s.protocol&&"file:"!==s.protocol);p=A,f.open(r,t),f.onload=function(){a(n(this))},f.onerror=function(){c(this.statusText)},l&&u&&(f.withCredentials=P),"POST"!==r&&"PUT"!==r||(f.setRequestHeader("Content-type",i),i.indexOf("x-www-form-urlencoded")>-1?o=e(o):i.indexOf("json")>-1&&(o=JSON.stringify(o))),f.send(o)})}function e(n,t){var r=[];for(var o in n){var i=t?t+"["+o+"]":o,u=n[o];r.push("object"==typeof u?e(u,i):an(i)+"="+an(u))}return r.join("&")}function r(n){return function(e,r,o,i){return o?"json"===o?o="application/json":"text"===o?o="text/plain":"file"===o&&(o="multipart/form-data"):o="application/x-www-form-urlencoded",t(e,n.toUpperCase(),r,o,i)}}return{get:r("GET"),post:r("POST"),put:r("PUT"),"delete":r("DELETE")}}function p(n,t,e){function o(n,t){if(r(n,en))return n;var e=n.type,o=n.props,a=n[q];return c[e]?"<"+e+i(o)+">":"<"+e+i(o)+">"+u(a,t)+"</"+e+">"}function i(n){return n=nn.keys(n).filter(function(t){return n[t]!==A&&n[t]!==L&&n[t]!==U}).map(function(t){var e=n[t];if(!r(e,tn)&&"key"!==t&&"ref"!==t)return e===P?t:t+'="'+e+'"'}).join(" ").replace(/\s+$/g,""),n?" "+n:""}function u(n,t){if(0===n[I])return"";t=t||0;var e="\t".repeat(t+1),r="\t".repeat(t);return"\n"+e+n.map(function(n){return o(n,t+1)}).join("\n"+e)+"\n"+r}var a,c={area:P,base:P,br:P,"!doctype":P,col:P,embed:P,wbr:P,track:P,hr:P,img:P,input:P,keygen:P,link:P,meta:P,param:P,source:P};return a=r(n,tn)?n(t,e,n.id===k?A:k):n,o(a)}function l(n){function t(n){return function(t,e){return t=t||{},nn.keys(n).reduce(function(r,o){return r[o]=n[o](t[o],e),r},{})}}function o(n){function t(){return a}function o(t,o){if(!r(t,nn))throw"action must be a plain object";if(t.type===A)throw"actions must have a type";a=n(a,t),e(c,function(n){return n(a)})}function i(n){if(!r(n,tn))throw"listener should be a function";return c.push(n),function(){n=c.filter(function(t){return t!==n})}}function u(n,e){e&&(n=h(n,e)),n(t()),i(function(){n(t())})}var a,c=[];return o({type:j}),{getState:t,dispatch:o,subscribe:i,connect:u}}return o(r(n,nn)?t(n):n)}function d(){function n(n,t,o){function i(){clearInterval(s),s=setInterval(function(){var n=R.location.pathname;f!==n&&(f=n,a())},50)}function u(){e(n,function(e,r){var o=[],i=/([:*])(\w+)|([\*])/g,u=r.replace(i,function(){var n=arguments,t=n[2];return t?(o.push(t),"([^/]+)"):"(?:.*)"}),u=u+"$";n[r]=[e,t?t+u:u,o]})}function a(){e(n,function(n){var t,e=n[0],o=n[1],i=n[2];if(t=f.match(new un(o))){var u=t.slice(1,t[I]).reduce(function(n,t,e){return n||(n={}),n[i[e]]=t,n},L);r(e,tn)&&e(u)}})}function c(n){t&&(n=t+n),history.pushState(A,A,n)}var f,s;return"/"===t.substr(-1)&&(t=t.substr(0,t[I]-1)),u(),i(),o&&c(o),{nav:c,back:history.back,foward:history.foward,go:history.go}}return n.apply(A,t(arguments))}function h(){function n(n,t){c=u(n,t),a(s,c,f),f=c}function o(t,e){!l&&p&&(p["render()"]||(p["render()"]=n)),c=u(t,e),s.innerHTML="",c&&(a(s,c,A,p),f=c,d=U)}function i(t,e,r){return r===k?u(t,e):(d||r?o(t,e):n(t,e),i)}i.remove=function(n){n?s.parentNode.removeChild(s):s.innerHTML=""};var u,c,f,s,p,l,d=P,h=t(arguments);if(e(h,function(n){r(n,tn)&&n.id===k?u=n:r(n,tn)||r(n,nn)?u=v(n):n&&n.nodeType?s=n===N?N.body:n:r(n,en)&&(s=N.querySelector(n))}),s||(s=N.body),u)return u.stateless&&(l=P),l||(p=u(A,A,P)),i;throw"can't find the component"}function v(n){function t(){return n}function o(n,t,e){if(e)return c;if(t&&(n=n||{},n[q]=t),p){if(c[Q]===U||i(c,Q,P,n)===U)return p[E][Q]=U,p;p[E][Q]=P}return n&&(i(c,$,P,n),w(c,n)),p=c.render()}var u,a;if(r(n,tn)){if(u=n(),!u)throw"no render";if(!u.render)return n.stateless=P,n;a=/function ([^(]*)/.exec(n.valueOf())[1]}else{if(!r(n,nn))throw"invalid component";if(!n.render)return t.stateless=P,t;u=n}var c=new y(a);e(u,function(n,t){r(n,tn)?"render"!==t&&(c[t]=n.bind(c)):c[t]=n}),c[B]&&(c.state=c[B]()),c[J]&&(c.props=c[J]());var f=m([[k,c],[Q,P]]),s=u.render.bind(c,c.props,c.state,c);c.render=function(){return new f(s())};var p;return o.id=k,o}function m(n){function t(n){if(!n)throw"not a hyperscript";var t=this;t.type=n.type,t.props=n.props,t[q]=n[q]}return t[H][E]={},n&&e(n,function(n,e){t[H][E][n[0]]=n[1]}),t[H][D]=nn,t}function y(n){this.props={},this.state={},n&&(this.displayName=n)}function w(n,t){n.props=n.props||{},r(t,tn)&&(t=t()),t&&e(t,function(t,e){n.props[e]=t})}function g(n,t){if(n.state=n.state||{},r(t,tn)&&(t=t()),t)return e(t,function(t,e){n.state[e]=t}),P}function b(n,t,o){function i(n,t,e){var o;r(t,en)?(o=t in n?n[t]:n.getAttribute(t),o!==A&&o!==L&&e(o)):(o=t(),o!==A&&o!==L&&(e in n?n[e]=o:n.setAttribute(e,o)))}return function(){var u=this;r(n,_)?e(n,function(n,e){i(u,n,t[e])}):i(u,n,t),o&&o()}}function x(n,t){function o(){return i(arguments)}function i(n){if(n[I])return a=n[0],u("then",a),o;var e;return e=t===P?a():r(t,tn)?t(a):a}function u(n,t){f[n][I]&&e(f[n],function(e){try{var r=e(c[n]||t);r&&(c[n]=r)}catch(i){o.reject(i)}})}var a,c={then:L,"catch":L},f={"catch":[],then:[]};return o.toJSON=function(){return a},o.resolve=function(n){return o(n)},o.reject=function(n){u("catch",n)},o.push=function(n,t,e){return f[n].push(function(n){return t(n)}),e?A:o},o.then=function(n,t){if(t&&o["catch"](t),n)return o.push("then",n,t)},o.done=function(n,t){o.then(n,t||P)},o["catch"]=function(n){return o.push("catch",n)},o.map=function(n){var t=o;return x(function(e){e(function(){return n(t())})},P)},o.end=function(){c.then=L,c["catch"]=L,f["catch"]=[],f.then=[]},o.id=T,r(n,tn)?n(o.resolve,o.reject):o(n),o}function C(n,e,o,i){var u=[];return u=r(e,_)?e:[e],r(n,en)&&(n=new tn(i,n)),function(r){return r&&r.preventDefault&&o&&r.preventDefault(),u[I]&&e||(u=t(arguments)),n.apply(this,u)}}function O(){function n(n){var t;return e(f,function(r){n.indexOf(r+":")>-1&&(t="",e(c,function(e,r,o){t+="-"+e+"-"+n}),t+=n)}),t||n}function o(t,i,u,a){return u=u||{},e(i,function(e,i){if(e=r(e,tn)?e():e,r(e,nn)){var c=" ";"&"===i.substr(0,1)&&(i=i.substr(1),c=""),"@"===t.substr(0,1)?(e=o(i,e,{}),e[i]="{"+e[i]+"}",o(t,e,u," ")):o(t+c+i,e,u)}else{var f=n(i+": "+e+(a||";"));u[t]?u[t]+=f:u[t]=f}}),u}function i(n){var t=[];return e(n,function(n,r,i){var u=o(r,n);e(u,function(n,e){var r={};r[e]=u[e],t.push(e+" {"+u[e]+"}")})}),t}function u(n,t){return t?r(t,en)&&(t=[t]):t=[""],e(n,function(n,r,o){var i=[];"@"===n.substr(0,1)?e(c,function(t){o[r]+=n.substr(0,1)+"-"+t+"-"+n.substr(1)}):(e(t,function(t){i.push(t+" "+n)}),o[r]=i.join())}),n}function a(n,e){return r(n,nn)?e=i(n):r(n,_)?e=n:r(n,en)&&(n=n.replace(/ /g,""),n=n.replace(/}/g,"}"+S),e=t(n.split(S),0,-1)),e}var c=["webkit","moz","ms"],f=["transform","appearance","animation"];return function(n,t){var e=u(a(n),t),r="<style>"+e.join("\n")+"</style>";return N.head.insertAdjacentHTML("beforeend",r),r}}var S="@@dio",T=S+"/STREAM",j=S+"/STORE",k=S+"/COMPONENT",E=S+"/HYPERSCRIPT",M={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml"},N=document,R=window,L=null,U=!1,P=!0,A=void 0,D="constructor",H="prototype",I="length",W="childNodes",q="children",F="classList",z="className",B="getInitialState",J="getDefaultProps",$="componentWillReceiveProps",Z="componentDidMount",G="componentWillMount",X="componentWillUnmount",Y="componentWillUpdate",K="componentDidUpdate",Q="shouldComponentUpdate",V=Number,_=Array,nn=Object,tn=Function,en=String,rn=Boolean,on=XMLHttpRequest,un=RegExp,an=encodeURIComponent,cn=R.setTimeout;y[H]={setState:function(n,t){t=t||this,g(t,n)&&t.forceUpdate()},setProps:function(n,t){t=t||this,w(t,n)},forceUpdate:function(n){n=n||this,n["render()"]&&n["render()"]()},withAttr:function(n,t,e,o){return o=o||this,r(e,tn)||(e=function(){o.forceUpdate.call(o)}),b(n,t,e.bind(o))}},x.combine=function(n,e){return r(e,_)||(e=t(arguments,1)),x(function(t){t(function(){return n.apply(L,e)})},P)},x.all=function(n){function t(t,e){r.push(t),r[I]===n[I]&&e(r)}var r=[];return x(function(r,o){e(n,function(n,e,i){n.id===T?n.done(function(n){t(n,r)},function(n){o(n)}):t(n,r)})})},x.scan=function(n,t,e){return x(function(r){e.then(function(){t=n(t,e),r(t)})})},n.h=u(),n.dio={animate:c(),request:s(),createComponent:v,createFunction:C,createStream:x,createRender:h,createRouter:d,createStore:l,createHTML:p,createStyle:O()}});