!function(n,t){"use strict";"function"==typeof define&&define.amd?define([],t):t("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:n)}(this,function(n){"use strict";function t(n,t,e){return bn[rn].slice.call(n,t,e)}function e(n,t){var e;if(r(n,bn)){var i=n[on];for(e=0;e<i;++e)if(t(n[e],e,n)===_)return}else for(e in n)if(t(n[e],e,n)===_)return}function r(n,t){return t?n!==tn&&n!==Q?n[en]===t:_:n?nn:_}function i(){function n(n,t){return r(n,On)||(n+=""),n}function t(n){var t,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=n.props?n.props:{},o=n.type;for(n.type="div";t=r.exec(o);){var u=t[1],a=t[2],c=t[3],f=t[4],s=t[6];if(""===u&&""!==a)n.type=a;else if("#"===u)i.id=a;else if("."===u)e.push(a);else if("["===c[0]){var p=s;p&&(p=p.replace(/\\(["'])/g,"$1").replace(/\\\\/g,"\\")),i[f]=p||nn}}return e[on]>0&&(i["class"]=e.join(" ")),n.props=i,n}var i=N();return function(o,u){var a,c=arguments,f=c[on],s=2;u&&u[B]||!r(u,On)?(s=1,u={}):r(u,On)||(u={});var p=new i({type:o,props:u,children:[]});(o.indexOf("[")>-1||o.indexOf("#")>-1||o.indexOf(".")>-1)&&(p=t(p)),"svg"!==p.type&&"math"!==p.type||p.props.xmlns||(p.props.xmlns=X[p.type]);for(var l=s;l<f;l++)a=c[l],r(a,bn)?e(a,function(t){p[un].push(n(t))}):p[un].push(n(a));return p}}function o(n,t,i,u,a){u=u||0;var c;if(t[un]){c=n[an][u];for(var f=t[un],s=f[on],p=0;p<s;p++)o(c,f[p],i,p,t);t.dom=c}if(r(t,jn)){var l=K.createDocumentFragment();e(a[un].slice(u),function(n){return r(n,On)?_:void l.appendChild(m(n))}),n.replaceChild(l,n[an][u])}return c=n[an][u],a&&(a[an]=a[an]||[],a[an].push(c)),r(t,jn)||(y(t,c,i),x(c,t.props)),t}function u(n,t,e,r){e?a(n,t,e,0,r,t,e,t[un][on],e[un][on],t[un],e[un]):a(n,t,e,0,r)}function a(n,t,e,i,o,u,y,w,g,x,O){if(i=i||0,e===tn){var C=m(t,o);l(n,C,t),y&&y[an].splice(i,0,C)}else if(t===tn){var j=e.dom;y&&j?(p(n,j,e),y[an].splice(i,1)):(p(n,y[an][i],e),Tn(function(){y[an].splice(i,1)}))}else if(f(t,e)){var S=y[an][i];if(w<g)return p(n,S,t),O.splice(i,1),y[an].splice(i,1),-1;var C=m(t,tn,tn,e);w>g?(d(n,S,C,t),O.splice(i,0,t),y[an].splice(i,0,C)):(v(n,S,C,t),y[an][i]=C)}else if(h(t,e)){var j=y[an][i];if(e.type||t.type){var C=m(t,tn,tn,e);v(n,j,C,t),y[an][i]=C,O[i]=t}else j.nodeValue=t}else if(r(t[un],bn)&&r(e[un],bn)){var C=e.dom||y[an][i],x=t[un],O=e[un],w=x[on],g=O[on];b(C,t,e);for(var k=0;k<w||k<g;k++){if(s(N))return;var N=x[k],T=O[k],E=a(C,N,T,k,tn,t,e,w,g,x,O);E!==tn&&(w+=E,g+=E)}}c(t,e)}function c(n,t){t&&n&&t.type&&n.type&&(n.dom=t.dom,n[an]=t[an])}function f(n,t){return n&&t&&n.props&&t.props&&n.props.key!==t.props.key}function s(n){return n&&n[gn]&&n[gn]===_}function p(n,t,e){S(e,hn),n.removeChild(t),S(e,mn)}function l(n,t,e){S(e,vn),n.appendChild(t),S(e,dn)}function d(n,t,e,r){S(r,vn),n.insertBefore(e,t),S(r,dn)}function v(n,t,e,r){S(r,yn),n.replaceChild(e,t),S(r,wn)}function h(n,t){var e=!n.type&&n!==t,r=n.type!==t.type;return e||r}function m(n,t,i,o){var u;if(!n.type)return u=n,r(u,jn)||(u+=""),K.createTextNode(u);var u,a=n[un];return n[an]=[],n.props&&n.props.xmlns&&(i=n.props.xmlns),i?(u=K.createElementNS(i,n.type),n.props.xmlns||(n.props.xmlns=i)):u=K.createElement(n.type),y(n,u,t),C(u,n.props),x(u,n.props),r(a,bn)&&e(a,function(e){var r=m(e,t,i,o);n[an].push(r),u.appendChild(r)}),n.dom=u,u}function y(n,t,e){if(n.props&&n.props.ref){var i=n.props.ref;e&&r(i,jn)?(e.refs=e.refs||{},e.refs[i]=t):r(i,Cn)&&i(t)}}function w(n,t){return"on"===n.substr(0,2)&&r(t,Cn)}function g(n){return n.substr(2,n[on]).toLowerCase()}function x(n,t){for(var e in t){var r=t[e];w(e,r)&&n.addEventListener(g(e),r,_)}}function b(n,t,r){var i=O(t.props,r.props);i[on]&&(S(t,yn),e(i,function(e){j(n,e.name,e.value,e.op,t.props.xmlns)}),S(t,wn))}function O(n,t){var e=[];t=t||{};var r={};for(var i in n)r[i]=n[i];for(var i in t)r[i]=t[i];for(var i in r){var o=t[i],u=n[i],a=u===tn||u===Q,c=o===tn||o===Q||u!==o;if(c||a){var f=a===-1?o:u;e.push({name:i,value:f,op:c||a})}}return e}function C(n,t){for(var e in t)j(n,e,t[e],1,t.xmlns)}function j(n,t,i,o,u){if("ref"!==t&&"key"!==t&&!w(t,i))return o=o===-1?"removeAttribute":"setAttribute","xlink:href"===t?n[o+"NS"](X.xlink,"href",i):void(i!==X.svg&&i!==X.math&&(u===X.svg?"className"===t&&(t="class"):"class"===t&&(t="className"),r(i,On)?t===fn||"class"===t?e(i,function(t,e){var r=t?"add":"remove";P(r,n,e)}):e(i,function(e,i){r(n[t][i])||(n[t][i]=e)}):!r(i,bn)||t!==fn&&"class"!==t?n[t]!==tn&&u!==X.svg?n[t]=i:n[o](t,i):n[o](t,i.join(" "))))}function S(n,t,e,r,i,o){if(n&&(!n||!n[B]||n[B][Z]||n.render)){var u;return e?u=n:n[B]&&n[B][Z]&&(u=n[B][Z]),u&&u[t]?(r=r||u.props,i=i||u.state,u[t](r,i,u,o)):void 0}}function k(n,t){function e(e,r){a=n(e,r),u(t,a,c),c=a}function r(r,i){!s&&f&&(f["render()"]||(f["render()"]=e)),a=n(r,i),a&&!t.hasAttribute(V)?(t.textContent="",u(t,a,tn,f)):(t.removeAttribute(V),o(t,a,f)),c=a,p=_}function i(t,o,u){return u===Z?n(t,o):(p||u?r(t,o):e(t,o),i)}i.id=G;var n,a,c,t,f,s,p=nn;if(n=T(n),t=t&&t.nodeType?t:K.querySelector(t),t&&t!==K||(t=K.body),n)return n.stateless&&(s=nn),s||(f=n(tn,tn,nn)),i;throw"can't find the component"}function N(n){function t(n){if(!n)throw"not a hyperscript";var t=this;t.type=n.type,t.props=n.props,t[un]=n[un]}return t[rn][B]={},n&&e(n,function(n,e){t[rn][B][n[0]]=n[1]}),t[rn][en]=On,t}function T(n){function t(n,t,e){if(e)return a;if(t&&(n=n||{},n[un]=t),s){if(a[gn]===_||S(a,gn,nn,n)===_)return s[B][gn]=_,s;s[B][gn]=nn}return n&&(S(a,ln,nn,n),R(a,n)),s=a.render()}var i,o;if(r(n,Cn)){if(n.id===Z)return n;if(i=n(),!i)throw"no render";if(!i.render)return n.stateless=nn,n;o=/function ([^(]*)/.exec(n.valueOf())[1]}else{if(!r(n,On))throw"invalid component";if(!n.render){var u=function(){return n};return u.stateless=nn,u}i=n}var a=new E(o);e(i,function(n,t){r(n,Cn)?"render"!==t&&(a[t]=n.bind(a)):a[t]=n}),a[sn]&&(a.state=a[sn]()),a[pn]&&(a.props=a[pn]());var c=N([[Z,a],[gn,nn]]),f=i.render.bind(a,a.props,a.state,a);a.render=function(){return new c(f())};var s;return t.id=Z,t}function E(n){this.props={},this.state={},n&&(this.displayName=n)}function R(n,t){n.props=n.props||{},r(t,Cn)&&(t=t()),t&&e(t,function(t,e){n.props[e]=t})}function L(n,t){if(n.state=n.state||{},r(t,Cn)&&(t=t()),t)return e(t,function(t,e){n.state[e]=t}),nn}function M(n,t,i){function o(n,t,e){var i;r(t,jn)?(i=t in n?n[t]:n.getAttribute(t),i!==tn&&i!==Q&&e(i)):(i=t(),i!==tn&&i!==Q&&(e in n?n[e]=i:n.setAttribute(e,i)))}return function(){var u=this;r(n,bn)?e(n,function(n,e){o(u,n,t[e])}):o(u,n,t),i&&i()}}function P(n,t,e){function r(n,t){return n[cn]?n[cn].contains(t):n[fn].indexOf(t)>-1}function i(n,t){if(n[cn])n[cn].add(t);else if(!r(n,t)){var e=n[fn].split(" ");e.push(t),n[fn]=e.join(" ")}}function o(n,t){if(n[cn])n[cn].remove(t);else{var e=n[fn].split(" ");e.splice(e.indexOf(t),1),n[fn]=e.join(" ")}}function u(n,t){n[cn]?n[cn].toggle(t):r(n,t)?o(n,t):i(n,t)}var a={add:i,remove:o,hasClass:r,toggle:u};return a[n](t,e)}function U(){function n(n,t,r,i){e(t,function(t){n[i+"EventListener"](t,r)})}function t(n){var t=n.getBoundingClientRect();return{top:t.top,left:t.left,width:t.width,height:t.height}}function i(n,t,e){if(!n||n[t]!==Q&&n[t]!==tn)n[t]=e;else for(var r=["webkit","Webkit","Moz","ms"],i=0;i<r[on];i++)t=r[i]+t[0].toUpperCase()+t.slice(1),n[t]!==tn&&(n[t]=e)}function o(e,o,u,a,c){return function(f,s){function p(n){if(v)x="finish";else{if(n.target!==f)return;i(y,"transition",tn),i(y,"transform",tn)}f.removeEventListener(x,p),i(y,"transformOrigin",tn),P("remove",f,g),P("remove",w,g),s&&s(f)}if(u=u||"",r(f,jn)&&(f=K.querySelector(f)),!f&&f.nodeType)throw"can't animate without an element";var l,d,v,h=[],m={},f=f.currentTarget||f,y=f.style,w=K.body,g="animation-running",x="transitionend";if(r(f.animate,Cn)&&(v=nn),l=t(f),e&&P("toggle",f,e),d=e?t(f):l,m.x=l.left-d.left,m.y=l.top-d.top,m.sx=0!==d.width?l.width/d.width:1,m.sy=0!==d.height?l.height/d.height:1,o=o||200,c=c||"cubic-bezier(0,0,0.32,1)",h[0]="translate("+m.x+"px,"+m.y+"px) translateZ(0) scale("+m.sx+","+m.sy+")",h[0]=h[0]+" "+u,h[1]="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",a&&i(y,"transformOrigin",a),P("add",f,g),P("add",w,g),v){var b=f.animate([{transform:h[0]},{transform:h[1]}],{duration:o,easing:c});b.addEventListener("finish",p)}else n(f,[x],p,"add"),i(y,"transform",h[0]),f.offsetWidth,i(y,"transition","transform "+o+"ms "+c+", opacity "+o+"ms "+c),i(y,"transform",h[1]);return o}}function u(n){return function t(r,i){return i=i||"add",(i<0||i!==tn&&!i)&&(i="remove"),function(o,u){Tn(function(){if(P(i,o,r),u){var a=0,c=getComputedStyle(o);c=c[n+"Duration"],c=c.replace(/s| /g,"").split(","),e(c,function(n){a+=1e3*parseFloat(n)}),u&&Tn(function(){u(o,t)},a)}})}}}return{flip:o,transitions:u("transition"),animations:u("animation")}}function A(){function n(n){var t,e,r=n.responseText,i=n.getResponseHeader("content-type");return i.indexOf(";")!==-1?(e=i.split(";"),e=e[0].split("/")):e=i.split("/"),e=e[1],t="json"===e?JSON.parse(r):"html"===e?(new DOMParser).parseFromString(r,"text/html"):r}function t(t,r,i,o,u){return H(function(a,c){var f=new Sn,s=Y.location,p=K.createElement("a");p.href=t;var l=!(p.hostname===s.hostname&&p.port===s.port&&p.protocol===s.protocol&&"file:"!==s.protocol);p=tn,f.open(r,t),f.onload=function(){a(n(this))},f.onerror=function(){c(this.statusText)},l&&u&&(f.withCredentials=nn),"POST"!==r&&"PUT"!==r||(f.setRequestHeader("Content-type",o),o.indexOf("x-www-form-urlencoded")>-1?i=e(i):o.indexOf("json")>-1&&(i=JSON.stringify(i))),f.send(i)})}function e(n,t){var r=[];for(var i in n){var o=t?t+"["+i+"]":i,u=n[i];r.push("object"==typeof u?e(u,o):Nn(o)+"="+Nn(u))}return r.join("&")}function r(n){return function(r,i,o,u){return o?"json"===o?o="application/json":"text"===o?o="text/plain":"file"===o&&(o="multipart/form-data"):o="application/x-www-form-urlencoded",i&&"GET"===n&&(r+="?"+e(i)),t(r,n,i,o,u)}}function i(n){return i[n.method.toLowerCase()](n.url,n.payload,n.enctype,n.withCredentials)}return i.get=r("GET"),i.post=r("POST"),i.put=r("PUT"),i["delete"]=r("DELETE"),i}function D(n){function t(n){return function(t,e){return t=t||{},On.keys(n).reduce(function(r,i){return r[i]=n[i](t[i],e),r},{})}}function i(n){function t(){return a}function i(t,i){if(!r(t,On))throw"action must be a plain object";if(t.type===tn)throw"actions must have a type";a=n(a,t),e(c,function(n){return n(a)})}function o(n){if(!r(n,Cn))throw"listener should be a function";return c.push(n),function(){n=c.filter(function(t){return t!==n})}}function u(n,e){e&&(n=k(n,e)),n(t()),o(function(){n(t())})}var a,c=[];return i({type:J}),{getState:t,dispatch:i,subscribe:o,connect:u}}return i(r(n,On)?t(n):n)}function W(n,t,i,o){function u(n,t,i){function o(){clearInterval(s),s=setInterval(function(){var n=Y.location.pathname;f!==n&&(f=n,a())},50)}function u(){e(n,function(e,r){var i=[],o=/([:*])(\w+)|([\*])/g,u=r.replace(o,function(){var n=arguments,t=n[2];return t?(i.push(t),"([^/]+)"):"(?:.*)"}),u=u+"$";u=t?t+u:u,u=new kn(u),n[r]=[e,u,i]})}function a(){e(n,function(n){var t,e=n[0],i=n[1],o=n[2];if(t=f.match(i)){var u=t.slice(1,t[on]).reduce(function(n,t,e){return n||(n={}),n[o[e]]=t,n},tn);r(e,Cn)&&e(u)}})}function c(n){t&&(n=t+n),history.pushState(tn,tn,n)}var f,s;return"/"===t.substr(-1)&&(t=t.substr(0,t[on]-1)),u(),o(),i&&c(i),{nav:c,back:history.back,foward:history.foward,go:history.go}}return r(n,Cn)&&(n=n()),o&&e(n,function(t,e){var r;r=t.id!==G?k(t,o):t,n[e]=function(n){r(n,Q,nn)}}),u(n,t,i)}function H(n,t){function i(){return o(arguments)}function o(n){if(n[on])return a=n[0],u("then",a),i;var e;return e=t===nn?a():r(t,Cn)?t(a):a}function u(n,t){f[n][on]&&e(f[n],function(e){try{var r=e(c[n]||t);r&&(c[n]=r)}catch(o){i.reject(o)}})}var a,c={then:tn,"catch":tn},f={"catch":[],then:[]};return i.toJSON=function(){return a},i.valueOf=function(){return a},i.resolve=function(n){return i(n)},i.reject=function(n){u("catch",n)},i.push=function(n,t,e){return f[n].push(function(n){return t(n)}),e?tn:i},i.then=function(n,t){if(t&&i["catch"](t),n)return i.push("then",n,t)},i.done=function(n,t){i.then(n,t||nn)},i["catch"]=function(n){return i.push("catch",n)},i.map=function(n){var t=i;return H(function(e){e(function(){return n(t())})},nn)},i.end=function(){c.then=tn,c["catch"]=tn,f["catch"]=[],f.then=[]},i.id=$,r(n,Cn)?n(i.resolve,i.reject,i):i(n),i}function q(n,t,e){function i(n,t){if(r(n,jn))return n;var e=n.type,i=n.props,a=n[un];return c[e]?"<"+e+o(i)+">":"<"+e+o(i)+">"+u(a,t)+"</"+e+">"}function o(n){return n=On.keys(n).filter(function(t){return n[t]!==tn&&n[t]!==Q&&n[t]!==_}).map(function(t){var e=n[t];if(!r(e,Cn)&&"key"!==t&&"ref"!==t)return e===nn?t:t+'="'+e+'"'}).join(" ").replace(/  +/g," ").trim(),n?" "+n:""}function u(n){return 0===n[on]?"":n.map(function(n){return i(n)}).join("")}var a,c={area:nn,base:nn,br:nn,"!doctype":nn,col:nn,embed:nn,wbr:nn,track:nn,hr:nn,img:nn,input:nn,keygen:nn,link:nn,meta:nn,param:nn,source:nn};return a=r(n,Cn)?n(t,e,n.id===Z?tn:Z):n,i(a)}function I(){function n(n,t){var r;return e(c,function(i){n.indexOf(i)>-1&&(r="",e(a,function(e,i,o){r+="-"+e+"-"+n+": "+t+";\n\t"}),r+=n)}),r?r+": "+t:n+": "+t}function t(u,a,c){var p="";return e(u,function(u,p,l){if(l.hasOwnProperty(p)){if(!r(u,bn)&&a.indexOf(s)>-1&&(p.indexOf("%")>-1||!isNaN(p))){isNaN(p)||(p+="%");var d="";e(u,function(n,t){r(n,Cn)&&(n=n()),d+=t+":"+n+";"}),u="{"+d+"}"}if(r(u,On))t(u,a+" "+p,c);else{r(u,Cn)&&(u=u()),r(u,bn)&&(u="{"+u.join(":")+";}");var v=" { ";p!==p.toLowerCase()&&(p=i(p)),r(u,xn)&&(u+="px"),"animation"!==p&&"animation-name"!==p||(u=o(f)+u);var h=a+v+n(p,u);a.indexOf(s)>-1&&(h=h.replace(/%:/g,"%")),"}"!==h.substr(-1)&&(h+=";");var m=h.split(v),y=m[0].replace(/ &|^ /g,""),w=m[1],g=c[y];w="\t"+w,g=g?g+w:w,c[y]=g+"\n"}}}),p}function i(n){return n.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function o(n){var t=n.substr(0,1);return"#"!==t&&"."!==t||(n="\\"+n),n}function u(n){var r={},i="",u=a.concat([""]);t(n,"",r),e(r,function(n,t){if(n=t+" {\n"+n+"}\n",n.indexOf(s)>-1){var r=s[on],a=[];n=s+n.split(s)[1];var c=n.indexOf(s)+r;e(u,function(t){t=t?"-"+t+"-":t;var e=n.substr(0,1)+t+n.substr(1,c);e+=o(f)+n.substr(c+1),a.push(e)}),n=a.join("")}else if(n.indexOf(p)>-1)n=n.split(p)[1].replace(" ","");else if(t.indexOf(",")>-1){var l=t.split(",");e(l,function(n,t){var e=t>0?"":" ";l[t]=f+e+n}),l=l.join(", "),n=n.replace(new kn(t),l)}else n=":"===n.substr(0,1)?f+n:f+" "+n;i+=n});var c=f?" data-id="+f:"";return"<style"+c+">\n"+i+"</style>"}var a=["webkit","moz","ms"],c=["animation","transform","appearance","transition","box-shadow","linear-gradient"],f="",s="@keyframes",p="@at-root";return function(n,t,e){f=t||"",r(n,Cn)&&(n=n());var i=u(n);return K&&K.head&&!e&&K.head.insertAdjacentHTML("beforeend",i),i}}function z(n,t,e){return function(r){return r&&r.preventDefault&&e&&r.preventDefault(),t&&t[on]?n.apply(this,t):n.call(this,r)}}var F="@@dio",$=F+"/STREAM",J=F+"/STORE",Z=F+"/COMPONENT",B=F+"/HYPERSCRIPT",G=F+"/RENDER",V="data-hydrate",X={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg",html:"http://www.w3.org/1999/xhtml"},Y=window||n,K=Y.document,Q=null,_=!1,nn=!0,tn=void 0,en="constructor",rn="prototype",on="length",un="children",an="childNodes",cn="classList",fn="className",sn="getInitialState",pn="getDefaultProps",ln="componentWillReceiveProps",dn="componentDidMount",vn="componentWillMount",hn="componentWillUnmount",mn="componentDidUnmount",yn="componentWillUpdate",wn="componentDidUpdate",gn="shouldComponentUpdate",xn=Number,bn=Array,On=Object,Cn=Function,jn=String,Sn=XMLHttpRequest,kn=RegExp,Nn=encodeURIComponent,Tn=setTimeout;E[rn]={setState:function(n,t){t=t||this,L(t,n)&&t.forceUpdate()},setProps:function(n,t){t=t||this,R(t,n)},forceUpdate:function(n){n=n||this,n["render()"]&&n["render()"]()},withAttr:function(n,t,e,i){return i=i||this,r(e,Cn)||(e=function(){i.forceUpdate.call(i)}),M(n,t,e.bind(i))}},H.combine=function(n,e){e=r(e,bn)?t(e):t(arguments,1),e.push(tn);var i=e[on]-1;return H(function(t){t(function(){return e[i]=n.apply(tn,e)})},nn)},H.all=function(n){function t(t,e){r.push(t),r[on]===n[on]&&e(r)}var r=[];return H(function(r,i){e(n,function(n,e,o){n.id===$?n.done(function(n){t(n,r)},function(n){i(n)}):t(n,r)})})},H.scan=function(n,t,e){return H(function(r){e.then(function(){t=n(t,e),r(t)})})},n.h=i(),n.dio={request:A(),curry:z,animateWith:U(),createStyle:I(),createStream:H,createRender:k,createStore:D,createRouter:W,createHTML:q,createComponent:T}});