!function(t,n){"use strict";"function"==typeof define&&define.amd?define([],n):n("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:t)}(this,function(t){"use strict";function n(t){return X[P].slice.call(t)}function e(t,n){var e;if(r(t,X)||t[L]&&r(t[L],G)&&t[0]){var i=t[L];for(e=0;e<i;++e)if(n.call(t[e],t[e],e,t)===E)return}else for(e in t)if(n.call(t[e],t[e],e,t)===E)return}function r(t,n){return n?t!==R&&t!==S?t[M]===n:E:t?N:E}function i(t,n){n=n||0,nt(t,n)}function o(){function t(t,o){var a,s=arguments,u=s[L],c=2;n(o)||!r(o,K)?(c=1,o={}):o!==S&&o!==R&&r(o,K)||(o={});var f={type:t,props:o,children:[]};t.indexOf("[")===-1&&t.indexOf("#")===-1&&t.indexOf(".")===-1||(f=i(f)),"svg"!==f.type&&"math"!==f.type||f.props.xmlns||(f.props.xmlns=O[f.type]);for(var p=c;p<u;p++)if(a=s[p],r(a,X))for(var l=0;l<a[L];l++)f.children[p-c+l]=e(a[l],f);else f.children[p-c]=e(a,f);return f}function n(t){var n=t&&t.type&&t.children&&t.props;if(!n)return E;var e=0;for(var r in t){if(e>3)break;t.hasOwnProperty(r)&&e++}return 3===e}function e(t,e){return t&&t.props&&e.props.xmlns&&(t.props.xmlns=e.props.xmlns),r(t,K)&&n(t)||(r(t,K)?t=JSON.stringify(t):t+="","null"!==t&&"undefined"!==t||(t="")),t}function i(t){var n,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type;for(t.type="div";n=r.exec(o);)if(""===n[1]&&n[2])t.type=n[2];else if("#"===n[1])i.id=n[2];else if("."===n[1])e.push(n[2]);else if("["===n[3][0]){var a=n[6];a&&(a=a.replace(/\\(["'])/g,"$1")),i[n[4]]=a||N}return e[L]>0&&(i["class"]=e.join(" ")),t.props=i,t}return t}function a(t,n,e,i,o){if(t&&(t.internal||t.render)){var a=o?t:t.internal;return a&&a[n]?(e=e?r(e,V)?a.props:e:R,i=i?r(i,V)?a.state:i:R,a[n](e,i)):void 0}}function s(t,o,s,u){function c(t,n,e,r,i,o,s){if(r=r||0,a(n,Z,N,N)!==E)if(e===R){var u=g(n,i);d(t,u,n)}else if(n===R){var u=t[U][r];l(t,u,e)}else{if(n.props&&e.props&&(n.props.key||e.props.key)&&n.props.key!==e.props.key){var f,u,h=o[L],y=s[L];return h>y?f=1:h<y&&(f=-1),p(t,o,s,f,r,n)}if(m(n,e)){var w=t[U][r],u=g(n);v(t,u,w,n)}else if(n.type){var b=t[U],h=n[q][L],y=e[q][L];x(b[r],n,e);for(var k=0;k<h||k<y;k++){var o=n[q],s=e[q],j=c(b[r],o[k],s[k],k,R,o,s);j!==R&&(h+=j,y+=j)}}}}function p(t,n,e,r,i,o){var a,s=t[U][i];if((r>0||!r)&&(a=g(o)),r>0)e.splice(i,0,R),h(t,a,s,o);else{if(r<0)return e.splice(i,1),l(t,s,o),-1;v(t,a,s,o)}}function l(t,n,e){if(n){var o=a(e,B,n);r(o,G)||(o=0),i(function(){n&&t.removeChild(n)},o)}}function d(t,n,e){n&&(a(e,J),t.appendChild(n),a(e,F,n))}function h(t,n,e,r){n&&(a(r,J),t.insertBefore(n,e),a(r,F,n))}function v(t,n,e,r){n&&e&&(a(r,$),t.replaceChild(n,e),a(r,z))}function m(t,n){var e=t[M]!==n[M],i=r(t,Y)&&t!==n,o=t.type!==n.type;return i||o||e}function g(t,i){if(r(t,Y))return C.createTextNode(t);if(t.trust){var o=C.createElement("div"),a=C.createDocumentFragment();o.innerHTML=t.children[0];var s=n(o.childNodes);return e(s,function(t){a.appendChild(t)}),a}var u;if(u=t.props&&t.props.xmlns?C.createElementNS(t.props.xmlns,t.type):C.createElement(t.type),j(u,t.props),b(u,t.props),r(t.children,X)&&e(t.children,function(t){u.appendChild(g(t,i))}),t.props&&t.props.ref){var c=t.props.ref;i&&r(c,Y)?(i.refs=i.refs||{},i.refs[c]=u):r(c,Q)&&c(u)}return u}function y(t,n){return"on"===t.substr(0,2)&&r(n,Q)}function w(t){return t.substr(2,t[L]).toLowerCase()}function b(t,n){for(var e in n){var r=n[e];y(e,r)&&r&&t.addEventListener(w(e),r,E)}}function x(t,n,r){var i=k(t,n.props,r.props);i[L]&&(a(n,$,N,N),e(i,function(t){T(t.target,t.name,t.value,t.op)}),a(n,z,N,N))}function k(t,n,e){var r=[];e=e!==R?e:{};var i={};for(var o in n)i[o]=n[o];for(var o in e)i[o]=e[o];for(var o in i){var a=e[o],s=n[o],u=s===R||s===S,c=a===R||a===S||s!==a&&!y(o,i[o]),f=u===-1?a:s;(c||u)&&r.push({target:t,name:o,value:f,op:c||u})}return r}function j(t,n){for(var e in n)T(t,e,n[e],1)}function T(t,n,i,o){if(!y(n,i)&&"ref"!==n&&"key"!==n){var a=(o===-1?"remove":"set")+"Attribute";return"xlink:href"===n?t.setAttributeNS(O.xlink,"href",i):void(t[n]!==R&&t.namespaceURI!==O.svg?r(i,K)?"className"===n||"class"===n?e(i,function(n,e){var r=n?"add":"remove";f[r](t,e)}):e(i,function(e,i){r(t[n][i])||(t[n][i]=e)}):r(i,X)?"className"!==n&&"class"!==n||(t[n]=i.join(" ")):t[n]=i:i!==O.svg&&i!==O.math&&(o===-1?t[a](n):t[a](n,i)))}}c(t,o,s,R,u)}function u(t){function n(t,n){if(r(t,Y))return t;var a=t.type,s=t.props,u=t.children;return o[a]?"<"+a+e(s)+">":"<"+a+e(s)+">"+i(u,n)+"</"+a+">"}function e(t){return t=K.keys(t).filter(function(n){return t[n]!==R&&t[n]!==S&&t[n]!==E}).map(function(n){var e=t[n];if(!r(e,Q)&&"key"!==n&&"ref"!==n)return e===N?n:n+'="'+e+'"'}).join(" ").replace(/\s+$/g,""),t?t:""}function i(t,e){if(0===t[L])return"";e=e||0;var r="\t".repeat(e+1),i="\t".repeat(e);return"\n"+r+t.map(function(t){return n(t,e+1)}).join("\n"+r)+"\n"+i}var o={area:N,base:N,br:N,"!doctype":N,col:N,embed:N,wbr:N,track:N,hr:N,img:N,input:N,keygen:N,link:N,meta:N,param:N,source:N};return n(t)}function c(){function t(t,n,e,a,s){return function(u,c){function p(t){if(!h){if(t.target!==u)return;o(g,"transition",S),o(g,"transform",S)}o(g,"transformOrigin",S),g.willChange&&(g.willChange=S),f.remove(u,w),f.remove(y,w),u.removeEventListener(b,p),c&&c(u)}if(e=e||"",r(u,Y)&&(u=document.querySelector(u)),!u&&u.nodeType)throw"can't animate without an element";var l,d,h,v={},m={},u=u.currentTarget||u,g=u.style,y=document.body,w="animation-running",b="transitionend";if(r(u.animate,Q)&&(h=N),g.willChange&&(g.willChange="transform"),l=i(u),t&&f.toggle(u,t),d=t?i(u):l,m.x=l.left-d.left,m.y=l.top-d.top,m.sx=0!==d.width?l.width/d.width:1,m.sy=0!==d.height?l.height/d.height:1,n=n||200,s=s||"cubic-bezier(0,0,0.32,1)",v[1]="translate("+m.x+"px,"+m.y+"px) translateZ(0) scale("+m.sx+","+m.sy+")",v[1]=v[1]+" "+e,v[2]="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",a&&o(g,"transformOrigin",a),f.add(u,w),f.add(y,w),h){var x=u.animate([{transform:v[1]},{transform:v[2]}],{duration:n,easing:s});x.addEventListener("finish",p)}else o(g,"transform",v[1]),u.offsetWidth,o(g,"transition","transform "+n+"ms "+s+", opacity "+n+"ms "+s),o(g,"transform",v[2]);return h||u.addEventListener(b,p),n}}function n(t){return function(n,r){f.add(n,t);var i=0,o=getComputedStyle(n)["transition-duration"].replace(/s| /g,"").split(",");e(o,function(t){i+=1e3*parseFloat(t)}),nt(function(){r(n)},i)}}function i(t){var n=t.getBoundingClientRect();return{top:n.top,left:n.left,width:n.width,height:n.height}}function o(t,n,e){if(t&&t[n]===S)for(var r=["webkit","Webkit","Moz","ms"],i=0;i<r[L];i++)n=r[i]+n[0].toUpperCase()+n.slice(1),t[n]!==R&&(t[n]=e);else t[n]=e}return f=f(),{flip:t,transition:n}}function f(){function t(t,n){return t[A]?t[A].contains(n):t[D].indexOf(n)>-1}function n(n,e){if(n[A])n[A].add(e);else if(!t(n,e)){var r=n[D].split(" ");r.push(e),n[D]=r.join(" ")}}function e(t,n){if(t[A])t[A].remove(n);else{var e=t[D].split(" ");e.splice(e.indexOf(n),1),t[D]=e.join(" ")}}function r(r,i){r[A]?r[A].toggle(i):t(r,i)?e(r,i):n(r,i)}return{add:n,remove:e,hasClass:t,toggle:r}}function p(t){function n(){this.type="p",this.props={},this.children=[t]}return n[P].trust=N,n[P][M]=K,new n}function l(){function t(t){e(t,function(t){T[t]=function(){var e=n(arguments),i=e[0];return!r(i,Y)||"#"!==i.substr(0,1)&&"."!==i.substr(0,1)&&"["!==i.substr(0,1)||(t+=i,e.shift(i)),e.unshift(t),h.apply(null,e)}})}var i=arguments;t(i[L]?n(i):["doctype","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"])}function d(t){function n(){var t=this;t.settings={},t.url=S,t.interval=S,t.back=function(){history.back()},t.foward=function(){history.foward()},t.go=function(t){history.go(t)},t.nav=function(t){var n=this.settings.root;t=n?n+t:t,history.pushState(S,S,t)},t.config=function(t){var n=this;e(t,function(t,e){n.settings[e]=t})},t.init=function(){var t=this;clearInterval(t.interval),t.interval=setInterval(function(){var n=T.location.pathname;t.url!==n&&(t.url=n,t.changed())},50)},t.on=function(t){var n,i=this;if(i.routes||(i.routes={}),r(t,K))n=t;else{var t=arguments;n={},n[t[0]]=t[1]}e(n,function(t,n){var e=i.settings.root,r=[],o=/([:*])(\w+)|([\*])/g,a=n.replace(o,function(){var t=arguments,n=t[2];return n?(r.push(n),"([^/]+)"):"(?:.*)"}),a=a+"$";i.routes[n]={callback:t,pattern:e?e+a:a,variables:r}})},t.changed=function(){var n=this.url,i=this.routes;e(i,function(e){var i,o=e.callback,a=e.pattern,s=e.variables;if(i=n.match(new RegExp(a))){var u=i.slice(1,i[L]).reduce(function(t,n,e){return t||(t={}),t[s[e]]=n,t},S);if(!r(o,Q))throw"could not find render method";o(u,t.url)}})}}var i=t.mount,o=t.root,a=t.init,s=t.routes,u=new n;return i&&u.config({mount:i}),o&&u.config({root:o}),s&&u.on(s),u.init(),a&&u.nav(a),u}function v(){function t(t,r,i,o,a){return new e(function(e,s){var u=new _,c=T.location,f=C.createElement("a");f.href=t;var p=!(f.hostname===c.hostname&&f.port===c.port&&f.protocol===c.protocol&&"file:"!==c.protocol);f=S,u.open(r,t),u.onload=function(){var t,n=u.responseText,r=u.statusText;if(u.status>=200&&u.status<400){var i,o=u.getResponseHeader("content-type");o.indexOf(";")!==-1?(i=o.split(";"),i=i[0].split("/")):i=o.split("/"),i=i[1],t="json"===i?JSON.parse(n):"html"===i?(new DOMParser).parseFromString(n,"text/html"):n,a?a(t):e(t)}else a?a(r):s(r)},u.onerror=function(){s(u.statusText)},p&&(u.withCredentials=N),"POST"!==r&&"PUT"!==r||(u.setRequestHeader("Content-type",o),o.indexOf("x-www-form-urlencoded")>-1?i=n(i):o.indexOf("json")>-1&&(i=JSON.stringify(i))),u.send(i)})}function n(t,e){var r=[];for(var i in t){var o=e?e+"["+i+"]":i,a=t[i];r.push("object"==typeof a?n(a,o):tt(o)+"="+tt(a))}return r.join("&")}function e(t){function n(t){u="rejected",s=t,c&&a(c)}function o(t){try{if(t&&r(t.then,Q))return void t.then(o,n);s=t,u="resolved",c&&a(c)}catch(e){n(e)}}function a(t){return"pending"===u?void(c=t):void nt(function(){var n;if(n="resolved"===u?t.onResolved:t.onRejected,!n)return void("resolved"===u?t.resolve(s):t.reject(s));var e;try{e=n(s),t.resolve(e)}catch(r){t.reject(r)}},0)}var s,u="pending",c=R;this.then=function(t,n){return new e(function(e,r){a({onResolved:t,onRejected:n,resolve:e,reject:r})})},this["catch"]=function(t){return this.then(R,t)},this.done=function(t,n){var e=arguments,r=e[L]?this.then.apply(this,e):this;r.then(R,function(t){i(function(){throw t})})},t(o,n)}function o(n){return function(e,i,o,a){if(r(o,Q)){var s=a;a=o,o=s}return o?"json"===o?o="application/json":"text"===o?o="text/plain":"file"===o&&(o="multipart/form-data"):o="application/x-www-form-urlencoded",t(e,n.toUpperCase(),i,o,a)}}return{get:o("GET"),post:o("POST"),put:o("PUT"),"delete":o("DELETE")}}function m(){function t(t,n){c=a(t,n),c&&i(function(){s(p,c,f),f=c})}function o(n,e){!d&&l&&(l[I]&&(b(l,l[I]()),delete l[I]),l[H]&&(w(l,l[H]()),delete l[H]),l["render()"]||(l["render()"]=t)),c=a(n,e),p.innerHTML="",c&&(s(p,c,R,l),f=c,h=E)}var a,c,f,p,l,d,h=N,v=n(arguments);if(e(v,function(t){r(t,Q)||r(t,K)?a=y(t):t.nodeType?p=t:r(t,Y)&&(p=C.querySelector(t))}),p&&a)return a.stateless&&(d=N),d||(l=a(R,R,N)),function(n,e,r){return"vnode"===r?a(n,e):"html"===r?u(a(n,e)):(h||r?o(n,e):t(n,e),c)};if(!p)throw"can't find the element";if(!a)throw"can't find the component"}function g(){this.props={},this.state={}}function y(t){function n(t){var n=this;n.type=t.type,n.props=t.props,n.children=t.children}var i;if(r(t,K)&&!t.render)throw"can't find render, invalid component";if(r(t,Q)&&(i=t()),!i||!i.render)return t.stateless=N,t;var o=new g;e(i,function(t,n){r(t,Q)?"render"===n?o[n]=t.bind(o,o.props,o.state):o[n]=t.bind(o):o[n]=t}),n[P].internal=o,n[P][M]=K;var s=o.render;return function(t,e,r){return o.render=function(){return new n(s())},e&&(t=t||{},t.children=e),t&&(a(o,W,N,R,N),w(o,t)),r?o:o.render()}}function w(t,n){t.props=t.props||{},n&&e(n,function(n,e){t.props[e]=n})}function b(t,n){if(t.state=t.state||{},r(n,Q)&&(n=n()),n)return e(n,function(n,e){t.state[e]=n}),N}function x(t){function n(t){return function(n,e){return n=n||{},K.keys(t).reduce(function(r,i){return r[i]=t[i](n[i],e),r},{})}}function i(t){function n(){return s}function i(n,i){if(!r(n,K))throw"action must be plain object";if(n.type===R)throw"actions must have a type";s=t(s,n),e(u,function(t){return t(s)})}function o(t){if(!r(t,Q))throw"listener should be a function";return u.push(t),function(){t=u.filter(function(n){return n!==t})}}function a(t,e){t(n()),o(function(){t(n())})}var s,u=[];return i({type:"@@dio/INIT"}),{getState:n,dispatch:i,subscribe:o,connect:a}}return i(r(t,K)?n(t):t)}function k(t,n){function i(t,n,e){var i=n in t?t[n]:t.getAttribute(n);i!==R&&i!==S&&(r(e,Y)?n in t?t[n]=i:t.setAttribute(n,i):e(i))}return function(){var o=this;r(t,X)?e(t,function(t,e){i(o,t,n[e])}):i(o,t,n)}}function j(){function t(r,o){function a(){var t=arguments;return t[L]&&(r=t[0]),r&&r.id===n+e?r():o?o(r):r}function s(i){function o(){return i(r&&r.id===n+e?r():r)}return o.id=n+e,t(o)}function u(){return r}return a.map=s,a.toJSON=u,a.id=n+i,a}var n="@@dio",e="/MAPPER",i="/PROP";return t.combine=function(o){function a(){return s.forEach(function(t,e){r(t,Q),t.id===n+i&&(s[e]=t())}),o.apply(R,s)}var s=Array.prototype.slice.call(arguments);return s.shift(),a.id=n+e,t(a)},t}var O={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},C=document,T=window,S=null,E=!1,N=!0,R=void 0,M="constructor",P="prototype",L="length",U="childNodes",q="children",A="classList",D="className",I="getInitialState",H="getDefaultProps",W="componentWillReceiveProps",F="componentDidMount",J="componentWillMount",B="componentWillUnmount",$="componentWillUpdate",z="componentDidUpdate",Z="shouldComponentUpdate",G=Number,X=Array,K=Object,Q=Function,V=Boolean,Y=String,_=XMLHttpRequest,tt=encodeURIComponent,nt=T.setTimeout;g[P]={setState:function(t){b(this,t)&&this.forceUpdate()},setProps:function(t){w(this,t)},forceUpdate:function(){this["render()"]&&this["render()"]()}},t.h=o(),t.dio={animate:c(),request:v(),render:m,router:d,store:x,trust:p,stream:j(),bind:k,DOM:l,toHTML:u}});