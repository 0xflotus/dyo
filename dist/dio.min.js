!function(t,n){"use strict";"function"==typeof define&&define.amd?define([],n):n("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:t)}(this,function(t){"use strict";function n(t){return Y[H].slice.call(t)}function e(t,n){var e;if(r(t,Y)||t[I]&&r(t[I],V)&&t[0]){var i=t[I];for(e=0;e<i;++e)if(n.call(t[e],t[e],e,t)===N)return}else for(e in t)if(n.call(t[e],t[e],e,t)===N)return}function r(t,n){return n?t!==R&&t!==L?t[U]===n:N:t?P:N}function i(t,n){n=n||0,ot(t,n)}function o(t,n,e,i,o){if(t&&(t.internal||t.render)){var a=o?t:t.internal;return a&&a[n]?(e=e?r(e,nt)?a.props:e:R,i=i?r(i,nt)?a.state:i:R,a[n](e,i)):void 0}}function a(){function t(t,o){var a,s=arguments,u=s[I],f=2;n(o)||!r(o,_)?(f=1,o={}):o!==L&&o!==R&&r(o,_)||(o={});var c={type:t,props:o,children:[]};t.indexOf("[")===-1&&t.indexOf("#")===-1&&t.indexOf(".")===-1||(c=i(c)),"svg"!==c.type&&"math"!==c.type||c.props.xmlns||(c.props.xmlns=j[c.type]);for(var p=f;p<u;p++)if(a=s[p],r(a,Y))for(var l=0;l<a[I];l++)c.children[p-f+l]=e(a[l],c);else c.children[p-f]=e(a,c);return c}function n(t){var n=t&&t.type&&t.children&&t.props;if(!n)return N;var e=0;for(var r in t){if(e>3)break;t.hasOwnProperty(r)&&e++}return 3===e}function e(t,e){return t&&t.props&&e.props.xmlns&&(t.props.xmlns=e.props.xmlns),r(t,_)&&n(t)||(r(t,_)?t=JSON.stringify(t):t+="","null"!==t&&"undefined"!==t||(t="")),t}function i(t){var n,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type;for(t.type="div";n=r.exec(o);)if(""===n[1]&&n[2])t.type=n[2];else if("#"===n[1])i.id=n[2];else if("."===n[1])e.push(n[2]);else if("["===n[3][0]){var a=n[6];a&&(a=a.replace(/\\(["'])/g,"$1")),i[n[4]]=a||P}return e[I]>0&&(i["class"]=e.join(" ")),t.props=i,t}return t}function s(t,n,a,s){function u(t,n,e,r,i,a,s){if(r=r||0,o(n,K,P,P)!==N)if(e===R&&n){var c=m(n,i);l(t,c,n)}else if(n===R){var c=t[q][r];p(t,c,e)}else{if(n.props&&e.props&&(n.props.key||e.props.key)&&n.props.key!==e.props.key){var d,c,g=a[I],y=s[I];return g>y?d=1:g<y&&(d=-1),f(t,a,s,d,r,n)}if(v(n,e)){var b=t[q][r],c=m(n);h(t,c,b,n)}else if(n.type){var x=t[q],g=n[A][I],y=e[A][I];w(x[r],n,e);for(var k=0;k<g||k<y;k++){var a=n[A],s=e[A],O=u(x[r],a[k],s[k],k,R,a,s);O!==R&&(g+=O,y+=O)}}}}function f(t,n,e,r,i,o){var a,s=t[q][i];if((r>0||!r)&&(a=m(o)),r>0)e.splice(i,0,R),d(t,a,s,o);else{if(r<0)return e.splice(i,1),p(t,s,o),-1;h(t,a,s,o)}}function p(t,n,e){if(n){var a=o(e,Z,n);r(a,V)||(a=0),i(function(){n&&t.removeChild(n)},a)}}function l(t,n,e){n&&(o(e,z),t.appendChild(n),o(e,$,n))}function d(t,n,e,r){n&&(o(r,z),t.insertBefore(n,e),o(r,$,n))}function h(t,n,e,r){n&&e&&(o(r,G),t.replaceChild(n,e),o(r,X))}function v(t,n){var e=t[U]!==n[U],i=r(t,et)&&t!==n,o=t.type!==n.type,a=N;return t&&n&&t.props&&n.props&&(t.props[Q]||n.props[Q])&&(a=t.props[Q]!==n.props[Q]),i||o||e||a}function m(t,n){if(r(t,et))return M.createTextNode(t);var i;if(i=t.props&&t.props.xmlns?M.createElementNS(t.props.xmlns,t.type):M.createElement(t.type),t.props&&t.props.ref){var o=t.props.ref;n&&r(o,et)?(n.refs=n.refs||{},n.refs[o]=i):r(o,tt)&&o(i)}return k(i,t.props),b(i,t.props),t.props&&t.props[Q]?(i.innerHTML=t.props[Q],i):(r(t.children,Y)&&e(t.children,function(t){i.appendChild(m(t,n))}),i)}function g(t,n){return"on"===t.substr(0,2)&&r(n,tt)}function y(t){return t.substr(2,t[I]).toLowerCase()}function b(t,n){for(var e in n){var r=n[e];g(e,r)&&r&&t.addEventListener(y(e),r,N)}}function w(t,n,r){var i=x(t,n.props,r.props);i[I]&&(o(n,G,P,P),e(i,function(t){O(t.target,t.name,t.value,t.op)}),o(n,X,P,P))}function x(t,n,e){var r=[];e=e!==R?e:{};var i={};for(var o in n)i[o]=n[o];for(var o in e)i[o]=e[o];for(var o in i){var a=e[o],s=n[o],u=s===R||s===L,f=a===R||a===L||s!==a&&!g(o,i[o]),c=u===-1?a:s;(f||u)&&r.push({target:t,name:o,value:c,op:f||u})}return r}function k(t,n){for(var e in n)O(t,e,n[e],1)}function O(t,n,i,o){if(!g(n,i)&&"ref"!==n&&"key"!==n&&"dangerouslySetInnerHTML"!==n){var a=(o===-1?"remove":"set")+"Attribute";if("xlink:href"===n)return t.setAttributeNS(j.xlink,"href",i);if(t[n]!==R)if(r(i,_))"className"===n||"class"===n?e(i,function(n,e){var r=n?"add":"remove";c(r,t,e)}):e(i,function(e,i){r(t[n][i])||(t[n][i]=e)});else if(!r(i,Y)||"className"!==n&&"class"!==n)try{t[n]=i}catch(s){}else t[n]=i.join(" ");else i!==j.svg&&i!==j.math&&(o===-1?t[a](n):t[a](n,i))}}u(t,n,a,R,s)}function u(t){function n(t,n){if(r(t,et))return t;var a=t.type,s=t.props,u=t.children;return o[a]?"<"+a+e(s)+">":"<"+a+e(s)+">"+i(u,n)+"</"+a+">"}function e(t){return t=_.keys(t).filter(function(n){return t[n]!==R&&t[n]!==L&&t[n]!==N}).map(function(n){var e=t[n];if(!r(e,tt)&&"key"!==n&&"ref"!==n)return e===P?n:n+'="'+e+'"'}).join(" ").replace(/\s+$/g,""),t?t:""}function i(t,e){if(0===t[I])return"";e=e||0;var r="\t".repeat(e+1),i="\t".repeat(e);return"\n"+r+t.map(function(t){return n(t,e+1)}).join("\n"+r)+"\n"+i}var o={area:P,base:P,br:P,"!doctype":P,col:P,embed:P,wbr:P,track:P,hr:P,img:P,input:P,keygen:P,link:P,meta:P,param:P,source:P};return n(t)}function f(){function t(t,n,e,a,s){return function(u,f){function p(t){if(h)w="finish";else{if(t.target!==u)return;o(g,"transition",L),o(g,"transform",L)}u.removeEventListener(w,p),o(g,"transformOrigin",L),g.willChange&&(g.willChange=L),c("remove",u,b),c("remove",y,b),f&&f(u)}if(e=e||"",r(u,et)&&(u=document.querySelector(u)),!u&&u.nodeType)throw"can't animate without an element";var l,d,h,v={},m={},u=u.currentTarget||u,g=u.style,y=document.body,b="animation-running",w="transitionend";if(r(u.animate,tt)&&(h=P),g.willChange&&(g.willChange="transform"),l=i(u),t&&c("toggle",u,t),d=t?i(u):l,m.x=l.left-d.left,m.y=l.top-d.top,m.sx=0!==d.width?l.width/d.width:1,m.sy=0!==d.height?l.height/d.height:1,n=n||200,s=s||"cubic-bezier(0,0,0.32,1)",v[1]="translate("+m.x+"px,"+m.y+"px) translateZ(0) scale("+m.sx+","+m.sy+")",v[1]=v[1]+" "+e,v[2]="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",a&&o(g,"transformOrigin",a),c("add",u,b),c("add",y,b),h){var x=u.animate([{transform:v[1]},{transform:v[2]}],{duration:n,easing:s});x.addEventListener("finish",p)}else o(g,"transform",v[1]),u.offsetWidth,o(g,"transition","transform "+n+"ms "+s+", opacity "+n+"ms "+s),o(g,"transform",v[2]);return h||u.addEventListener(w,p),n}}function n(t){return function(n,r){c("add",n,t);var i=0,o=getComputedStyle(n);o=o.transitionDuration,o=o.replace(/s| /g,"").split(","),e(o,function(t){i+=1e3*parseFloat(t)}),ot(function(){r(n)},i)}}function i(t){var n=t.getBoundingClientRect();return{top:n.top,left:n.left,width:n.width,height:n.height}}function o(t,n,e){if(t&&t[n]===L)for(var r=["webkit","Webkit","Moz","ms"],i=0;i<r[I];i++)n=r[i]+n[0].toUpperCase()+n.slice(1),t[n]!==R&&(t[n]=e);else t[n]=e}return{flip:t,transition:n}}function c(t,n,e){function r(t,n){return t[D]?t[D].contains(n):t[W].indexOf(n)>-1}function i(t,n){if(t[D])t[D].add(n);else if(!r(t,n)){var e=t[W].split(" ");e.push(n),t[W]=e.join(" ")}}function o(t,n){if(t[D])t[D].remove(n);else{var e=t[W].split(" ");e.splice(e.indexOf(n),1),t[W]=e.join(" ")}}function a(t,n){t[D]?t[D].toggle(n):r(t,n)?o(t,n):i(t,n)}var s={add:i,remove:o,hasClass:r,toggle:a};return s[t](n,e)}function p(){function t(t){e(t,function(t){E[t]=function(){var e=n(arguments),i=e[0];return!r(i,et)||"#"!==i.substr(0,1)&&"."!==i.substr(0,1)&&"["!==i.substr(0,1)||(t+=i,e.shift(i)),e.unshift(t),h.apply(null,e)}})}var i=arguments;t(i[I]?n(i):["doctype","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"])}function l(t){function n(){var t=this;t.settings={},t.url=L,t.interval=L,t.back=function(){history.back()},t.foward=function(){history.foward()},t.go=function(t){history.go(t)},t.nav=function(t){var n=this.settings.root;t=n?n+t:t,history.pushState(L,L,t)},t.config=function(t){var n=this;e(t,function(t,e){n.settings[e]=t})},t.init=function(){var t=this;clearInterval(t.interval),t.interval=setInterval(function(){var n=E.location.pathname;t.url!==n&&(t.url=n,t.changed())},50)},t.on=function(t){var n,i=this;if(i.routes||(i.routes={}),r(t,_))n=t;else{var t=arguments;n={},n[t[0]]=t[1]}e(n,function(t,n){var e=i.settings.root,r=[],o=/([:*])(\w+)|([\*])/g,a=n.replace(o,function(){var t=arguments,n=t[2];return n?(r.push(n),"([^/]+)"):"(?:.*)"}),a=a+"$";i.routes[n]={callback:t,pattern:e?e+a:a,variables:r}})},t.changed=function(){var n=this.url,i=this.routes;e(i,function(e){var i,o=e.callback,a=e.pattern,s=e.variables;if(i=n.match(new RegExp(a))){var u=i.slice(1,i[I]).reduce(function(t,n,e){return t||(t={}),t[s[e]]=n,t},L);if(!r(o,tt))throw"could not find render method";o(u,t.url)}})}}var i=t.mount,o=t.root,a=t.init,s=t.routes,u=new n;return i&&u.config({mount:i}),o&&u.config({root:o}),s&&u.on(s),u.init(),a&&u.nav(a),u}function d(){function t(t,e,i,o,a){function s(t){var n,e,r=t.responseText,i=t.getResponseHeader("content-type");return i.indexOf(";")!==-1?(e=i.split(";"),e=e[0].split("/")):e=i.split("/"),e=e[1],n="json"===e?JSON.parse(r):"html"===e?(new DOMParser).parseFromString(r,"text/html"):r}var u=k(R,R,function(t,n,e){var i;if(t){var o=t.currentTarget;r(o,rt)?i=o:r(t,rt)&&(i=t)}return i?i.status>=200&&i.status<400?n(s(i)):void(r(e,tt)&&e(i.statusText)):n(t)}),f=new rt,c=E.location,p=M.createElement("a");p.href=t;var l=!(p.hostname===c.hostname&&p.port===c.port&&p.protocol===c.protocol&&"file:"!==c.protocol);return p=R,f.open(e,t),f.onload=function(){u(this)},f.onerror=function(t){if(u){var n=this;u.then&&u.then(function(){throw n.statusText}),u(n)}},l&&(f.withCredentials=P),"POST"!==e&&"PUT"!==e||(f.setRequestHeader("Content-type",o),o.indexOf("x-www-form-urlencoded")>-1?i=n(i):o.indexOf("json")>-1&&(i=JSON.stringify(i))),f.send(i),u}function n(t,e){var r=[];for(var i in t){var o=e?e+"["+i+"]":i,a=t[i];r.push("object"==typeof a?n(a,o):it(o)+"="+it(a))}return r.join("&")}function e(n){return function(e,i,o,a){if(r(o,tt)){var s=a;a=o,o=s}return o?"json"===o?o="application/json":"text"===o?o="text/plain":"file"===o&&(o="multipart/form-data"):o="application/x-www-form-urlencoded",t(e,n.toUpperCase(),i,o,a)}}return{get:e("GET"),post:e("POST"),put:e("PUT"),"delete":e("DELETE")}}function v(){function t(t,n){a=o(t,n),s(c,a,f),f=a}function i(n,e){!l&&p&&(p[J]&&(b(p,p[J]()),delete p[J]),p[B]&&(y(p,p[B]()),delete p[B]),p["render()"]||(p["render()"]=t)),a=o(n,e),c.innerHTML="",a&&(s(c,a,R,p),f=a,d=N)}var o,a,f,c,p,l,d=P,h=n(arguments);if(e(h,function(t){r(t,tt)||r(t,_)?o=g(t):t.nodeType?c=t:r(t,et)&&(c=M.querySelector(t))}),c&&o)return o.stateless&&(l=P),l||(p=o(R,R,P)),function(n,e,r){return"vnode"===r?o(n,e):"html"===r?u(o(n,e)):(d||r?i(n,e):t(n,e),a)};if(!c)throw"can't find the element";if(!o)throw"can't find the component"}function m(){this.props={},this.state={}}function g(t){function n(t){var n=this;n.type=t.type,n.props=t.props,n.children=t.children}var i;if(r(t,_)&&!t.render)throw"can't find render, invalid component";if(r(t,tt)&&(i=t()),!i||!i.render)return t.stateless=P,t;var a=new m;e(i,function(t,n){r(t,tt)?"render"===n?a[n]=t.bind(a,a.props,a.state):a[n]=t.bind(a):a[n]=t}),n[H].internal=a,n[H][U]=_;var s=a.render;return function(t,e,r){return a.render=function(){return new n(s())},e&&(t=t||{},t.children=e),t&&(o(a,F,P,R,P),y(a,t)),r?a:a.render()}}function y(t,n){t.props=t.props||{},n&&e(n,function(n,e){t.props[e]=n})}function b(t,n){if(t.state=t.state||{},r(n,tt)&&(n=n()),n)return e(n,function(n,e){t.state[e]=n}),P}function w(t){function n(t){return function(n,e){return n=n||{},_.keys(t).reduce(function(r,i){return r[i]=t[i](n[i],e),r},{})}}function i(t){function n(){return s}function i(n,i){if(!r(n,_))throw"action must be plain object";if(n.type===R)throw"actions must have a type";s=t(s,n),e(u,function(t){return t(s)})}function o(t){if(!r(t,tt))throw"listener should be a function";return u.push(t),function(){t=u.filter(function(n){return n!==t})}}function a(t,e){t(n()),o(function(){t(n())})}var s,u=[];return i({type:C}),{getState:n,dispatch:i,subscribe:o,connect:a}}return i(r(t,_)?n(t):t)}function x(t,n){function i(t,n,e){var i;r(n,et)?(i=n in t?t[n]:t.getAttribute(n),i!==R&&i!==L&&e(i)):(i=n(),i!==R&&i!==L&&(e in t?t[e]=i:t.setAttribute(e,i)))}return function(){var o=this;r(t,Y)?e(t,function(t,e){i(o,t,n[e])}):i(o,t,n)}}function k(t,n,i){function o(){var n=arguments;return n[I]&&(v=t=n[0],h[I]&&e(h,function(t){v=t(v)||v})),a()}function a(){return t&&t.id===S?t():n?n(t):t}function s(n){function e(){return a(),n(t)}return e.id=S,k(e)}function u(t,n){if(r(t,tt)&&h.push(function(e){var o;try{if(i)d?o=i(e,t):(o=i(e,t,l),d=P);else var o=t(e)}catch(a){r(l,tt)&&l(a)}return n&&(h=v=l=R),o}),r(n,tt)&&(l=n),!n)return this}function f(t){u(R,t)}function c(t,n){n=n||P,u(t,n)}function p(){return a()}var l,d,h=[],v=t;return o.map=s,o.toJSON=p,o.valueOf=valueOf,o.toString=toString,o.then=u,o.done=c,o["catch"]=f,o.id=T,o}var O="@@dio",S=O+"/MAPPER",T=O+"/PROP",C=O+"/INIT",j={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},M=document,E=window,L=null,N=!1,P=!0,R=void 0,U="constructor",H="prototype",I="length",q="childNodes",A="children",D="classList",W="className",J="getInitialState",B="getDefaultProps",F="componentWillReceiveProps",$="componentDidMount",z="componentWillMount",Z="componentWillUnmount",G="componentWillUpdate",X="componentDidUpdate",K="shouldComponentUpdate",Q="dangerouslySetInnerHTML",V=Number,Y=Array,_=Object,tt=Function,nt=Boolean,et=String,rt=XMLHttpRequest,it=encodeURIComponent,ot=E.setTimeout;m[H]={setState:function(t){b(this,t)&&this.forceUpdate()},setProps:function(t){y(this,t)},forceUpdate:function(){this["render()"]&&this["render()"]()}},k.combine=function(t){function n(){return e.forEach(function(t,n){r(t,tt)&&t.id===T&&(e[n]=t())}),t.apply(R,e)}var e=Array.prototype.slice.call(arguments);return e.shift(),n.id=S,k(n)},t.h=a(),t.dio={animate:f(),request:d(),stream:k,bind:x,createRender:v,createRouter:l,createStore:w,DOM:p,toHTML:u}});