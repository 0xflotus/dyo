!function(){"use strict";function t(t,e){return e?t!==E&&t!==b?t[l]===e:T:!!t}function e(e,n){var r;if(t(e,v)||e[d]&&t(e[d],h)&&e[0]){var i=e[d];for(r=0;r<i;++r)if(n.call(e[r],e[r],r,e)===T)return e}else for(r in e)if(n.call(e[r],e[r],r,e)===T)return e;return e}function n(t,e,n){var r=(new y).getTime();e=e||60;var i=1e3/e;return function o(e){n.id=requestAnimationFrame(o);var a=(new y).getTime(),s=a-r;s>i&&(r=a-s%i,t(e))}(0)}function r(t,e){var n=[];for(var i in t){var o=e?e+"["+i+"]":i,a=t[i];n.push("object"==typeof a?r(a,o):S(o)+"="+S(a))}return n.join("&")}function i(e,n){var i=new x,o=f.location,a=e.url,n=e.callback,s=e.method,u=e.data||{},l=c.createElement("a");l.href=a;var p=!(l.hostname===o.hostname&&l.port===o.port&&l.protocol===o.protocol&&"file:"!==o.protocol);return l=b,i.open(s,a,R),i.onerror=function(){n(this,R)},i.onload=function(){if(n){var t,e,r=i.responseText;if(this.status>=200&&this.status<400){var o,a=i.getResponseHeader("content-type");a.indexOf(";")!==-1?(o=a.split(";"),o=o[0].split("/")):o=a.split("/"),o=o[1],e="json"===o?JSON.parse(r):"html"===o?(new DOMParser).parseFromString(r,"text/html"):r,t=[e,T]}else t=[this,R];n(t[0],t[1])}},p&&(i.withCredentials=R),"GET"!==s&&i.setRequestHeader("Content-Type",t(u,m)?"application/json":"text/plain"),"POST"===s?(i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(r(u))):i.send(),i}function o(t,e,n){return function(){var r=this,i=t in r?r[t]:r.getAttribute(t);if(i!==E&&i!==b){var o={};o[n]=i,e.setState(o)}}}function a(t){return{content:t,trust:R,$:R}}function s(e,n,r,i,o){return function(a){function s(t){if(!l){if(t.target!==a)return;d.transition=b,d.transform=b}d.transformOrigin=b,d.willChange=b,h.remove(m),v.remove(m),a.removeEventListener(w,s)}var u,f,l,p={},a=a.currentTarget||a,d=a.style,h=a.classList,v=c.body.classList,m="animation-running",w="transitionend";if(n){if(t(a.animate,g)&&(l=R),d.willChange="transform",u=a.getBoundingClientRect(a),h.toggle(n),f=a.getBoundingClientRect(a),p.x=u.left-f.left,p.y=u.top-f.top,p.sx=u.width/f.width,p.sy=u.height/f.height,e=e||200,o=o||"cubic-bezier(0,0,0.32,1)",u="translate("+p.x+"px,"+p.y+"px) translateZ(0) scale("+p.sx+","+p.sy+")",u=r?u+" "+r:u,f="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",i&&(d.transformOrigin=i),h.add(m),v.add(m),l){var y=a.animate([{transform:u},{transform:f}],{duration:e,easing:o});y.addEventListener("finish",s)}else d.transform=u,a.offsetWidth,d.transition="transform "+e+"ms "+o,d.transform=f;l||a.addEventListener(w,s)}}}var u={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},c=document,f=window,l="constructor",p="prototype",d="length",h=Number,v=Array,m=Object,g=Function,w=String,y=Date,x=XMLHttpRequest,C=Math,b=null,T=!1,R=!0,E=void 0,S=encodeURIComponent,M="getInitialState",O="getDefaultProps",k="componentWillReceiveProps",L="componentDidMount",q="componentWillMount",A="componentWillUnmount",N="componentWillUpdate",F="componentDidUpdate";!function(){for(var t="requestAnimationFrame",e="cancelAnimationFrame",n=["ms","moz","webkit"],r=n[d],i="AnimationFrame",o=0,a=0;a<r&&!f[t];++a)f[t]=f[n[a]+"Request"+i],f[e]=f[n[a]+"Cancel"+i]||f[n[a]+"CancelRequest"+i];f[t]||(f[t]=function(t){var e=(new y).getTime(),n=C.max(0,16-(e-o)),r=f.setTimeout(function(){t(e+n)},n);return o=e+n,r}),f[e]||(f[e]=function(t){clearTimeout(t)})}();var P=function(t){var e=this;t&&e.mount(t),e.settings={auto:T}};P[p]={Router:{back:function(){history.back()},foward:function(){history.foward()},go:function(t){history.go(t)},destroy:function(){this.routes={},cancelAnimationFrame(this.raf.id)},nav:function(t){var e=this.settings.root;t=e?e+t:t,history.pushState(b,b,t)},config:function(t){var n=this;n.settings||(n.settings={}),e(t,function(t,e){n.settings[e]=t})},listen:function(){var t=this;t.url=b,t.raf={id:0},n(function(){var e=f.location.pathname;t.url!==e&&(t.url=e,t.changed())},60,t.raf)},on:function(n){var r,i=this;if(i.routes||(i.routes={}),i.raf||i.listen(),t(n,m))r=n;else{var n=arguments;r={},r[n[0]]=n[1]}e(r,function(t,e){var n=i.settings.root,r=[],o=/([:*])(\w+)|([\*])/g,a=e.replace(o,function(){var t=arguments,e=t[2];return e?(r.push(e),"([^/]+)"):"(?:.*)"});i.routes[e]={callback:t,pattern:n?n+a:a,variables:r}})},changed:function(){var n=this,r=n.url,i=n.routes;e(i,function(e){var n,i=e.callback,o=e.pattern,a=e.variables;if(n=r.match(new RegExp(o))){var s=n.slice(1,n[d]).reduce(function(t,e,n){return t||(t={}),t[a[n]]=e,t},b);if(!t(i,g))throw"could not find render method";f.surl.Render(i,E,s)}})}},DOM:function(){function r(t){return"on"===t.substring(0,2)}function i(t){return t.substring(2,t[d]).toLowerCase()}function o(t,e){for(var n in e)if(r(n)){var o=e[n];o&&t.addEventListener(i(n),o,T)}}function a(t,e,n,i){if(!r(e)&&"ref"!==e){var o=(i===-1?"remove":"set")+"Attribute";return"xlink:href"===e?t.setAttributeNS(u.xlink,"href",n):void(t[e]!==E&&t.namespaceURI!==u.svg?t[e]=n:n!==u.svg&&n!==u.math&&(i===-1?t[o](e):t[o](e,n)))}}function s(t,e,n){var i=e===E||e===b,o=n===E||n===b||e!==n&&!r(t);return i?-1:o?1:void 0}function f(t,n,r,i){var o=[];r=r!==E?r:{};var u={};for(var c in n)u[c]=n[c];for(var c in r)u[c]=r[c];for(var c in u){var f=r[c],l=n[c],p=s(c,l,f),h=p===-1?f:l;p&&o.push({target:t,name:c,val:h,change:p})}if(o[d]){if(i[N]){var v=i[N].getCmp();i[N](v.props,v.state)}if(e(o,function(t){a(t.target,t.name,t.val,t.change)}),i[F]){var v=i[F].getCmp();i[F](v.props,v.state)}}}function h(t,e){for(var n in e)a(t,n,e[n],1)}function m(n,r){if(t(n,w))return c.createTextNode(n);if(n.trust&&n.$){var i=c.createElement("div"),a=c.createDocumentFragment();i.innerHTML=n.content;var s=v[p].slice.call(i.childNodes);return e(s,function(t){a.appendChild(t)}),a}var u;if(u=n.props&&n.props.xmlns?c.createElementNS(n.props.xmlns,n.type):c.createElement(n.type),h(u,n.props),o(u,n.props),t(n.children,v)&&e(n.children,function(t){u.appendChild(m(t,r))}),t(r,g)){var f=n.props,l=f?f.ref:E;if(l){var d=r(E,E,!0);d.refs={},t(l,g)?l(u):t(l,w)&&(d.refs[l]=u)}}return u}function y(e,n){var r=e[l]!==n[l],i=t(e,w)&&e!==n,o=e.type!==n.type;return r||i||o}function x(t){return t===E||t!==b&&0!==t&&t!==T||(t+=""),t}function C(t,e,n,r,i){if(r=r||0,n=x(n),e=x(e),n===E)t.appendChild(m(e,i)),e[L]&&e[L]();else if(e===E){var o=t.childNodes[r];setTimeout(function(){t.removeChild(o),n[A]&&n[A]()},0)}else if(y(e,n)){if(e[N]){var a=e[F].getCmp();e[N](a.props,a.state)}if(t.replaceChild(m(e),t.childNodes[r]),e[F]){var a=e[F].getCmp();e[F](a.props,a.state)}}else if(e.type){f(t.childNodes[r],e.props,n.props,e);for(var s=e.children[d],u=n.children[d],c=0;c<s||c<u;c++)C(t.childNodes[r],e.children[c],n.children[c],c,i)}}function R(t,e){this.mount=t,this.raf=b,this.render=e}return R[p]={update:function(){var t=this.render(),e=this.old;C(this.mount,t,e,E,this.render),this.old=t},init:function(){this.old=this.render(),this["new"]=this.old,C(this.mount,this.old,E,E,this.render)},auto:function(t){var e=this;t?(e.raf={id:1},n(function(){e.update()},60,e.raf)):cancelAnimationFrame(e.raf.id)}},R}(),Req:function(){var n=arguments,r={method:"GET"};return e(n,function(e){if(t(e,m))r.data=e;else if(t(e,g))r.callback=e;else if(t(e,w)){var n=e.toUpperCase();"POST"===n||"GET"===n?r.method=n:r.url=e}}),i(r)},Mount:function(e){var n=this;e===c?e=e.body:t(e,w)&&(e=c.querySelector(e)),e&&e.nodeType?n.parent=e:n.parent=E},Render:function(e,n,r){var r,i=this;if(n&&(t(n,w)?i.parent=c.querySelector(n):n.nodeType&&(i.parent=n)),!i.parent)throw"element to mount does not exist";if(i.parent.innerHTML="",t(e,m)){var o=e;e=i.Component({render:function(){return o}})}var a=e(E,E,!0);a[q]&&a[q](r),i.virtual=new i.DOM(i.parent,e),i.virtual.init(),i.settings.auto&&i.virtual.auto(R)},Component:function(n){function r(t){this.type=t.type,this.props=t.props,this.children=t.children,this.$=!0}var i=this;n.props=n.props||{},n.state=n.state||{};var o=function(){var r=this;e(n,function(e,n){t(e,g)&&(e=e.bind(r)),r[n]=e})};e(["Props","State"],function(n){var r=n.toLowerCase();o[p]["set"+n]=function(n,o){var a=this;n&&(t(n,g)&&(n=n(a.state,a.props)),e(n,function(t,e){a[r][e]=t}),"state"!==r||o||i.settings.auto||!i.virtual||i.virtual.update())}});var a=new o;a[M]&&a.setState(a[M](),T),a[O]&&a.setProps(a[O]()),e(a,function(t,e){e!==q&&e!==A&&e!==k&&e!==N&&e!==L&&e!==F||(t.getCmp=function(){return a},r[p][e]=t)}),r[p][l]=m,a.render=function(){return new r(this())}.bind(a.render);var s=function(t,e,n){return e&&a.setProps({children:e}),t&&a.setProps(t),(t||e)&&a[k]&&(t&&e?t.children=e:!t&&e&&(t={},t.children=e),console.log(t),a[k](t)),n?a:a.render()};return s},Element:function(){function e(t){var e,n=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type;for(t.type="div";e=r.exec(o);)if(""===e[1]&&e[2])t.type=e[2];else if("#"===e[1])i.id=e[2];else if("."===e[1])n.push(e[2]);else if("["===e[3][0]){var a=e[6];a&&(a=a.replace(/\\(["'])/g,"$1")),i[e[4]]=a||R}return n[d]>0&&(i["class"]=n.join(" ")),t.props=i,t}function n(e,n){return t(e,m)&&n.props.xmlns&&(e.props.xmlns=n.props.xmlns),t(e,m)||t(e,w)||t(e,v)||(e+="","null"!==e&&"undefined"!==e||(e="")),e}function r(r,i){var o,a=arguments,s=a[d],c=2;i&&i.$||!t(i,m)?(c=1,i={}):i!==b&&i!==E&&t(i,m)||(i={});var f={type:r,props:i,children:[],$:R};r.indexOf("[")===-1&&r.indexOf("#")===-1&&r.indexOf(".")===-1||(f=e(f)),"svg"!==f.type&&"math"!==f.type||f.props.xmlns||(f.props.xmlns=u[f.type]);for(var l=c;l<s;l++)if(o=a[l],t(o,v))for(var p=0;p<o[d];p++)f.children[l-c+p]=n(o[p],f);else f.children[l-c]=n(o,f);return f}return r}()},f.surl=new P,f.h=f.surl.Element,f.bind=o,f.trust=a,f.animate=s}();