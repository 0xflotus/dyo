!function(){"use strict"
function t(){for(var t="requestAnimationFrame",n="cancelAnimationFrame",e=["ms","moz","webkit"],r=e.length,i="AnimationFrame",o=0,a=window,s=0;r>s&&!a[t];++s)a[t]=a[e[s]+"Request"+i],a[n]=a[e[s]+"Cancel"+i]||a[e[s]+"CancelRequest"+i]
a[t]||(a[t]=function(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-o)),r=a.setTimeout(function(){t(n+e)},e)
return o=n+e,r}),a[n]||(a[n]=function(t){clearTimeout(t)})}function n(t,n){var e
if(t[c]===Array){var r=t.length
for(e=0;r>e;++e)if(n.call(t[e],t[e],e,t)===!1)return t}else for(e in t)if(n.call(t[e],t[e],e,t)===!1)return t
return t}function e(t,n,e){var r=(new Date).getTime()
n=n||60
var i=1e3/n
return function o(n){e.id=requestAnimationFrame(o)
var a=(new Date).getTime(),s=a-r
s>i&&(r=a-s%i,t(n))}(0)}function r(t){var n=[]
for(var e in t){var i=t[e]
n.push("object"==typeof i?r(i,e):encodeURIComponent(e)+"="+encodeURIComponent(i))}return n.join("&")}function i(t,n){var e=new XMLHttpRequest,i=window.location,o=t.url,n=t.callback,a=t.method,s=document.createElement("a")
s.href=o
var l=!(s.hostname===i.hostname&&s.port===i.port&&s.protocol===i.protocol&&"file:"!==i.protocol)
return s=null,e.open(a,o,!0),e.onerror=function(){n(this,!0)},e.onload=function(){if(n){var t,r
if(this.status>=200&&this.status<400){var i,o=e.getResponseHeader("content-type");-1!==o.indexOf(";")?(i=o.split(";"),i=i[0].split("/")):i=o.split("/"),o=i[1],r="json"===o?JSON.parse(e.responseText):"html"===o?(new DOMParser).parseFromString(e.responseText,"text/html"):e.responseText,t=[r,!1]}else t=[this,!0]
n(t[0],t[1])}},l&&(e.withCredentials=!0),"GET"!==a&&e.setRequestHeader("Content-Type",t.data[c]===Object?"application/json":"text/plain"),"POST"===a?(e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(r(t))):e.send(),e}function o(t){var r=this
t&&(r.parent=r.__$(t)),r.settings={loop:!0},r.router={back:function(){history.back()},foward:function(){history.foward()},go:function(t){history.go(t)},destroy:function(){this.routes={},cancelAnimationFrame(this.raf.id)},nav:function(t){var n=this.settings.root
t=n?n+t:t,history.pushState(null,null,t)},config:function(t){var e=this
e.settings||(e.settings={}),n(t,function(t,n){e.settings[n]=t})},listen:function(){var t=this
t.url=null,t.raf={id:0},e(function(){var n=window.location.pathname
t.url!==n&&(t.url=n,t.changed())},60,t.raf)},on:function(t){var e,r=this
if(r.routes||(r.routes={}),r.raf||r.listen(),t[c]!==Object){var t=arguments
e={},e[t[0]]=t[1]}else e=t
n(e,function(t,n){var e=r.settings.root,i=[],o=/([:*])(\w+)|([\*])/g,a=n.replace(o,function(){var t=arguments,n=t[2]
return n?(i.push(n),"([^/]+)"):"(?:.*)"})
r.routes[n]={callback:t,pattern:e?e+a:a,variables:i}})},changed:function(){var t=this.url,e=this.routes
n(e,function(n){var e,i=n.callback,o=n.pattern,a=n.variables
if(e=t.match(RegExp(o))){var s=e.slice(1,e.length).reduce(function(t,n,e){return t||(t={}),t[a[e]]=n,t},null)
if(!i||i[c]!==Function)throw"could not find the render method"
i.cmp?r.mount(i,void 0,s):i(s)}})}}}function a(t){var n,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type
for(t.type="div";n=r.exec(o);)if(""===n[1]&&n[2])t.type=n[2]
else if("#"===n[1])i.id=n[2]
else if("."===n[1])e.push(n[2])
else if("["===n[3][0]){var a=n[6]
a&&(a=a.replace(/\\(["'])/g,"$1")),i[n[4]]=a||!0}return e.length>0&&(i["class"]=e.join(" ")),t.props=i,t}function s(t,n){return t&&t[c]===Object&&n.props.xmlns&&(t.props.xmlns=n.props.xmlns),t=void 0===t||null===t||t[c]!==Object&&t[c]!==String&&t[c]!==Array?t+"":t,t="null"===t||"undefined"===t?"":t}function l(t,n){var e,r=arguments,i=r.length,o=2
n&&(n.__hs||n[c]===String||n[c]===Array)?(o=1,n={}):(null===n||void 0===n||n[c]!==Object)&&(n={})
var l={type:t,props:n,children:[],__hs:!0};(-1!==l.type.indexOf("[")||-1!==l.type.indexOf("#")||-1!==l.type.indexOf("."))&&(l=a(l)),("svg"===l.type||"math"===l.type)&&(l.props.xmlns||(l.props.xmlns=f[l.type]))
for(var u=o;i>u;u++)if(e=r[u],e&&e[c]===Array)for(var d=0;d<e.length;d++)l.children[u-o+d]=s(e[d],l)
else l.children[u-o]=s(e,l)
return l}function u(){function t(n){if(!d){if(n.target!=a)return
a.style.transition=null,a.style.transform=null}a.style.transformOrigin=null,a.style.willChange=null,a.classList.remove("animation-running"),document.body.classList.remove("animation-running"),a.removeEventListener("transitionend",t)}for(var n,e,r,i,o,a,s,l,u,f,d,s=l=u=f={},n=Array.prototype.slice.call(arguments),p=n.length-1;p>=0;p--){var h=n[p]
h[c]===Array?i=h.join(" "):h[c]===Number?r=h:h[c]===String?-1!==h.indexOf(",")?o=h:e=h:h.target&&(a=h.target)}if(this[c]===Number?r=this:this[c]===String?e=this:e||(e="animation-active"),e&&a){if(a.style.willChange="transform",s=a.getBoundingClientRect(),a.classList.toggle(e),l=a.getBoundingClientRect(),u.x=s.left-l.left,u.y=s.top-l.top,u.sx=s.width/l.width,u.sy=s.height/l.height,a.animate&&a.animate[c]===Function)var d=!0
if(f.first="translate("+u.x+"px,"+u.y+"px) translateZ(0) scale("+u.sx+","+u.sy+")",f.first=i?f.first+" "+i:f.first,f.last="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",f.duration=r?r:200,f.easing=o?"cubic-bezier("+o+")":"cubic-bezier(0,0,0.32,1)",a.style.transformOrigin="0 0",a.classList.add("animation-running"),document.body.classList.add("animation-running"),document.body.classList.toggle("animation-active"),d){var m=a.animate([{transform:f.first},{transform:f.last}],{duration:f.duration,easing:f.easing})
m.addEventListener("finish",t)}else a.style.transform=f.first,a.offsetWidth,a.style.transition="transform "+f.duration+"ms "+f.easing,a.style.transform=f.last
d||a.addEventListener("transitionend",t)}}var c="constructor",f={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}
o.prototype={__vdom:function(){function t(t){return"on"===t.substring(0,2)}function r(t){return t.substring(2,t.length).toLowerCase()}function i(n,e){for(var i in e)if(t(i)){var o=e[i]
o&&n.addEventListener(r(i),o,!1)}}function o(n,e,r,i){if(!t(e)){var o=(-1===i?"remove":"set")+"Attribute"
if("xlink:href"===e)return n.setAttributeNS(f.xlink,"href",r)
if(void 0!==n[e]&&n.namespaceURI!==f.svg)n[e]=r
else if(r!==f.svg&&r!==f.math)return-1===i?n[o](e):n[o](e,r)}}function a(t,n,e,r){void 0===e||null===e?o(t,n,r,-1):(void 0===r||null===r||e!==r)&&o(t,n,e,1)}function s(t,n,e){e=void 0!==e?e:{}
var r={}
for(var i in n)r[i]=n[i]
for(var i in e)r[i]=e[i]
for(var i in r)a(t,i,n[i],e[i])}function l(t,n){for(var e in n)o(t,e,n[e],1)}function u(t){if(t[c]===String)return document.createTextNode(t)
var e
return e=t.props&&t.props.xmlns?document.createElementNS(t.props.xmlns,t.type):document.createElement(t.type),l(e,t.props),i(e,t.props),t.children&&t.children[c]===Array&&n(t.children.map(u),e.appendChild.bind(e)),e}function d(t,n){var e=t[c]!==n[c],r=t[c]===String&&t!==n,i=t.type!==n.type
return e||r||i}function p(t){return void 0===t||null!==t&&0!==t&&t!==!1||(t+=""),t}function h(t,n,e,r){if(r=r?r:0,e=p(e),n=p(n),void 0===e)t.appendChild(u(n))
else if(void 0===n){var i=t.childNodes[r]
setTimeout(function(){t.removeChild(i)},0)}else if(d(n,e))t.replaceChild(u(n),t.childNodes[r])
else if(n.type){s(t.childNodes[r],n.props,e.props)
for(var o=n.children.length,a=e.children.length,l=0;o>l||a>l;l++)h(t.childNodes[r],n.children[l],e.children[l],l)}}function m(t,n){this.parent=t,this.render=n,this.raf=null}return m.prototype={update:function(){var t=this.render(),n=this.old
h(this.parent,t,n),this.old=t},init:function(){this.old=this.render(),h(this.parent,this.old)},destroy:function(){this.auto(!1),this.old=void 0,this.render=void 0,this.raf=void 0,this.parent=void 0},auto:function(t){var n=this
return t?(n.raf={id:1},void e(function(){n.update()},60,n.raf)):(cancelAnimationFrame(n.raf.id),n.raf.id)}},m},__$:function(t){return t===document?t=t.body:t[c]===String&&(t=document.querySelector(t)),t&&t.nodeType?t:void 0},req:function(){var t=arguments,e={}
n(t,function(t){if(t[c]===Object)e.data=t
else if(t[c]===Function)e.callback=t
else if(t[c]===String){var n=t.toUpperCase()
"POST"===n||"GET"===n?e.method=n:e.url=t}}),i(e)},mount:function(t,n,e){var e,r=this
if(n&&(n[c]===String?r.parent=document.querySelector(n):n.nodeType&&(r.parent=n)),!r.parent)throw"the element to mount to does not exist"
r.parent.innerHTML="",r.vdom&&r.vdom.destroy(),t.componentWillMount&&t.componentWillMount(e),r.vdom=this.__vdom(),r.vdom=new r.vdom(r.parent,t),r.vdom.init(),r.settings.loop&&r.vdom.auto(!0)},component:function(t){t.props=t.props||{},t.state=t.state||{}
var e=function(){var e=this
n(t,function(t,n){t[c]===Function&&(t=t.bind(e)),e[n]=t})}
n(["Props","State"],function(t){var r=t.toLowerCase()
e.prototype["set"+t]=function(t){var e=this
n(t,function(t,n){e[r][n]=t})}})
var r=new e
r.getInitalState&&r.setState(r.getInitalState()),r.getDefaultProps&&r.setProps(r.getDefaultProps())
var i=function(t,n){return n&&r.setProps({children:n}),t&&r.setProps(t),r.render()}
return r.componentWillMount&&(i.componentWillMount=r.componentWillMount),i.cmp=!0,i},createClass:function(t){return this.component(t)},createComponent:function(t){return this.component(t)}},t(),window.h=l,window.animate=u,window.surl=o}()
