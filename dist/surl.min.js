!function(t,e){"function"==typeof define&&define.amd?define([],e):e("object"==typeof exports&&"string"!=typeof exports.nodeName?exports:t)}(this,function(t){"use strict";var e={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},n=document,r=window,i=null,o=!1,a=!0,s=void 0,u="constructor",c="prototype",l="length",f="getInitialState",p="getDefaultProps",d="componentWillReceiveProps",v="componentDidMount",m="componentWillMount",g="componentWillUnmount",y="componentWillUpdate",w="componentDidUpdate",b="shouldComponentUpdate",x=Number,C=Array,k=Object,S=Function,T=String,M=XMLHttpRequest,O=encodeURIComponent,R=function(){function t(t,e){return e?t!==s&&t!==i?t[u]===e:o:!!t}return t}(),E=function(){function t(t,e){var n;if(R(t,C)||t[l]&&R(t[l],x)&&t[0]){var r=t[l];for(n=0;n<r;++n)if(e.call(t[n],t[n],n,t)===o)return t}else for(n in t)if(e.call(t[n],t[n],n,t)===o)return t;return t}return t}(),L=function(){function t(t,s){var u=new M,c=r.location,l=t.url,s=t.callback,f=t.method,p=t.data||{},d=n.createElement("a");d.href=l;var h=!(d.hostname===c.hostname&&d.port===c.port&&d.protocol===c.protocol&&"file:"!==c.protocol);return d=i,u.open(f,l,a),u.onerror=function(){s(this,a)},u.onload=function(){if(s){var t,e,n=u.responseText;if(this.status>=200&&this.status<400){var r,i=u.getResponseHeader("content-type");i.indexOf(";")!==-1?(r=i.split(";"),r=r[0].split("/")):r=i.split("/"),r=r[1],e="json"===r?JSON.parse(n):"html"===r?(new DOMParser).parseFromString(n,"text/html"):n,t=[e,o]}else t=[this,a];s(t[0],t[1])}},h&&(u.withCredentials=a),"GET"!==f&&u.setRequestHeader("Content-Type",R(p,k)?"application/json":"text/plain"),"POST"===f?(u.setRequestHeader("Content-type","application/x-www-form-urlencoded"),u.send(e(p))):u.send(),u}function e(t,n){var r=[];for(var i in t){var o=n?n+"["+i+"]":i,a=t[i];r.push("object"==typeof a?e(a,o):O(o)+"="+O(a))}return r.join("&")}return t}(),N=function(){function t(t,o){var a,c=arguments,f=c[l],p=2;n(o)||!R(o,k)?(p=1,o={}):o!==i&&o!==s&&R(o,k)||(o={});var d={type:t,props:o,children:[]};t.indexOf("[")===-1&&t.indexOf("#")===-1&&t.indexOf(".")===-1||(d=u(d)),"svg"!==d.type&&"math"!==d.type||d.props.xmlns||(d.props.xmlns=e[d.type]);for(var h=p;h<f;h++)if(a=c[h],R(a,C))for(var v=0;v<a[l];v++)d.children[h-p+v]=r(a[v],d);else d.children[h-p]=r(a,d);return d}function n(t){var e=t&&t.type&&t.children&&t.props;if(!e)return o;var n=0;for(var r in t){if(n>3)break;t.hasOwnProperty(r)&&n++}return 3===n}function r(t,e){return R(t.props,k)&&e.props.xmlns&&(t.props.xmlns=e.props.xmlns),R(t,k)&&n(t)||(R(t,k)?t=JSON.stringify(t):t+="","null"!==t&&"undefined"!==t||(t="")),t}function u(t){var e,n=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type;for(t.type="div";e=r.exec(o);)if(""===e[1]&&e[2])t.type=e[2];else if("#"===e[1])i.id=e[2];else if("."===e[1])n.push(e[2]);else if("["===e[3][0]){var s=e[6];s&&(s=s.replace(/\\(["'])/g,"$1")),i[e[4]]=s||a}return n[l]>0&&(i["class"]=n.join(" ")),t.props=i,t}return t}(),q=function(){function t(t,e,n,r,i){var o=i?t:t.Component;if(o&&o[e])return n=n?R(n,k)?n:o.props:n,r=r?R(r,k)?r:o.state:r,o[e](n,r)}return t}(),P=function(){function t(t,e){this.mount=t,this.render=e}function r(t,e,n,i,u){if(i=i||0,n=f(n),e=f(e),q(e,b,a,a)!==o)if(n===s)t.appendChild(d(e,u)),q(e,v);else if(e===s){var c=t.childNodes[i];setTimeout(function(){t.removeChild(c),q(n,g)},0)}else if(p(e,n))q(e,y,a,a),t.replaceChild(d(e),t.childNodes[i]),q(e,w,a,a);else if(e.type&&!e.trust){var h=k(t.childNodes[i],e.props,n.props,e);h[l]&&(q(e,y,a,a),E(h,function(t){O(t.target,t.name,t.value,t.op)}),q(e,w,a,a));for(var m=e.children[l],x=n.children[l],C=0;C<m||C<x;C++)r(t.childNodes[i],e.children[C],n.children[C],C,u)}}function f(t){return t===s||t!==i&&0!==t&&t!==o||(t+=""),t}function p(t,e){var n=t[u]!==e[u],r=R(t,T)&&t!==e,i=t.type!==e.type;return n||r||i}function d(t,e){if(R(t,T))return n.createTextNode(t);if(t.trust){var r=n.createElement("div"),i=n.createDocumentFragment();r.innerHTML=t.children[0];var o=C[c].slice.call(r.childNodes);return E(o,function(t){i.appendChild(t)}),i}var a;if(a=t.props&&t.props.xmlns?n.createElementNS(t.props.xmlns,t.type):n.createElement(t.type),M(a,t.props),x(a,t.props),R(t.children,C)&&E(t.children,function(t){a.appendChild(d(t,e))}),R(e,S)){var u=t.props,l=u?u.ref:s;if(l){var f=e(s,s,!0);f.refs={},R(l,S)?l(a):R(l,T)&&(f.refs[l]=a)}}return a}function h(t,e){return"on"===t.substring(0,2)&&R(e,S)}function m(t){return t.substring(2,t[l]).toLowerCase()}function x(t,e){for(var n in e){var r=e[n];h(n,r)&&r&&t.addEventListener(m(n),r,o)}}function k(t,e,n,r){var o=[];n=n!==s?n:{};var a={};for(var u in e)a[u]=e[u];for(var u in n)a[u]=n[u];for(var u in a){var c=n[u],l=e[u],f=l===s||l===i,p=c===s||c===i||l!==c&&!h(u,a[u]),d=f===-1?c:l;(p||f)&&o.push({target:t,name:u,value:d,op:p||f})}return o}function M(t,e){for(var n in e)O(t,n,e[n],1)}function O(t,n,r,i){if(!h(n,r)&&"ref"!==n){var o=(i===-1?"remove":"set")+"Attribute";return"xlink:href"===n?t.setAttributeNS(e.xlink,"href",r):void(t[n]!==s&&t.namespaceURI!==e.svg?t[n]=r:r!==e.svg&&r!==e.math&&(i===-1?t[o](n):t[o](n,r)))}}return t[c]={update:function(){var t=this.render(),e=this.old;r(this.mount,t,e,s,this.render),this.old=t},init:function(){this.old=this.render(),this["new"]=this.old,r(this.mount,this.old,s,s,this.render)}},t}(),j=function(){function t(t){var e=this;t&&e.Mount(t)}return t[c]={Req:function(){var t=arguments,e={method:"GET"};return E(t,function(t){if(R(t,k))e.data=t;else if(R(t,S))e.callback=t;else if(R(t,T)){var n=t.toUpperCase();"POST"===n||"GET"===n?e.method=n:e.url=t}}),L(e)},Mount:function(t){var e=this;t===n?t=t.body:R(t,T)&&(t=n.querySelector(t)),t&&t.nodeType?e.parent=t:e.parent=s},Render:function(t,e,r){var r,i=this;if(e&&(R(e,T)?i.parent=n.querySelector(e):e.nodeType&&(i.parent=e)),!i.parent)throw"element to mount does not exist";if(i.parent.innerHTML="",R(t,k)){var o=t;t=i.Component({render:function(){return o}})}q(t(s,s,!0),m,r,s,!0),i.virtual=new P(i.parent,t),i.virtual.init()},Component:function e(t){function n(){var e=this;E(t,function(t,n){R(t,S)&&(t=t.bind(e)),e[n]=t})}function r(t){this.type=t.type,this.props=t.props,this.children=t.children}function e(t,e,n){return t&&q(l,d,t,s,a),t&&e?t.children=e:!t&&e&&(t={},t.children=e),t&&l.setProps(t),n?l:l.render()}var i=this;if(R(t,S))return i.Component(t());t.props=t.props||{},t.state=t.state||{},E(["Props","State"],function(t){var e=t.toLowerCase();n[c]["set"+t]=function(t,n){var r=this;t&&(R(t,S)&&(t=t(r.state,r.props)),E(t,function(t,n){r[e][n]=t}),"state"===e&&!n&&i.virtual&&i.virtual.update())}});var l=new n;if(!l.render)throw"no render method";l[f]&&l.setState(l[f](),o),l[p]&&l.setProps(l[p](),o),E(l,function(t,e){r[c].cmp=l}),r[c][u]=k;var h=l.render;return l.render=function(){return new r(h())},e},DOM:function(){E(["doctype","a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","command","datalist","dd","del","details","dfn","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","map","mark","menu","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr"],function(t){r[t]=function(){var e=C[c].slice.call(arguments);return e.unshift(t),h.apply(null,e)}})},Route:function(t){function e(){this.settings={},this.url=i,this.interval=i,this.back=function(){history.back()},this.foward=function(){history.foward()},this.go=function(t){history.go(t)},this.nav=function(t){var e=this.settings.addr;t=e?e+t:t,history.pushState(i,i,t)},this.destroy=function(){this.routes={},clearInterval(this.interval)},this.config=function(t){var e=this;E(t,function(t,n){e.settings[n]=t})},this.init=function(){var t=this,e=function(){var e=r.location.pathname;t.url!==e&&(t.url=e,t.changed())};clearInterval(t.interval),t.interval=setInterval(e,50)},this.on=function(t){var e,n=this;if(n.routes||(n.routes={}),R(t,k))e=t;else{var t=arguments;e={},e[t[0]]=t[1]}E(e,function(t,e){var r=n.settings.addr,i=[],o=/([:*])(\w+)|([\*])/g,a=e.replace(o,function(){var t=arguments,e=t[2];return e?(i.push(e),"([^/]+)"):"(?:.*)"}),a=a+"$";n.routes[e]={callback:t,pattern:r?r+a:a,variables:i}})},this.changed=function(){var t=this.url,e=this.routes;E(e,function(e){var r,o=e.callback,a=e.pattern,u=e.variables;if(r=t.match(new RegExp(a))){var c=r.slice(1,r[l]).reduce(function(t,e,n){return t||(t={}),t[u[n]]=e,t},i);if(!R(o,S))throw"could not find render method";n.Render(o,s,c)}})}}var n=this,o=t.mount,a=t.addr,u=t.init,c=t.routes,f=new e;o&&n.Mount(o),a&&f.config({addr:a}),c&&f.on(c),f.init(),u&&f.nav(u),n.route=f},Element:N},t}(),U=function(){function t(t,e,n){return function(){var r=this,o=t in r?r[t]:r.getAttribute(t);if(o!==s&&o!==i){var a={};a[n]=o,e.setState(a)}}}return t}(),D=function(){function t(t){function e(){this.type="p",this.props={},this.children=[t]}return e[c].trust=a,e[c][u]=k,new e}return t}(),H=function(){function t(t,r,o,s,u){return function(c){function l(t){if(!d){if(t.target!==c)return;e(v,"transition",i),e(v,"transform",i)}e(v,"transformOrigin",i),v.willChange&&(v.willChange=i),m.remove(y),g.remove(y),c.removeEventListener(w,l)}if(R(c,T)&&(c=document.querySelector(c)),!c&&c.nodeType)throw"can't animate without an element";var f,p,d,h={},c=c.currentTarget||c,v=c.style,m=c.classList,g=n.body.classList,y="animation-running",w="transitionend";if(r){if(R(c.animate,S)&&(d=a),v.willChange&&(v.willChange="transform"),f=c.getBoundingClientRect(c),m.toggle(r),p=c.getBoundingClientRect(c),h.x=f.left-p.left,h.y=f.top-p.top,h.sx=f.width/p.width,h.sy=f.height/p.height,t=t||200,u=u||"cubic-bezier(0,0,0.32,1)",f="translate("+h.x+"px,"+h.y+"px) translateZ(0) scale("+h.sx+","+h.sy+")",f=o?f+" "+o:f,p="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",s&&e(v,"transformOrigin",s),m.add(y),g.add(y),d){var b=c.animate([{transform:f},{transform:p}],{duration:t,easing:u});b.addEventListener("finish",l)}else e(v,"transform",f),c.offsetWidth,e(v,"transition","transform "+t+"ms "+u),e(v,"transform",p);d||c.addEventListener(w,l)}}}function e(t,e,n){if(t&&null===t[e])for(var r=["webkit","Webkit","Moz","ms"],i=0;i<r.length;i++)e=r[i]+e[0].toUpperCase()+e.slice(1),void 0!==t[e]&&(t[e]=n);else t[e]=n}return t}();t.surl=j,t.h=N,t.bind=U,t.trust=D,t.animate=H});