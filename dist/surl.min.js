!function(){"use strict";function t(t,n){return n?t!==E&&t!==b?t[l]===n:T:!!t}function n(n,e){var r;if(t(n,v)||n[d]&&t(n[d],h)&&n[0]){var i=n[d];for(r=0;r<i;++r)if(e.call(n[r],n[r],r,n)===T)return n}else for(r in n)if(e.call(n[r],n[r],r,n)===T)return n;return n}function e(t,n,e){var r=(new y).getTime();n=n||60;var i=1e3/n;return function o(n){e.id=requestAnimationFrame(o);var a=(new y).getTime(),s=a-r;s>i&&(r=a-s%i,t(n))}(0)}function r(t,n){var e=[];for(var i in t){var o=n?n+"["+i+"]":i,a=t[i];e.push("object"==typeof a?r(a,o):S(o)+"="+S(a))}return e.join("&")}function i(n,e){var i=new x,o=f.location,a=n.url,e=n.callback,s=n.method,u=n.data||{},l=c.createElement("a");l.href=a;var p=!(l.hostname===o.hostname&&l.port===o.port&&l.protocol===o.protocol&&"file:"!==o.protocol);return l=b,i.open(s,a,R),i.onerror=function(){e(this,R)},i.onload=function(){if(e){var t,n,r=i.responseText;if(this.status>=200&&this.status<400){var o,a=i.getResponseHeader("content-type");a.indexOf(";")!==-1?(o=a.split(";"),o=o[0].split("/")):o=a.split("/"),o=o[1],n="json"===o?JSON.parse(r):"html"===o?(new DOMParser).parseFromString(r,"text/html"):r,t=[n,T]}else t=[this,R];e(t[0],t[1])}},p&&(i.withCredentials=R),"GET"!==s&&i.setRequestHeader("Content-Type",t(u,m)?"application/json":"text/plain"),"POST"===s?(i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(r(u))):i.send(),i}function o(t,n,e){return function(){var r=this,i=t in r?r[t]:r.getAttribute(t);if(i!==E&&i!==b){var o={};o[e]=i,n.setState(o)}}}function a(t){return{content:t,trust:R,$:R}}function s(n,e,r,i,o){return function(a){function s(t){if(!l){if(t.target!==a)return;d.transition=b,d.transform=b}d.transformOrigin=b,d.willChange=b,h.remove(m),v.remove(m),a.removeEventListener(w,s)}var u,f,l,p={},a=a.currentTarget||a,d=a.style,h=a.classList,v=c.body.classList,m="animation-running",w="transitionend";if(e){if(t(a.animate,g)&&(l=R),d.willChange="transform",u=a.getBoundingClientRect(a),h.toggle(e),f=a.getBoundingClientRect(a),p.x=u.left-f.left,p.y=u.top-f.top,p.sx=u.width/f.width,p.sy=u.height/f.height,n=n||200,o=o||"cubic-bezier(0,0,0.32,1)",u="translate("+p.x+"px,"+p.y+"px) translateZ(0) scale("+p.sx+","+p.sy+")",u=r?u+" "+r:u,f="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",i&&(d.transformOrigin=i),h.add(m),v.add(m),l){var y=a.animate([{transform:u},{transform:f}],{duration:n,easing:o});y.addEventListener("finish",s)}else d.transform=u,a.offsetWidth,d.transition="transform "+n+"ms "+o,d.transform=f;l||a.addEventListener(w,s)}}}var u={math:"http://www.w3.org/1998/Math/MathML",xlink:"http://www.w3.org/1999/xlink",svg:"http://www.w3.org/2000/svg"},c=document,f=window,l="constructor",p="prototype",d="length",h=Number,v=Array,m=Object,g=Function,w=String,y=Date,x=XMLHttpRequest,C=Math,b=null,T=!1,R=!0,E=void 0,S=encodeURIComponent,k="getInitialState",M="getDefaultProps",O="componentWillReceiveProps",L="componentDidMount",q="componentWillMount",A="componentWillUnmount",N="componentWillUpdate",F="componentDidUpdate";!function(){for(var t="requestAnimationFrame",n="cancelAnimationFrame",e=["ms","moz","webkit"],r=e[d],i="AnimationFrame",o=0,a=0;a<r&&!f[t];++a)f[t]=f[e[a]+"Request"+i],f[n]=f[e[a]+"Cancel"+i]||f[e[a]+"CancelRequest"+i];f[t]||(f[t]=function(t){var n=(new y).getTime(),e=C.max(0,16-(n-o)),r=f.setTimeout(function(){t(n+e)},e);return o=n+e,r}),f[n]||(f[n]=function(t){clearTimeout(t)})}();var P=function(t){var n=this;t&&n.mount(t),n.settings={auto:T}};P[p]={Router:{back:function(){history.back()},foward:function(){history.foward()},go:function(t){history.go(t)},destroy:function(){this.routes={},cancelAnimationFrame(this.raf.id)},nav:function(t){var n=this.settings.root;t=n?n+t:t,history.pushState(b,b,t)},config:function(t){var e=this;e.settings||(e.settings={}),n(t,function(t,n){e.settings[n]=t})},listen:function(){var t=this;t.url=b,t.raf={id:0},e(function(){var n=f.location.pathname;t.url!==n&&(t.url=n,t.changed())},60,t.raf)},on:function(e){var r,i=this;if(i.routes||(i.routes={}),i.raf||i.listen(),t(e,m))r=e;else{var e=arguments;r={},r[e[0]]=e[1]}n(r,function(t,n){var e=i.settings.root,r=[],o=/([:*])(\w+)|([\*])/g,a=n.replace(o,function(){var t=arguments,n=t[2];return n?(r.push(n),"([^/]+)"):"(?:.*)"});i.routes[n]={callback:t,pattern:e?e+a:a,variables:r}})},changed:function(){var e=this,r=e.url,i=e.routes;n(i,function(n){var e,i=n.callback,o=n.pattern,a=n.variables;if(e=r.match(new RegExp(o))){var s=e.slice(1,e[d]).reduce(function(t,n,e){return t||(t={}),t[a[e]]=n,t},b);if(!t(i,g))throw"could not find render method";f.surl.Render(i,E,s)}})}},DOM:function(){function r(t){return"on"===t.substring(0,2)}function i(t){return t.substring(2,t[d]).toLowerCase()}function o(t,n){for(var e in n)if(r(e)){var o=n[e];o&&t.addEventListener(i(e),o,T)}}function a(t,n,e,i){if(!r(n)&&"ref"!==n){var o=(i===-1?"remove":"set")+"Attribute";return"xlink:href"===n?t.setAttributeNS(u.xlink,"href",e):void("xmlns:xlink"!==n&&(t[n]!==E&&t.namespaceURI!==u.svg?t[n]=e:e!==u.svg&&e!==u.math&&(i===-1?t[o](n):t[o](n,e))))}}function s(t,n,e){var i=n===E||n===b,o=e===E||e===b||n!==e&&!r(t);return i?-1:o?1:void 0}function f(t,e,r,i){var o=[];r=r!==E?r:{};var u={};for(var c in e)u[c]=e[c];for(var c in r)u[c]=r[c];for(var c in u){var f=r[c],l=e[c],p=s(c,l,f),h=p===-1?f:l;p&&o.push({target:t,name:c,val:h,change:p})}if(o[d]){if(i[N]){var v=i[N].getCmp();i[N](v.props,v.state)}if(n(o,function(t){a(t.target,t.name,t.val,t.change)}),i[F]){var v=i[F].getCmp();i[F](v.props,v.state)}}}function h(t,n){for(var e in n)a(t,e,n[e],1)}function m(e,r){if(t(e,w))return c.createTextNode(e);if(e.trust&&e.$){var i=c.createElement("div"),a=c.createDocumentFragment();i.innerHTML=e.content;var s=v[p].slice.call(i.childNodes);return n(s,function(t){a.appendChild(t)}),a}var u;if(u=e.props&&e.props.xmlns?c.createElementNS(e.props.xmlns,e.type):c.createElement(e.type),h(u,e.props),o(u,e.props),t(e.children,v)&&n(e.children,function(t){u.appendChild(m(t,r))}),t(r,g)){var f=e.props,l=f?f.ref:E;if(l){var d=r(E,E,!0);d.refs={},t(l,g)?l(u):t(l,w)&&(d.refs[l]=u)}}return u}function y(n,e){var r=n[l]!==e[l],i=t(n,w)&&n!==e,o=n.type!==e.type;return r||i||o}function x(t){return t===E||t!==b&&0!==t&&t!==T||(t+=""),t}function C(t,n,e,r,i){if(r=r||0,e=x(e),n=x(n),e===E)t.appendChild(m(n,i)),n[L]&&n[L]();else if(n===E){var o=t.childNodes[r];setTimeout(function(){t.removeChild(o),e[A]&&e[A]()},0)}else if(y(n,e)){if(n[N]){var a=n[F].getCmp();n[N](a.props,a.state)}if(t.replaceChild(m(n),t.childNodes[r]),n[F]){var a=n[F].getCmp();n[F](a.props,a.state)}}else if(n.type){f(t.childNodes[r],n.props,e.props,n);for(var s=n.children[d],u=e.children[d],c=0;c<s||c<u;c++)C(t.childNodes[r],n.children[c],e.children[c],c,i)}}function R(t,n){this.mount=t,this.raf=b,this.render=n}return R[p]={update:function(){var t=this.render(),n=this.old;C(this.mount,t,n,E,this.render),this.old=t},init:function(){this.old=this.render(),this["new"]=this.old,C(this.mount,this.old,E,E,this.render)},auto:function(t){var n=this;t?(n.raf={id:1},e(function(){n.update()},60,n.raf)):cancelAnimationFrame(n.raf.id)}},R}(),Req:function(){var e=arguments,r={method:"GET"};n(e,function(n){if(t(n,m))r.data=n;else if(t(n,g))r.callback=n;else if(t(n,w)){var e=n.toUpperCase();"POST"===e||"GET"===e?r.method=e:r.url=n}}),i(r)},Mount:function(n){var e=this;n===c?n=n.body:t(n,w)&&(n=c.querySelector(n)),n&&n.nodeType?e.parent=n:e.parent=E},Render:function(n,e,r){var r,i=this;if(e&&(t(e,w)?i.parent=c.querySelector(e):e.nodeType&&(i.parent=e)),!i.parent)throw"element to mount does not exist";if(i.parent.innerHTML="",t(n,m)){var o=n;n=i.Component({render:function(){return o}})}var a=n(E,E,!0);a[q]&&a[q](r),i.virtual=new i.DOM(i.parent,n),i.virtual.init(),i.settings.auto&&i.virtual.auto(R)},Component:function(e){function r(t){this.type=t.type,this.props=t.props,this.children=t.children,this.$=!0}var i=this;e.props=e.props||{},e.state=e.state||{};var o=function(){var r=this;n(e,function(n,e){t(n,g)&&(n=n.bind(r)),r[e]=n})};n(["Props","State"],function(e){var r=e.toLowerCase();o[p]["set"+e]=function(e,o){var a=this;e&&(t(e,g)&&(e=e(a.state,a.props)),n(e,function(t,n){a[r][n]=t}),"state"!==r||o||i.settings.auto||!i.virtual||i.virtual.update())}});var a=new o;a[k]&&a.setState(a[k](),T),a[M]&&a.setProps(a[M]()),n(a,function(t,n){n!==q&&n!==A&&n!==O&&n!==N&&n!==L&&n!==F||(t.getCmp=function(){return a},r[p][n]=t)}),r[p][l]=m,a.render=function(){return new r(this())}.bind(a.render);var s=function(t,n,e){return n&&a.setProps({children:n}),t&&a.setProps(t),(t||n)&&a[O]&&(t&&n?t.children=n:!t&&n&&(t={},t.children=n),console.log(t),a[O](t)),e?a:a.render()};return s},Element:function(){function n(t){var n,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type;for(t.type="div";n=r.exec(o);)if(""===n[1]&&n[2])t.type=n[2];else if("#"===n[1])i.id=n[2];else if("."===n[1])e.push(n[2]);else if("["===n[3][0]){var a=n[6];a&&(a=a.replace(/\\(["'])/g,"$1")),i[n[4]]=a||R}return e[d]>0&&(i["class"]=e.join(" ")),t.props=i,t}function e(n,e){return t(n,m)&&e.props.xmlns&&(n.props.xmlns=e.props.xmlns),t(n,m)||t(n,w)||t(n,v)||(n+="","null"!==n&&"undefined"!==n||(n="")),n}function r(r,i){var o,a=arguments,s=a[d],c=2;i&&i.$||!t(i,m)?(c=1,i={}):i!==b&&i!==E&&t(i,m)||(i={});var f={type:r,props:i,children:[],$:R};r.indexOf("[")===-1&&r.indexOf("#")===-1&&r.indexOf(".")===-1||(f=n(f)),"svg"!==f.type&&"math"!==f.type||f.props.xmlns||(f.props.xmlns=u[f.type]);for(var l=c;l<s;l++)if(o=a[l],t(o,v))for(var p=0;p<o[d];p++)f.children[l-c+p]=e(o[p],f);else f.children[l-c]=e(o,f);return f}return r}()},f.surl=new P,f.h=f.surl.Element,f.bind=o,f.trust=a,f.animate=s}();