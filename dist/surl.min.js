!function(){"use strict";function t(t,e){return t?t[m]===e:L}function e(e,n){var r;if(t(e,y)||e[g]&&t(e[g],w)&&e[0]){var i=e[g];for(r=0;r<i;++r)if(n.call(e[r],e[r],r,e)===L)return e}else for(r in e)if(n.call(e[r],e[r],r,e)===L)return e;return e}function n(t,e,n){var r=(new E).getTime();e=e||60;var i=1e3/e;return function o(e){n.id=requestAnimationFrame(o);var a=(new E).getTime(),s=a-r;s>i&&(r=a-s%i,t(e))}(0)}function r(t,e){var n=[];for(var i in t){var o=e?e+"["+i+"]":i,a=t[i];n.push("object"==typeof a?r(a,o):R(o)+"="+R(a))}return n.join("&")}function i(e,n){var i=new T,o=h.location,a=e.url,n=e.callback,s=e.method,u=e.data||{},c=p.createElement("a");c.href=a;var f=!(c.hostname===o.hostname&&c.port===o.port&&c.protocol===o.protocol&&"file:"!==o.protocol);return c=k,i.open(s,a,_),i.onerror=function(){n(this,_)},i.onload=function(){if(n){var t,e,r=i.responseText;if(this.status>=200&&this.status<400){var o,a=i.getResponseHeader("content-type");a.indexOf(";")!==-1?(o=a.split(";"),o=o[0].split("/")):o=a.split("/"),o=o[1],e="json"===o?JSON.parse(r):"html"===o?(new DOMParser).parseFromString(r,"text/html"):r,t=[e,L]}else t=[this,_];n(t[0],t[1])}},f&&(i.withCredentials=_),"GET"!==s&&i.setRequestHeader("Content-Type",t(u,x)?"application/json":"text/plain"),"POST"===s?(i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),i.send(r(u))):i.send(),i}function o(r){var i=this;r&&i.mount(r),i.settings={auto:L},i.router={back:function(){history.back()},foward:function(){history.foward()},go:function(t){history.go(t)},destroy:function(){this.routes={},cancelAnimationFrame(this.raf.id)},nav:function(t){var e=this.settings.root;t=e?e+t:t,history.pushState(k,k,t)},config:function(t){var n=this;n.settings||(n.settings={}),e(t,function(t,e){n.settings[e]=t})},listen:function(){var t=this;t.url=k,t.raf={id:0},n(function(){var e=h.location.pathname;t.url!==e&&(t.url=e,t.changed())},60,t.raf)},on:function(n){var r,i=this;if(i.routes||(i.routes={}),i.raf||i.listen(),t(n,x))r=n;else{var n=arguments;r={},r[n[0]]=n[1]}e(r,function(t,e){var n=i.settings.root,r=[],o=/([:*])(\w+)|([\*])/g,a=e.replace(o,function(){var t=arguments,e=t[2];return e?(r.push(e),"([^/]+)"):"(?:.*)"});i.routes[e]={callback:t,pattern:n?n+a:a,variables:r}})},changed:function(){var n=this.url,r=this.routes;e(r,function(e){var r,o=e.callback,a=e.pattern,s=e.variables;if(r=n.match(new RegExp(a))){var u=r.slice(1,r[g]).reduce(function(t,e,n){return t||(t={}),t[s[n]]=e,t},k);if(!t(o,b))throw"could not find render method";i.render(o,O,u)}})}}}function a(t,e,n){return function(){var r=this,i=t in r?r[t]:r.getAttribute(t);if(i!==O&&i!==k){var o={};o[n]=i,e.setState(o)}}}function s(t){return{content:t,trust:_,__hs:_}}function u(t){var e,n=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type;for(t.type="div";e=r.exec(o);)if(""===e[1]&&e[2])t.type=e[2];else if("#"===e[1])i.id=e[2];else if("."===e[1])n.push(e[2]);else if("["===e[3][0]){var a=e[6];a&&(a=a.replace(/\\(["'])/g,"$1")),i[e[4]]=a||_}return n[g]>0&&(i["class"]=n.join(" ")),t.props=i,t}function c(e,n){return t(e,x)&&n.props.xmlns&&(e.props.xmlns=n.props.xmlns),t(e,x)||t(e,C)||t(e,y)||(e+="","null"!==e&&"undefined"!==e||(e="")),e}function f(e,n){var r,i=arguments,o=i[g],a=2;t(n,x)&&n.__hs||!t(n,x)?(a=1,n={}):n!==k&&n!==O&&t(n,x)||(n={});var s={type:e,props:n,children:[],__hs:_};e.indexOf("[")===-1&&e.indexOf("#")===-1&&e.indexOf(".")===-1||(s=u(s)),"svg"!==s.type&&"math"!==s.type||s.props.xmlns||(s.props.xmlns=d[s.type]);for(var f=a;f<o;f++)if(r=i[f],t(r,y))for(var l=0;l<r[g];l++)s.children[f-a+l]=c(r[l],s);else s.children[f-a]=c(r,s);return s}function l(e,n,r,i,o){return function(a){function s(t){if(!f){if(t.target!==a)return;d.transition=k,d.transform=k}d.transformOrigin=k,d.willChange=k,h.remove(v),m.remove(v),a.removeEventListener(g,s)}var u,c,f,l={},a=a.currentTarget||a,d=a.style,h=a.classList,m=p.body.classList,v="animation-running",g="transitionend";if(n){if(t(a.animate,b)&&(f=_),d.willChange="transform",u=a.getBoundingClientRect(a),h.toggle(n),c=a.getBoundingClientRect(a),l.x=u.left-c.left,l.y=u.top-c.top,l.sx=u.width/c.width,l.sy=u.height/c.height,e=e||200,o=o||"cubic-bezier(0,0,0.32,1)",u="translate("+l.x+"px,"+l.y+"px) translateZ(0) scale("+l.sx+","+l.sy+")",u=r?u+" "+r:u,c="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",i&&(d.transformOrigin=i),h.add(v),m.add(v),f){var w=a.animate([{transform:u},{transform:c}],{duration:e,easing:o});w.addEventListener("finish",s)}else d.transform=u,a.offsetWidth,d.transition="transform "+e+"ms "+o,d.transform=c;f||a.addEventListener(g,s)}}}var d={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},p=document,h=window,m="constructor",v="prototype",g="length",w=Number,y=Array,x=Object,b=Function,C=String,E=Date,T=XMLHttpRequest,S=Math,k=null,L=!1,_=!0,O=void 0,R=encodeURIComponent,q="getInitialState",A="getDefaultProps",M="componentWillMount",N="componentDidMount";!function(){for(var t="requestAnimationFrame",e="cancelAnimationFrame",n=["ms","moz","webkit"],r=n[g],i="AnimationFrame",o=0,a=0;a<r&&!h[t];++a)h[t]=h[n[a]+"Request"+i],h[e]=h[n[a]+"Cancel"+i]||h[n[a]+"CancelRequest"+i];h[t]||(h[t]=function(t){var e=(new E).getTime(),n=S.max(0,16-(e-o)),r=h.setTimeout(function(){t(e+n)},n);return o=e+n,r}),h[e]||(h[e]=function(t){clearTimeout(t)})}(),o[v]={__vdom:function(){function r(t){return"on"===t.substring(0,2)}function i(t){return t.substring(2,t[g]).toLowerCase()}function o(t,e){for(var n in e)if(r(n)){var o=e[n];o&&t.addEventListener(i(n),o,L)}}function a(t,e,n,i){if(!r(e)&&"ref"!==e){var o=(i===-1?"remove":"set")+"Attribute";return"xlink:href"===e?t.setAttributeNS(d.xlink,"href",n):void(t[e]!==O&&t.namespaceURI!==d.svg?t[e]=n:n!==d.svg&&n!==d.math&&(i===-1?t[o](e):t[o](e,n)))}}function s(t,e,n,r){n===O||n===k?a(t,e,r,-1):r!==O&&r!==k&&n===r||a(t,e,n,1)}function u(t,e,n){n=n!==O?n:{};var r={};for(var i in e)r[i]=e[i];for(var i in n)r[i]=n[i];for(var i in r)s(t,i,e[i],n[i])}function c(t,e){for(var n in e)a(t,n,e[n],1)}function f(n,r){if(t(n,C))return p.createTextNode(n);if(n.trust&&n.__hs){var i=p.createElement("div"),a=p.createDocumentFragment();i.innerHTML=n.content;var s=y[v].slice.call(i.childNodes);return e(s,function(t){a.appendChild(t)}),a}var u;if(u=n.props&&n.props.xmlns?p.createElementNS(n.props.xmlns,n.type):p.createElement(n.type),c(u,n.props),o(u,n.props),t(n.children,y)&&e(n.children,function(t){u.appendChild(f(t,r))}),t(r,b)){var l=n.props,d=l?l.ref:O;if(d){var h=r(O,O,!0);h.refs={},t(d,b)?d(u):t(d,C)&&(h.refs[d]=u)}}return u}function l(e,n){var r=e[m]!==n[m],i=t(e,C)&&e!==n,o=e.type!==n.type;return r||i||o}function h(t){return t===O||t!==k&&0!==t&&t!==L||(t+=""),t}function w(t,e,n,r){if(r=r||0,n=h(n),e=h(e),n===O)t.appendChild(f(e,r));else if(e===O){var i=t.childNodes[r];setTimeout(function(){t.removeChild(i)},0)}else if(l(e,n))t.replaceChild(f(e),t.childNodes[r]);else if(e.type){u(t.childNodes[r],e.props,n.props);for(var o=e.children[g],a=n.children[g],s=0;s<o||s<a;s++)w(t.childNodes[r],e.children[s],n.children[s],s)}}function x(t,e){this.parent=t,this.render=e,this.raf=k}return x[v]={update:function(){var t=this.render(),e=this.old;w(this.parent,t,e),this.old=t},init:function(){this.old=this.render(),w(this.parent,this.old,O,this.render)},auto:function(t){var e=this;t?(e.raf={id:1},n(function(){e.update()},60,e.raf)):cancelAnimationFrame(e.raf.id)}},x},req:function(){var n=arguments,r={method:"GET"};e(n,function(e){if(t(e,x))r.data=e;else if(t(e,b))r.callback=e;else if(t(e,C)){var n=e.toUpperCase();"POST"===n||"GET"===n?r.method=n:r.url=e}}),i(r)},mount:function(e){var n=this;e===p?e=e.body:t(e,C)&&(e=p.querySelector(e)),e&&e.nodeType?n.mountElement=e:n.mountElement=O},render:function(e,n,r){var r,i=this;if(n&&(t(n,C)?i.mountElement=p.querySelector(n):n.nodeType&&(i.mountElement=n)),!i.mountElement)throw"element to mount does not exist";i.mountElement.innerHTML="",e[M]&&e[M](r),i.vdom=this.__vdom(),i.vdom=new i.vdom(i.mountElement,e),i.vdom.init(),e[N]&&e[N](),i.settings.auto&&i.vdom.auto(_)},createClass:function(n){var r=this;n.props=n.props||{},n.state=n.state||{};var i=function(){var r=this;e(n,function(e,n){t(e,b)&&(e=e.bind(r)),r[n]=e})};e(["Props","State"],function(t){var n=t.toLowerCase();i[v]["set"+t]=function(t,i){var o=this;t&&(e(t,function(t,e){o[n][e]=t}),"state"!==n||i||r.settings.auto||!r.vdom||r.vdom.update())}});var o=new i;o[q]&&o.setState(o[q](),L),o[A]&&o.setProps(o[A]());var a=function(t,e,n){return e&&o.setProps({children:e}),t&&o.setProps(t),n?o:o.render()};return o[M]&&(a[M]=o[M]),o[N]&&(a[N]=o[N]),a}},h.h=f,h.bind=a,h.trust=s,h.animate=l,h.surl=o}();