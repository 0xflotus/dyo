!function(){"use strict"
function t(t,n){var r,e=0
if(t.constructor===Array){for(var o=t,i=o.length;i>e;++e)if(n.call(o[e],o[e],e,o)===!1)return o}else{var a=t
for(r in a)if(n.call(a[r],a[r],r,a)===!1)return a}}function n(t,n,r){var e=(new Date).getTime()
n=n||60
var o=1e3/n
return function i(n){r.id=requestAnimationFrame(i)
var a=(new Date).getTime(),s=a-e
s>o&&(e=a-s%o,t(n))}(0)}function r(t){var n=[]
for(var e in t){var o=t[e]
n.push("object"==typeof o?r(o):encodeURIComponent(e)+"="+encodeURIComponent(o))}return n.join("&")}function e(t){var n=new XMLHttpRequest,e=window.location,o=t.url,i=t.callback,a=t.method,s=t.data,c=document.createElement("a")
c.href=o
var u=!(c.hostname===e.hostname&&c.port===e.port&&c.protocol===e.protocol&&"file:"!==e.protocol)
return c=null,n.open(a,o,!0),n.onerror=function(){i(this,!0)},n.onload=function(){if(i){var t=void 0,r=void 0
if(this.status>=200&&this.status<400){var e=n.getResponseHeader("content-type"),o=e.split(";")
o=e[0].split("/"),e=o[o.length-1],r="json"===e?JSON.parse(n.responseText):"html"===e?(new DOMParser).parseFromString(n.responseText,"text/html"):n.responseText,t=[r,!1]}else t=[this,!0]
i(t[0],t[1])}},u&&(n.withCredentials=!0),"GET"!==a&&n.setRequestHeader("Content-Type",s.constructor===Object?"application/json":"text/plain"),"POST"===a?(n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.send(r(t))):n.send(),n}!function(t){for(var n="requestAnimationFrame",r="cancelAnimationFrame",e=["ms","moz","webkit"],o=e.length,i="AnimationFrame",a=0,s=0;o>s&&!t[n];++s)t[n]=t[e[s]+"Request"+i],t[r]=t[e[s]+"Cancel"+i]||t[e[s]+"CancelRequest"+i]
t[n]||(t[n]=function(n){var r=(new Date).getTime(),e=Math.max(0,16-(r-a)),o=t.setTimeout(function(){n(r+e)},e)
return a=r+e,o}),t[r]||(t[r]=function(t){clearTimeout(t)})}(window)
var o={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"},i=function(){function r(r){var e=this
r&&(e.parent=e.__$(r)),e.settings={loop:!0},e.router={nav:function(t){history.pushState(null,null,t)},back:function(){history.back()},foward:function(){history.foward()},go:function(t){history.go(t)},destroy:function(){this.routes={},cancelAnimationFrame(this.raf.id)},listen:function(){var t=this,r=window.location
t.url=null,t.raf={id:0},n(function(){var n=r.href
t.url!==n&&(t.url=n,t.changed())},60,t.raf)},on:function(n,r){var e,o=this
if(o.routes||(o.routes={}),o.raf||o.listen(),n.constructor!==Object){var i=arguments
e={},e[i[0]]=i[1]}else e=n
t(e,function(t,n){var r=[],e=/([:*])(\w+)|([\*])/g,i=n.replace(e,function(){var t=arguments,n=t[2]
return n?(r.push(n),"([^/]+)"):"(?:.*)"})
o.routes[n]={callback:t,pattern:i,variables:r}})},changed:function(){var n=this
t(n.routes,function(t){var r,o=t.callback,i=t.pattern,a=t.variables,s=n.url
if(r=s.match(RegExp(i))){var c=r.slice(1,r.length).reduce(function(t,n,r){return t||(t={}),t[a[r]]=n,t},null)
if(o.constructor===Function)o(c)
else{if(!o.hasOwnProperty("render"))throw"could not find the render method"
e.mount(o,null,c)}}}.bind(this))}}}return r.prototype={__vdom:function(){function r(t){return"on"===t.substring(0,2)}function e(t){return t.substring(2,t.length).toLowerCase()}function i(t,n){for(var o in n)if(r(o)){var i=n[o]
i&&t.addEventListener(e(o),i,!1)}}function a(t,n,e,i){if(!r(n)){var a=(-1===i?"remove":"set")+"Attribute"
return void 0!==t[n]&&t.namespaceURI!==o.svg&&(t[n]=e),"xlink:href"===n?t.setAttributeNS(o.xlink,"href",e):e!==o.svg&&e!==o.math?-1===i?t[a](n):t[a](n,e):void 0}}function s(t,n,r,e){r?e&&r===e||a(t,n,r,1):a(t,n,e,-1)}function c(t,n,r){r=void 0!==r?r:{}
var e={}
for(var o in n)e[o]=n[o]
for(var o in r)e[o]=r[o]
for(var i in e)s(t,i,n[i],r[i])}function u(t,n){for(var r in n)a(t,r,n[r],1)}function l(n){if(n.constructor===String)return document.createTextNode(n)
var r
return n.render?r=n.render.parent:(r=n.props&&n.props.xmlns?document.createElementNS(n.props.xmlns,n.type):document.createElement(n.type),u(r,n.props),i(r,n.props),n.children&&n.children.constructor===Array&&t(n.children.map(l),r.appendChild.bind(r))),r}function f(t,n){var r=t.constructor!==t.constructor,e=t.constructor===String&&t!==n,o=t.type!==n.type
return r||e||o}function d(t){return void 0===t||null!==t&&0!==t&&t!==!1||(t+=""),t}function p(t,n,r,e){if(e=e?e:0,r=d(r),n=d(n),r)if(n){if(f(n,r))t.replaceChild(l(n),t.childNodes[e])
else if(n.type){c(t.childNodes[e],n.props,r.props)
for(var o=n.children.length,i=r.children.length,a=0;o>a||i>a;a++)p(t.childNodes[e],n.children[a],r.children[a],a)}}else t.removeChild(t.childNodes[e])
else t.appendChild(l(n))}var h=function(){function t(t,n){this.parent=t,this.fn=n}return t.prototype.update=function(){var t=this.fn(),n=this.old
p(this.parent,t,n),this.old=t},t.prototype.init=function(){this.old=this.fn(),p(this.parent,this.old)},t.prototype.auto=function(t){var r=this
return t?(r.raf={id:1},void n(function(){r.update()},60,r.raf)):(setTimeout(function(){cancelAnimationFrame(r.raf.id)},0),r.raf.id)},t}()
return h},__$:function(t){return t===document?t=t.body:t.constructor===String&&(t=document.querySelector(t)),t&&t.nodeType?t:void 0},req:function(){var n=arguments,r={method:"GET",data:{},callback:function(){},url:""}
t(n,function(t){if(t.constructor===Object)r.data=t
else if(t.constructor===Function)r.callback=t
else if(t.constructor===String){var n=t.toUpperCase()
"POST"===n||"GET"===n?r.method=n:r.url=t}}),e(r)},mount:function(t,n,r){var e=this
if(n&&(e.parent=n),!e.parent)throw"the element to mount to does not exist"
e.parent.innerHTML="",e.parent.appendChild(t.render.parent),t.__constructor&&t.__constructor(r)},component:function(n){t(n,function(t,r,e){"render"!==r&&t.constructor===Function&&(e[r]=t.bind(n))})
var r=document.createElement("div")
if(n.namespace&&r.classList.add(n.namespace),n.render.constructor===Function){n.render={fn:n.render,parent:r},n.render.fn=n.render.fn.bind(n)
var e=this.__vdom()
n.render=new e(n.render.parent,n.render.fn),n.render.init(),this.settings.loop&&n.render.auto(!0)}return n}},r}(),a=function(){function t(t){var n,r=[],e=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,o=t.props?t.props:{},i=t.type
for(t.type="div";n=e.exec(i);)if(""===n[1]&&n[2])t.type=n[2]
else if("#"===n[1])o.id=n[2]
else if("."===n[1])r.push(n[2])
else if("["===n[3][0]){var a=n[6]
a&&(a=a.replace(/\\(["'])/g,"$1")),o[n[4]]=a||!0}return r.length>0&&(o["class"]=r.join(" ")),t.props=o,t}function n(t,n){return t&&t.constructor===Object&&n.props.xmlns&&(t.props.xmlns=n.props.xmlns),t=void 0===t||null===t||t.constructor!==Object&&t.constructor!==String&&t.constructor!==Array?t+"":t,t="null"===t||"undefined"===t?"":t}function r(r,e){var i=arguments.length,a=2,s={type:r,props:e,children:[]};(null===s.props||void 0===s.props||s.props.constructor!==Object)&&(s.props={}),(-1!==s.type.indexOf("[")||-1!==s.type.indexOf("#")||-1!==s.type.indexOf("."))&&(s=t(s)),("svg"===s.type||"math"===s.type)&&(s.props.xmlns||(s.props.xmlns=o[s.type]))
for(var c=a;i>c;c++){var u=arguments[c]
if(u&&u.constructor===Array)for(var l=0;l<u.length;l++)s.children[c-a+l]=n(u[l],s)
else s.children[c-a]=n(u,s)}return s}return r}(),s=function(){function t(){function t(n){if(!f){if(n.target!=a)return
a.style.transition=null,a.style.transform=null}a.style.transformOrigin=null,a.style.willChange=null,a.classList.remove("animation-running"),document.body.classList.remove("animation-running"),a.removeEventListener("transitionend",t)}var n,r,e,o,i,a,s,c,u,l,f
s=c=u=l={},n=Array.prototype.slice.call(arguments)
for(var d=n.length-1;d>=0;d--){var p=n[d]
p.constructor===Array?o=p.join(" "):p.constructor===Number?e=p:p.constructor===String?-1!==p.indexOf(",")?i=p:r=p:p.target&&(a=p.target)}if(this.constructor===Number?e=this:this.constructor===String?r=this:r||(r="animation-active"),r&&a){if(a.style.willChange="transform",s=a.getBoundingClientRect(),a.classList.toggle(r),c=a.getBoundingClientRect(),u.x=s.left-c.left,u.y=s.top-c.top,u.sx=s.width/c.width,u.sy=s.height/c.height,a.animate&&a.animate.constructor===Function&&(f=!0),l.first="translate("+u.x+"px,"+u.y+"px) translateZ(0) scale("+u.sx+","+u.sy+")",l.first=o?l.first+" "+o:l.first,l.last="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",l.duration=e?e:200,l.easing=i?"cubic-bezier("+i+")":"cubic-bezier(0,0,0.32,1)",a.style.transformOrigin="0 0",a.classList.add("animation-running"),document.body.classList.add("animation-running"),document.body.classList.toggle("animation-active"),f){var h=a.animate([{transform:l.first},{transform:l.last}],{duration:l.duration,easing:l.easing})
h.addEventListener("finish",t)}else a.style.transform=l.first,a.offsetWidth,a.style.transition="transform "+l.duration+"ms "+l.easing,a.style.transform=l.last
f||a.addEventListener("transitionend",t)}}return t}()
window.surl=i,window.h=a,window.animate=s}()
