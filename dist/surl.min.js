!function(){"use strict"
function t(){for(var t="requestAnimationFrame",n="cancelAnimationFrame",e=["ms","moz","webkit"],r=e.length,i="AnimationFrame",o=0,a=window,s=0;r>s&&!a[t];++s)a[t]=a[e[s]+"Request"+i],a[n]=a[e[s]+"Cancel"+i]||a[e[s]+"CancelRequest"+i]
a[t]||(a[t]=function(t){var n=(new Date).getTime(),e=Math.max(0,16-(n-o)),r=a.setTimeout(function(){t(n+e)},e)
return o=n+e,r}),a[n]||(a[n]=function(t){clearTimeout(t)})}function n(t,n){var e
if(t[c]===Array){var r=t.length
for(e=0;r>e;++e)if(n.call(t[e],t[e],e,t)===!1)return t}else for(e in t)if(n.call(t[e],t[e],e,t)===!1)return t
return t}function e(t,n,e){var r=(new Date).getTime()
n=n||60
var i=1e3/n
return function o(n){e.id=requestAnimationFrame(o)
var a=(new Date).getTime(),s=a-r
s>i&&(r=a-s%i,t(n))}(0)}function r(t){var n=[]
for(var e in t){var i=t[e]
n.push("object"==typeof i?r(i,e):encodeURIComponent(e)+"="+encodeURIComponent(i))}return n.join("&")}function i(t,n){var e=new XMLHttpRequest,i=window.location,o=t.url,n=t.callback,a=t.method,s=document.createElement("a")
s.href=o
var l=!(s.hostname===i.hostname&&s.port===i.port&&s.protocol===i.protocol&&"file:"!==i.protocol)
return s=null,e.open(a,o,!0),e.onerror=function(){n(this,!0)},e.onload=function(){if(n){var t,r
if(this.status>=200&&this.status<400){var i=e.getResponseHeader("content-type"),o=i.split(";")
o=i[0].split("/"),i=o[o.length-1],r="json"===i?JSON.parse(e.responseText):"html"===i?(new DOMParser).parseFromString(e.responseText,"text/html"):e.responseText,t=[r,!1]}else t=[this,!0]
n(t[0],t[1])}},l&&(e.withCredentials=!0),"GET"!==a&&e.setRequestHeader("Content-Type",t.data[c]===Object?"application/json":"text/plain"),"POST"===a?(e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(r(t))):e.send(),e}function o(t){var r=this
t&&(r.parent=r.__$(t)),r.settings={loop:!0},r.router={nav:function(t){history.pushState(null,null,t)},back:function(){history.back()},foward:function(){history.foward()},go:function(t){history.go(t)},destroy:function(){this.routes={},cancelAnimationFrame(this.raf.id)},listen:function(){var t=this,n=window.location
t.url=null,t.raf={id:0},e(function(){var e=n.href
t.url!==e&&(t.url=e,t.changed())},60,t.raf)},on:function(t){var e,r=this
if(r.routes||(r.routes={}),r.raf||r.listen(),t[c]!==Object){var i=arguments
e={},e[i[0]]=i[1]}else e=t
n(e,function(t,n){var e=[],i=/([:*])(\w+)|([\*])/g,o=n.replace(i,function(){var t=arguments,n=t[2]
return n?(e.push(n),"([^/]+)"):"(?:.*)"})
r.routes[n]={callback:t,pattern:o,variables:e}})},changed:function(){var t=this
n(t.routes,function(n){var e,i=n.callback,o=n.pattern,a=n.variables,s=t.url
if(e=s.match(RegExp(o))){var l=e.slice(1,e.length).reduce(function(t,n,e){return t||(t={}),t[a[e]]=n,t},null)
if(i[c]===Function)i(l)
else{if(!i.render)throw"could not find the render method"
r.mount(i,null,l)}}}.bind(this))}}}function a(t){var n,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type
for(t.type="div";n=r.exec(o);)if(""===n[1]&&n[2])t.type=n[2]
else if("#"===n[1])i.id=n[2]
else if("."===n[1])e.push(n[2])
else if("["===n[3][0]){var a=n[6]
a&&(a=a.replace(/\\(["'])/g,"$1")),i[n[4]]=a||!0}return e.length>0&&(i["class"]=e.join(" ")),t.props=i,t}function s(t,n){return t&&t[c]===Object&&n.props.xmlns&&(t.props.xmlns=n.props.xmlns),t=void 0===t||null===t||t[c]!==Object&&t[c]!==String&&t[c]!==Array?t+"":t,t="null"===t||"undefined"===t?"":t}function l(t,n){var e,r=arguments.length,i=2,o={type:t,props:n,children:[]};(null===o.props||void 0===o.props||o.props[c]!==Object)&&(o.props={}),(-1!==o.type.indexOf("[")||-1!==o.type.indexOf("#")||-1!==o.type.indexOf("."))&&(o=a(o)),("svg"===o.type||"math"===o.type)&&(o.props.xmlns||(o.props.xmlns=f[o.type]))
for(var l=i;r>l;l++)if(e=arguments[l],e&&e[c]===Array)for(var u=0;u<e.length;u++)o.children[l-i+u]=s(e[u],o)
else o.children[l-i]=s(e,o)
return o}function u(){function t(n){if(!d){if(n.target!=a)return
a.style.transition=null,a.style.transform=null}a.style.transformOrigin=null,a.style.willChange=null,a.classList.remove("animation-running"),document.body.classList.remove("animation-running"),a.removeEventListener("transitionend",t)}for(var n,e,r,i,o,a,s,l,u,f,d,s=l=u=f={},n=Array.prototype.slice.call(arguments),p=n.length-1;p>=0;p--){var h=n[p]
h[c]===Array?i=h.join(" "):h[c]===Number?r=h:h[c]===String?-1!==h.indexOf(",")?o=h:e=h:h.target&&(a=h.target)}if(this[c]===Number?r=this:this[c]===String?e=this:e||(e="animation-active"),e&&a){if(a.style.willChange="transform",s=a.getBoundingClientRect(),a.classList.toggle(e),l=a.getBoundingClientRect(),u.x=s.left-l.left,u.y=s.top-l.top,u.sx=s.width/l.width,u.sy=s.height/l.height,a.animate&&a.animate[c]===Function)var d=!0
if(f.first="translate("+u.x+"px,"+u.y+"px) translateZ(0) scale("+u.sx+","+u.sy+")",f.first=i?f.first+" "+i:f.first,f.last="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",f.duration=r?r:200,f.easing=o?"cubic-bezier("+o+")":"cubic-bezier(0,0,0.32,1)",a.style.transformOrigin="0 0",a.classList.add("animation-running"),document.body.classList.add("animation-running"),document.body.classList.toggle("animation-active"),d){var m=a.animate([{transform:f.first},{transform:f.last}],{duration:f.duration,easing:f.easing})
m.addEventListener("finish",t)}else a.style.transform=f.first,a.offsetWidth,a.style.transition="transform "+f.duration+"ms "+f.easing,a.style.transform=f.last
d||a.addEventListener("transitionend",t)}}var c="constructor",f={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}
o.prototype={__vdom:function(){function t(t){return"on"===t.substring(0,2)}function r(t){return t.substring(2,t.length).toLowerCase()}function i(n,e){for(var i in e)if(t(i)){var o=e[i]
o&&n.addEventListener(r(i),o,!1)}}function o(n,e,r,i){if(!t(e)){var o=(-1===i?"remove":"set")+"Attribute"
return void 0!==n[e]&&n.namespaceURI!==f.svg&&(n[e]=r),"xlink:href"===e?n.setAttributeNS(f.xlink,"href",r):r!==f.svg&&r!==f.math?-1===i?n[o](e):n[o](e,r):void 0}}function a(t,n,e,r){e?r&&e===r||o(t,n,e,1):o(t,n,r,-1)}function s(t,n,e){e=void 0!==e?e:{}
var r={}
for(var i in n)r[i]=n[i]
for(var i in e)r[i]=e[i]
for(var i in r)a(t,i,n[i],e[i])}function l(t,n){for(var e in n)o(t,e,n[e],1)}function u(t){if(t[c]===String)return document.createTextNode(t)
var e
return t.render?e=t.render.parent:(e=t.props&&t.props.xmlns?document.createElementNS(t.props.xmlns,t.type):document.createElement(t.type),l(e,t.props),i(e,t.props),t.children&&t.children[c]===Array&&n(t.children.map(u),e.appendChild.bind(e))),e}function d(t,n){var e=t[c]!==n[c],r=t[c]===String&&t!==n,i=t.type!==n.type
return e||r||i}function p(t){return void 0===t||null!==t&&0!==t&&t!==!1||(t+=""),t}function h(t,n,e,r){if(r=r?r:0,e=p(e),n=p(n),e)if(n){if(d(n,e))t.replaceChild(u(n),t.childNodes[r])
else if(n.type){s(t.childNodes[r],n.props,e.props)
for(var i=n.children.length,o=e.children.length,a=0;i>a||o>a;a++)h(t.childNodes[r],n.children[a],e.children[a],a)}}else t.removeChild(t.childNodes[r])
else t.appendChild(u(n))}function m(){this.parent=g,this.fn=y,this.raf=null}var v=arguments,g=v[0],y=v[1]
return m.prototype.update=function(){var t=this.fn(),n=this.old
h(this.parent,t,n),this.old=t},m.prototype.init=function(){this.old=this.fn(),h(this.parent,this.old)},m.prototype.auto=function(t){var n=this
return t?(n.raf={id:1},void e(function(){n.update()},60,n.raf)):(setTimeout(function(){cancelAnimationFrame(n.raf.id)},0),n.raf.id)},new m},__$:function(t){return t===document?t=t.body:t[c]===String&&(t=document.querySelector(t)),t&&t.nodeType?t:void 0},req:function(){var t=arguments,e={}
n(t,function(t){if(t[c]===Object)e.data=t
else if(t[c]===Function)e.callback=t
else if(t[c]===String){var n=t.toUpperCase()
"POST"===n||"GET"===n?e.method=n:e.url=t}}),i(e)},mount:function(t,n,e){var r=this
if(n&&(r.parent=n),!r.parent)throw"the element to mount to does not exist"
r.parent.innerHTML="",r.parent.appendChild(t.render.parent),t.__constructor&&t.__constructor(e)},component:function(t){n(t,function(n,e,r){"render"!==e&&n[c]===Function&&(r[e]=n.bind(t))})
var e=document.createElement("div")
return t.namespace&&e.classList.add(t.namespace),t.render[c]===Function&&(t.render={fn:t.render,parent:e},t.render.fn=t.render.fn.bind(t),t.render=this.__vdom(t.render.parent,t.render.fn),t.render.init(),this.settings.loop&&t.render.auto(!0)),t}},t(),window.h=l,window.animate=u,window.surl=o}()
