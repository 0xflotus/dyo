<!DOCTYPE html>
<html>
	<head>
		<title>Playground</title>
		<meta charset="utf-8">
		<meta http-equiv="x-ua-compatible" content="ie=edge">
		<meta name="description" content="">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
		<link rel="icon" href="data:;base64,iVBORw0KGgo=">
		<style>
			* { margin:0; padding:0; box-sizing: border-box; }

			.card {
				background: rgb(200,0,100);
				width: 420px;
				margin: auto;
				padding: 20px;
				box-shadow: 1px 1px 4px rgba(0,0,0,0.4);
				position: relative;
				overflow: hidden;
			}
			.card:nth-child(-n+2) {
				background: #9C27B0;
			}
			.card.animation-running { box-shadow: none; }
			.card.animation-running * { opacity: 0;}
			.card.animation-active {
				position: fixed;
				height: 100%;
				width: 100%;
				bottom: 0;
				left: 0;
				z-index: 100;
				box-shadow: none;
			}
			.card p { 
				font-family:sans-serif; 
				color:#FFF; 
				pointer-events:none; 
			}
			body.animation-active { overflow: hidden; }
		</style>
		<script src="surl.js"></script>
		<script>
			var view = function (state, methods) {
				return (
					h('main', null, 
						state.list().map(function(a,i){
							return h('.card', {onclick: i > 1 ? animate : methods.test, title: 'Click Me'}, 
								h('p', null, h('h1', null, a.id), a.value)
							)
						})
					)
					// h('ul', {style: 'font-family:sans-serif;'},
					// 	h('button', {onClick: methods.test}, 'Click Me'),
					// 	h('input', {onInput: bind('value', state.data)}), //evt.test, type: 'text'}),
					// 	h('input[type=checkbox]', {checked:true}, ''),

					// 	h('svg', {width: 600, height: 100}, 
					// 		h('rect', {onClick: methods.test, width: 800, height: 100, x: 0, fill: '#008d46'}),
					// 		h('text', {x:0, y:40}, 'svg text & rect element ' + state.list()[0]),
					// 		h('use', {'xlink:href': '#icon'})
					// 	),

					// 	h('math', null,
					// 		h('msqrt', {width:200}, 
					// 			h('mn', null, 'Math element')
					// 		)
					// 	),

					// 	[1,2].map( function(){ return h('br'); } ),
					// 	h('h1', null, state.active() + ' clicked, 1000 items'),

					// 	state.list().map( function(a, i) { return h('li', {onClick: methods.test.bind(null, i) }, a.value) })
					// )
				)
			}

			var routes = {
				api1: {type: 'GET', url: '?users/{id}'}
			}

			var state = {
				data: 'click me',
				list: [
					{id:0,value:'Click me to add 500 elements'}, 
					{id:1,value:'and me...'},
					{id:2,value:'Click me to animate'},
					{id:3,value:'and me...'}
				],
				active: 0
			}

			var methods = function (state, update, request, loop) {
				return {
					constructor: function () {
						request('api1', {id: 1234})
						loop.start();
					},
					test: function(e) {
						arr = [];

						for (var i = 0; i < 500; i++) {
							arr.push({id:i, value: new Date() + performance.now()})
						}
						
						state.list(arr)
						// update()
					}
				}
			}


			var test = surl()
						.routes(routes)
						.state(state)
						.methods(methods)
						.view(view)
						.mount(document)
		</script>
	</head>
	<body>
	</body>
</html>