<html>
<script>

function Tree1 (flag) {
this.flag = flag;
this.tag = null;
this.type = null;
this.props = null;
this.attrs = null;
this.children = null;
this.xmlns = null;
this.owner = null;
this.node = null;
this.key = null;
this.keyed = false;
};

function Tree2 (flag) {
this.flag = flag;
this.tag = null;
this.type = null;
this.props = null;
this.attrs = null;
this.children = null;
this.xmlns = null;
this.owner = null;
this.node = null;
this.key = null;
this.keyed = false;
}

Tree2.prototype = {
  toString: function () {

  }
}

function MyComponent() { }

// Test functions; make sure that the VM cannot outsmart you
// in eliminating dead object allocations;
const N = 1000000;
const TESTS = [
	function test1_newTree1() {
		const fiber1 = new Tree1()

    fiber1.name = 'div';
    fiber1.type = MyComponent;
    fiber1.props = {};
    fiber1.attrs = null;
    fiber1.children = [];
    fiber1.flag = 1;
    fiber1.xmlns = null;
    fiber1.owner = null;
    fiber1.node = null;
    fiber1.key = null;
    fiber1.keyed = false;

		return fiber1;
	},
	function test2_newTree2() {
		const fiber1 = new Tree2()

	  fiber1.name = 'div';
    fiber1.type = MyComponent;
    fiber1.props = {};
    fiber1.attrs = null;
    fiber1.children = [];
    fiber1.flag = 1;
    fiber1.xmlns = null;
    fiber1.owner = null;
    fiber1.node = null;
    fiber1.key = null;
    fiber1.keyed = false;

		return fiber1;
	}
];

// Test driver
function run(test, n = N) {
	var fiber;
	for (var i = 0; i < n; ++i) {
		fiber = test();
	}
	return fiber;
}

// Warmup
TESTS.forEach(test => run(test, 100));

// Measure
TESTS.forEach(test => {
	console.time(test.name);
	run(test);
	console.timeEnd(test.name);
});

</script>
</html>
