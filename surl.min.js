!function(){for(var t="requestAnimationFrame",n="cancelAnimationFrame",e=0,r=["webkit","moz"],i=r.length,o="AnimationFrame",s=0;i>s&&!window[t];++s)window[t]=window[r[s]+"Request"+o],window[n]=window[r[s]+"Cancel"+o]||window[r[s]+"CancelRequest"+o]
window[t]||(window[t]=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),i=window.setTimeout(function(){t(n+r)},r)
return e=n+r,i}),window[n]||(window[n]=function(t){clearTimeout(t)})}(),function(){"use strict"
function t(t){var n,e=[],r=/(?:(^|#|\.)([^#\.\[\]]+))|(\[(.+?)(?:\s*=\s*("|'|)((?:\\["'\]]|.)*?)\5)?\])/g,i=t.props?t.props:{},o=t.type
for(t.type="div";n=r.exec(o);)if(""===n[1]&&n[2])t.type=n[2]
else if("#"===n[1])i.id=n[2]
else if("."===n[1])e.push(n[2])
else if("["===n[3][0]){var s=n[6]
s&&(s=s.replace(/\\(["'])/g,"$1")),i[n[4]]=s||!0}return e.length>0&&(i["class"]=e.join(" ")),t.props=i,t}function n(t,n){return t&&t[p]===Object&&n.props.xmlns&&(t.props.xmlns=n.props.xmlns),t=void 0===t||null===t||t[p]!==Object&&t[p]!==String&&t[p]!==Array?t+"":t,t="null"===t||"undefined"===t?"":t}function e(e,r){var i,o=arguments.length,s=2,a={type:e,props:r,children:[]};(null===a.props||void 0===a.props||a.props[p]!==Object)&&(a.props={}),(-1!==a.type.indexOf("[")||-1!==a.type.indexOf("#")||-1!==a.type.indexOf("."))&&(a=t(a)),("svg"===a.type||"math"===a.type)&&(a.props.xmlns||(a.props.xmlns=h[a.type]))
for(var u=s;o>u;u++)if(i=arguments[u],i&&i[p]===Array)for(var l=0;l<i.length;l++)a.children[u-s+l]=n(i[l],a)
else a.children[u-s]=n(i,a)
return a}function r(t){return function(t){function n(){return arguments.length&&(t=arguments[0]),t}return n.toJSON=function(){return JSON.stringify(t)},n}(t)}function i(t,n,e){return function(e){e=e||window.event
var r=e.current||this,i=i||this,o=t in r?r[t]:r.getAttribute(t)
n.call(i,o)}}function o(){function t(n){if(!d){if(n.target!=s)return
s.style.transition=null,s.style.transform=null}s.style.transformOrigin=null,s.style.willChange=null,s.classList.remove("animation-running"),document.body.classList.remove("animation-running"),s.removeEventListener("transitionend",t)}for(var n,e,r,i,o,s,a,u,l,c,d,a=u=l=c={},n=Array.prototype.slice.call(arguments),f=n.length-1;f>=0;f--){var h=n[f]
h[p]===Array?i=h.join(" "):h[p]===Number?r=h:h[p]===String?-1!==h.indexOf(",")?o=h:e=h:h.target&&(s=h.target)}if(this[p]===Number?r=this:this[p]===String?e=this:e||(e="animation-active"),e&&s){if(s.style.willChange="transform",a=s.getBoundingClientRect(),s.classList.toggle(e),u=s.getBoundingClientRect(),l.x=a.left-u.left,l.y=a.top-u.top,l.sx=a.width/u.width,l.sy=a.height/u.height,s.animate&&s.animate[p]===Function)var d=!0
if(c.first="translate("+l.x+"px,"+l.y+"px) translateZ(0) scale("+l.sx+","+l.sy+")",c.first=i?c.first+" "+i:c.first,c.last="translate(0,0) translateZ(0) scale(1,1) rotate(0) skew(0)",c.duration=r?r:200,c.easing=o?"cubic-bezier("+o+")":"cubic-bezier(0,0,0.32,1)",s.style.transformOrigin="0 0",s.classList.add("animation-running"),document.body.classList.add("animation-running"),document.body.classList.toggle("animation-active"),d){var m=s.animate([{transform:c.first},{transform:c.last}],{duration:c.duration,easing:c.easing})
m.addEventListener("finish",t)}else s.style.transform=c.first,s.offsetWidth,s.style.transition="transform "+c.duration+"ms "+c.easing,s.style.transform=c.last
d||s.addEventListener("transitionend",t)}}function s(t){var n=[]
for(var e in t){var r=t[e]
n.push("object"==typeof r?s(r,e):encodeURIComponent(e)+"="+encodeURIComponent(r))}return n.join("&")}function a(t,n){var e=new XMLHttpRequest,r=window.location,i=document.createElement("a")
i.href=t.url
var o=!(i.hostname===r.hostname&&i.port===r.port&&i.protocol===r.protocol&&"file:"!==r.protocol)
return i=null,e.open(t.method,t.url,!0),e.onerror=function(){n(this,!0)},e.onload=function(){if(n){var t,r
if(this.status>=200&&this.status<400){var i=e.getResponseHeader("content-type"),o=i.split(";")
o=i[0].split("/"),i=o[o.length-1],r="json"===i?JSON.parse(e.responseText):"html"===i?(new DOMParser).parseFromString(e.responseText,"text/html"):e.responseText,t=[r,!1]}else t=[this,!0]
n(t[0],t[1])}},o&&(e.withCredentials=!0),"GET"!==t.method&&e.setRequestHeader("Content-Type",t.data[p]===Object?"application/json":"text/plain"),"POST"===t.method?(e.setRequestHeader("Content-type","application/x-www-form-urlencoded"),e.send(s(t))):e.send(),e}function u(t,n,e){for(var r in n)t[r]=n[r]
for(var r in e)t[r]=e[r]
return e}function l(t,n){for(var e in n)t=t.replace(RegExp("{"+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"}","g"),c(n[e]))
return t}function c(t){return(t+"").replace(/[&<>"'\/]/g,function(t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}
return n[t]})}function d(t,n){var e
if(t[p]===Array){var r=t.length
for(e=0;r>e;++e)if(n.call(t[e],t[e],e,t)===!1)return t}else for(e in t)if(n.call(t[e],t[e],e,t)===!1)return t
return t}function f(){var t=this
return{view:function(n){return t.view=n,this},ctrl:function(n){return t.ctrl=n,this},state:function(n){return t.state=n,this},mount:function(n){return t.mount(n),t},routes:function(n){return t.routes=n,this}}}var p="constructor",h={math:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink"}
window.p=window.prop=r,window.b=window.bind=i,window.h=e,window.animate=o,f.prototype={vdom:function(t,n){function e(t){return"on"===t.substring(0,2)}function r(t){return t.substring(2,t.length).toLowerCase()}function i(t,n){for(var i in n)if(e(i)){var o=n[i]
o[p]!==Function&&(o=g.ctrl[o]?g.ctrl[o]:null),o&&t.addEventListener(r(i),o,!1)}}function o(t,n,r,i){if(!e(n)){var o=(-1===i?"remove":"set")+"Attribute"
return void 0!==t[n]&&t.namespaceURI!==h.svg&&(t[n]=r),"xlink:href"===n?t.setAttributeNS(h.xlink,"href",r):r!==h.svg&&r!==h.math?-1===i?t[o](n):t[o](n,r):void 0}}function s(t,n,e,r){e?r&&e===r||o(t,n,e,1):o(t,n,r,-1)}function a(t,n,e){e=void 0!==e?e:{}
var r=u({},n,e)
for(var i in r)s(t,i,n[i],e[i])}function l(t,n){for(var e in n)o(t,e,n[e],1)}function c(t){if(t[p]===String)return document.createTextNode(t)
var n
return n=t.props&&t.props.xmlns?document.createElementNS(t.props.xmlns,t.type):document.createElement(t.type),l(n,t.props),i(n,t.props),t.children&&t.children[p]===Array&&d(t.children.map(c),n.appendChild.bind(n)),n}function f(t,n){var e=t[p]!==n[p],r=t[p]===String&&t!==n,i=t.type!==n.type
return e||r||i}function m(t){return void 0===t||null!==t&&0!==t&&t!==!1||(t+=""),t}function w(t,n,e,r){if(r=r?r:0,e=m(e),n=m(n),e)if(n){if(f(n,e))t.replaceChild(c(n),t.childNodes[r])
else if(n.type){a(t.childNodes[r],n.props,e.props)
for(var i=n.children.length,o=e.children.length,s=0;i>s||o>s;s++)w(t.childNodes[r],n.children[s],e.children[s],s)}}else t.removeChild(t.childNodes[r])
else t.appendChild(c(n))}function v(){this.root=t,this.fn=n,this.oldNode=this.fn(g.state,g.ctrl),w(this.root,this.oldNode),this.update()}var g=this
return v.prototype.update=function(){var t=this.fn(g.state,g.ctrl),n=this.oldNode
w(this.root,t,n),this.oldNode=t},new v},req:function(t,n,e){var r,i
if(!this.routes||!this.routes[t])throw"unknown route:"+t
i={},i.type=this.routes[t].type.toUpperCase(),i.url="GET"===this.routes[t].type?l(this.routes[t].url,n):this.routes[t].url,r={url:i.url?i.url:null,method:i.type?i.type:"GET",data:n?n:null},a(r,e)},fps:function(t,n,e){var r=(new Date).getTime()
n=n||60
var i=1e3/n
return function o(n){e.id=requestAnimationFrame(o),e.active=!0
var s=(new Date).getTime(),a=s-r
a>i&&(r=s-a%i,t(n))}(0)},loop:function(){var t=this
return{start:function(n){window._raf={id:null,active:null},t.fps(function(){t.update(),n&&window._raf.id===n&&cancelAnimationFrame(window._raf.id)},60,window._raf)},stop:function(){cancelAnimationFrame(window._raf.id),window._raf.active=!1}}},update:function(){this.view.update()},mount:function(t){var n=this
n.state&&d(n.state,function(t,n,e){e[n]=r(t)}),n.ctrl&&(n.ctrl=n.ctrl.call(n,n.state,function(){n.update()},function(t,e,r){n.req(t,e,r)},n.loop())),document.onreadystatechange=function(){if("interactive"===document.readyState){if(t===document?t=document.body:t&&t.constructor===String&&(t=document.querySelector(t)),!t||!t.nodeType)throw"Please ensure the DOM element exists"
0!==t.innerHTML.length&&(t.innerHTML=""),n.ctrl[p]&&n.ctrl[p](),n.view=n.vdom(t,n.view)}}}},window.surl=function(){return new f}}()
