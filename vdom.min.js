function h(t,n){for(var e,r=arguments.length,o=2,i=[],a="constructor",u=o;r>u;u++)if(e=arguments[u],e&&e[a]===Array)for(var s=0;s<e.length;s++)i[u-o+s]=e[s]
else i[u-o]=e
return(null===n||n[a]!==Object)&&(n={}),{type:t,props:n,children:i}}function p(t){return function(t){function n(){return arguments.length&&(t=arguments[0]),t}return n.toJSON=function(){return JSON.stringify(t)},n}(t)}function c(t){"use strict"
function n(t){var e=[]
for(var r in t){var o=t[r]
e.push("object"==typeof val?n(o,r):encodeURIComponent(r)+"="+encodeURIComponent(o))}return e.join("&")}function e(t,e){var r=new XMLHttpRequest,o=window.location,i=document.createElement("a")
i.href=t.url
var a=!(i.hostname===o.hostname&&i.port===o.port&&i.protocol===o.protocol&&"file:"!==o.protocol)
return r.open(t.method,t.url,!0),r.onerror=function(){e(this,!0)},r.onload=function(t,n){if(e){if(this.status>=200&&this.status<400){var o=r.getResponseHeader("content-type"),o=o.split(";"),o=o[0].split("/"),o=o[o.length-1]
n="json"===o?JSON.parse(r.responseText):"html"===o?(new DOMParser).parseFromString(r.responseText,"text/html"):r.responseText,t=[n,!1]}else t=[this,!0]
e(t[0],t[1])}},a&&(r.withCredentials=!0),"GET"!==t.method&&r.setRequestHeader("Content-Type",t.data[h]===Object?"application/json":"text/plain"),"POST"===t.method?(r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(n(t))):r.send(),r}function r(t,n,e){for(var r in n)t[r]=n[r]
for(var r in e)t[r]=e[r]
return e}function o(t,n,e){var r=(new Date).getTime()
n=n||60
var o=1e3/n
return function i(n){e.id=requestAnimationFrame(i),e.active=!0
var a=(new Date).getTime(),u=a-r
u>o&&(r=a-u%o,t(n))}(0)}function i(t){return{data:function(n){for(var e in n)t=t.replace(RegExp("{"+e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")+"}","g"),a(n[e]))
return t}}}function a(t){return(t+"").replace(/[&<>"'\/]/g,function(t){var n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"}
return n[t]})}function u(t,n){for(var e in t){if(n){var r=n(e,t)
if(r===!1)break
r&&(t[e]=r)}null!==t[e]&&"object"==typeof t[e]&&u(t[e],n)}return t}function s(t,n){var e
if("number"==typeof t.length){for(var e=0,r=t.length;r>e;++e)if(n.call(t[e],t[e],e,t)===!1)return t}else for(e in t)if(n.call(t[e],t[e],e,t)===!1)return t
return t}function c(t,n,e,o){function i(t){return"on"===t.substring(0,2)}function a(t){return t.substring(2,t.length).toLowerCase()}function u(t,n){for(var e in n)if(i(e)){var r=n[e]
r[h]!==Function&&(r=o[r]?o[r]:null),r&&t.addEventListener(a(e),r,!1)}}function c(t,n,e,r){if(!i(n)){var o=(-1===r?"remove":"set")+"Attribute"
return void 0!==t[n]&&(t[n]=e),-1===r?t[o](n):t[o](n,e)}}function f(t,n,e,r){e?r&&e===r||c(t,n,e,1):c(t,n,r,-1)}function d(t,n,e){e=void 0!==e?e:{}
var o=r({},n,e)
for(var i in o)f(t,i,n[i],e[i])}function p(t,n){for(var e in n)c(t,e,n[e],1)}function m(t){if(void 0===t||null===t?t="":(t[h]===Boolean||t[h]===Number)&&(t+=""),t[h]===String)return document.createTextNode(t+"")
var n=document.createElement(t.type)
return p(n,t.props),u(n,t.props),t.children[h]===Array&&s(t.children.map(m),n.appendChild.bind(n)),n}function v(t,n){var e=t[h]!==n[h],r=t[h]===String&&t!==n,o=t.type!==n.type
return e||r||o}function w(t){return void 0===t||null!==t&&0!==t&&t!==!1||(t+=""),t}function g(t,n,e,r){if(r=r?r:0,e=w(e),n=w(n),e)if(n){if(v(n,e))t.replaceChild(m(n),t.childNodes[r])
else if(n.type){d(t.childNodes[r],n.props,e.props)
for(var o=n.children.length,i=e.children.length,a=0;o>a||i>a;a++)g(t.childNodes[r],n.children[a],e.children[a],a)}}else t.removeChild(t.childNodes[r])
else t.appendChild(m(n))}function b(t,n,e){s(t,function(t){g(t,n,e)})}function y(t){var n={}
return s(t,function(t,e){n[e]=t()}),n}function T(){this.r=t.nodeType?[t]:Array[l].slice.call(t),s(this.r,function(t){0!==t.innerHTML.length&&(t.innerHTML="")}),this.s=e,this.b=o,this.raw=n,this.h=n(y(e),o),b(this.r,this.h),this.update()}return T[l].update=function(){var t=this.raw(y(this.s),this.b),n=this.h
b(this.r,t,n),this.h=t},new T}function f(t){if(t.routes&&t.routes[h]===Array){this.routes={}
for(var n=t.routes,e=n.length-1;e>=0;e--)this.routes[n[e].id]=n[e]}t.state&&(this.state=p(t.state)),t.behavior&&(this.behavior=t.behavior),t.component&&(this.component=t.component)}var l="prototype",h="constructor"
return f[l].mount=function(t,n){var e=this
if(!t)throw"Needs dom element to mount"
if(n&&e.state(n),u(e.state(),function(t,n){return p(n[t])}),e.behavior){var r=e.behavior.bind(e.behavior,e.state(),function(){e.update()},function(t,n,r){e.req(t,n,r)},e.loop())
e.behavior=new r}return e.component=c(t,e.component,e.state(),e.behavior),e.behavior[h]&&e.behavior[h](),this},f[l].update=function(){window._raf&&window._raf.active||this.component.update()},f[l].loop=function(){var t=this
return{start:function(n){window._raf={id:null,active:null},o(function(){t.component.update(),n&&window._raf.id===n&&cancelAnimationFrame(window._raf.id)},60,window._raf)},stop:function(){cancelAnimationFrame(window._raf.id),window._raf.active=!1}}},f[l].req=function(t,n,r){var o,a
if(!this.routes[t])throw"unknown route:"+t
a={},a.type=this.routes[t].type.toUpperCase(),a.url="GET"===this.routes[t].type?i(this.routes[t].url).data(n):this.routes[t].url,o={url:a.url?a.url:null,method:a.type?a.type:"GET",data:n?n:null},e(o,r)},new f(t)}!function(){for(var t="requestAnimationFrame",n="cancelAnimationFrame",e=0,r=["webkit","moz"],o=r.length,i=0;o>i&&!window[t];++i)window[t]=window[r[i]+"RequestAnimationFrame"],window[n]=window[r[i]+"CancelAnimationFrame"]||window[r[i]+"CancelRequestAnimationFrame"]
window[t]||(window[t]=function(t){var n=(new Date).getTime(),r=Math.max(0,16-(n-e)),o=window.setTimeout(function(){t(n+r)},r)
return e=n+r,o}),window[n]||(window[n]=function(t){clearTimeout(t)})}()
